---
title: "Determine a combinação ideal de sobrepor descontos"
description: "Quando descontos se sobreponham, você deve determinar se a combinação dos descontos que produzirão o inferior total de transações ou o desconto total a maior. Quando o valor de desconto varia de acordo com o preço do produto que estão sendo comprados como “, na comum compra 1, 1 por cento obter X sair” descontos de varejo (BOGO), esse processo será uma saída de otimização combinatória."
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>Determine a combinação ideal de sobrepor descontos

Quando descontos se sobreponham, você deve determinar se a combinação dos descontos que produzirão o inferior total de transações ou o desconto total a maior. Quando o valor de desconto varia de acordo com o preço do produto que estão sendo comprados como “, na comum compra 1, 1 por cento obter X sair” descontos de varejo (BOGO), esse processo será uma saída de otimização combinatória.

Este artigo aplica ao Microsoft Dynamics AX 2012 R3 ao 3105973 KB liberado (2 de novembro de 2015) ou posterior, e a versão de fevereiro de 2016 Microsoft Dynamics AX. Para determinar a combinação que se sobrepõem descontos candidatar-se com rapidez, e para continuar a fornecer a funcionalidade descontando rica disponível no Microsoft Dynamics AX for retail, nós introduzimos um método de aplicação de descontos se sobrepuserem. Chamamos este novo método de depreciação ** classificação marginal **. A classificação de valor marginal é usada quando o tempo em que são necessários para avaliar as combinações possíveis de descontos se excederem o limite que é configurável ** parâmetros de varejo ** na página no dynamics AX. No método de depreciação de classificação marginal, um valor é calculado para cada desconto sobrepor usando o valor de desconto em produtos compartilhados. Os descontos sobrepors são aplicados no valor relativo o maior para o menor valor relativo. Para obter detalhes sobre o novo método, consulte a seção “marginal de valor”, posteriormente neste artigo. A classificação de valor marginal não é usada quando valores de desconto para um produto não são afetados por outros produtos na transação. Por exemplo, este método não é usado para os dois descontos simples, ou para um desconto simples e um único desconto por quantidade de produto.

## <a name="discount-examples"></a>Exemplos de desconto
Em O dynamics AX, você pode criar um número ilimitado de descontos de varejo na comum conjunto de produtos. Entretanto, pois não há limites, problemas de desempenho poderão ocorrer ao tentar calcular descontos que devem ser usados em vários produtos. Os exemplos a seguir ilustram essa saída mais detalhadamente. No exemplo 1, é começamos dois produtos e os dois descontos se sobrepuserem. Em seguida, no exemplo 2, é mostramos como o problema evolui mais como produto são adicionados.

### <a name="example-1-two-products-and-two-discounts"></a>Exemplo 1: Os produtos e os dois descontos

Neste exemplo, dois produtos necessários para se qualificar para cada desconto, os descontos e não podem ser combinadas. Os descontos no exemplo estão ** o melhor preço ** descontos. Os produtos qualificam para os dois descontos. Eis os dois descontos. [![que se sobrepõem desconto 01] (combinados. /media/overlapping-discount-combo-01.jpg)](. /media/overlapping-discount-combo-01.jpg) Para todos os produtos dois, a validade dos dois descontos depende de preços dos produtos. Quando o preço dos produtos igual ou quase igual, desconto 1 é melhor. Quando o preço de um produto significativamente é menor que o preço de outros produtos, desconto 2 é melhor. É aqui a regra matemática para avaliar os dois descontos entre si: [![que se sobrepõem desconto 02] (combinados. /media/overlapping-discount-combo-02.jpg)](. Nota de /media/overlapping-discount-combo-02.jpg) quando o preço do 1 é igual para dois terços de preço do 2, os dois descontos é igual. Neste exemplo, a porcentagem de desconto em vigor para desconto 1 varia de uma porcentagem (quando os preços dos produtos forem afastadas) a um máximo de 25 por cento (quando os dois projetos tiverem o mesmo preço). A porcentagem de desconto em vigor para desconto 2 é fixo. É sempre 20. Porque a porcentagem de desconto em vigor para desconto 1 tiver um intervalo que pode ser maior ou menor do que de desconto 2, a melhor desconto depende de preços dos produtos a ser descontados. Neste exemplo, o cálculo é concluído rapidamente, pois apenas dois descontos são aplicados apenas dois em produtos. Há somente duas combinações possíveis: um aplicativo de aplicativo de desconto 1 ou um desconto. de 2. Não há permutação a calcular. O valor da cada desconto é calculado usando-se os produtos, e o melhor desconto é usado.

### <a name="example-2-four-products-and-two-discounts"></a>Exemplo 2: Quatro produtos e os dois descontos

Em seguida, usaremos quatro produtos e os mesmos dois descontos. Todos os quatro produtos qualificam para os dois descontos. Há doze combinações possíveis. Na empresa, dois descontos serão aplicados à transação de três combinações: duas aplicativos de desconto 1, duas aplicativos de aplicativo de desconto 2, ou um de aplicativo de desconto 1 e um desconto de 2. Para ilustrar as possíveis combinações, é olharemos dois conjuntos diferentes de quatro produto com preços diferentes:

-   Todos os quatro produtos têm o mesmo, $15.00 preço. Nesse caso, a melhor combinação de desconto for duas aplicativos de desconto 1. Dois produto serão preço máximo, dois e 50 será de saída. O total descontado para a transação é $45 + (7.50 + 7.50 +), que é $15 (25) no total. undiscounted de r$ O desconto só $12 2 (20).
-   Dois produtos são $20 cada um produto, é $15, e é $5 um produto. Nesse caso, a melhor combinação de desconto é um aplicativo de aplicativo de desconto 2 e um desconto de 1. As tabelas a seguir ilustram descontos.

Leia para as tabelas, use um produto de uma linha e um produto de uma coluna. Por exemplo, a tabela para o desconto 1, enquanto que combina dois $20 produtos, você obterá hora. $ Na tabela para o desconto 2, você $15 combina produtos e os $5 produtos, você obtém $4 saída. [![que se sobrepõem desconto 03] (combinados. /media/overlapping-discount-combo-03.jpg)](. /media/overlapping-discount-combo-03.jpg) Primeiramente, é localizamos o maior desconto disponível de todos os produtos duas usando qualquer um desconto. As duas tabelas mostram o valor de desconto de todas as combinações dos produtos. Partes protegidas tabelas representam esses casos em que um produto ser emparelhados com que se, nós poderemos não fazer, ou emparelhar-se revertidos dos produtos que gera o mesmo valor do desconto e pode ser ignorado. Olhando as tabelas, é possível ver esse desconto 1 para os dois $20 itens é o maior desconto disponível para qualquer um desconto nos quatro produto. (Esse desconto é realçado em verde na primeira tabela.) Isso só deixa de produto e $15 de produto $5. Olhando as duas tabelas novamente, poderá consultar esse, desses dois produto, o desconto 1 gera um desconto $2.50, enquanto o desconto 2 gera um desconto $4. Portanto, é selecionamos desconto 2. O desconto total é $14. Para facilitar esta discussão visualizar, é aqui duas tabelas extras que mostrem a porcentagem de desconto em vigor para todas as combinações possíveis de duas produto para o desconto 1 e 2. o desconto. Somente parte da lista de combinações são incluídas, porque, para os dois descontos, a ordem em que os dois produto são inseridos no desconto não importar. Desconto em vigor a maior (25) é realçado em verde, e no menor desconto efetiva (10) é realçado em vermelho. [![que se sobrepõem desconto 04] (combinados. /media/overlapping-discount-combo-04.jpg)](. /media/overlapping-discount-combo-04.jpg) ** observação: ** Quando os preços podem variar, e dois ou mais descontos, competem a única maneira de garantir a melhor combinação de descontos é avaliar os dois descontos e compará-los.

## <a name="total-possible-combinations"></a>Combinações possíveis totais
Esta seção retomará o exemplo anterior de seção. Nós adicionaremos mais produtos e outro desconto, e consultamos quantas combinações devem ser calculadas e comparadas. A tabela mostra o número de combinações possíveis de descontos como a quantidade de bens aumenta. A tabela mostra o que acontece ambos quando houver dois descontos se sobrepõem, como no exemplo anterior e, quando há três descontos se sobrepuserem. O número de combinações possíveis de descontos que devem ser avaliadas logo exceder o mesmo que um computador rápido pode calcular e comparar rapidamente suficiente para ser aceitável para transações de varejo. [![que se sobrepõem desconto 05] (combinados. /media/overlapping-discount-combo-05.jpg)](. /media/overlapping-discount-combo-05.jpg) Mesmo quando as quantidades maiores ou mais descontos sobrepor são aplicados, o número total de combinações possíveis de descontos inserir rapidamente em milhões, e o tempo necessário para avaliar rapidamente e selecione a combinação possível melhor são visíveis. Algumas otimizações foram feitas no mecanismo de preço de varejo para reduzir o número total de combinações que devem ser avaliadas. Porém, como o número que se sobrepõem descontos e as quantidades em uma transação não é limitado, um grande número combinações que terão sempre ser avaliadas sempre que houver estarão sobrepostas descontos. O problema é problema que o método de depreciação de classificação marginal aborda.

## <a name="marginal-value-method"></a>Método de depreciação marginal
Para resolver a saída de um número exponencialmente crescente de combinações que devem ser avaliadas, uma otimização existe que calcula o valor por produto compartilhados por desconto em conjunto de produtos a qual duas ou mais descontos podem ser aplicados. Nós referimos este valor como ** marginal ** valor de desconto para produtos compartilhados. O valor a média marginal for pelo aumento de produto no valor total de desconto quando o produto não são incluídos em cada desconto. O valor é calculado marginal tirando o valor total do desconto (DTotal), subtrair o valor de desconto do produto (DMinus compartilhados\\ compartilhado), e pela diferença pelo número de produtos (ProductsShared compartilhados.) [![que se sobrepõem desconto 06] (combinados. /media/overlapping-discount-combo-06.jpg)](. /media/overlapping-discount-combo-06.jpg) Após o valor marginal de cada desconto em um conjunto de produtos é compartilhado calculado, os descontos são aplicados a produtos, não em ordem exaustivamente valor marginal, do maior para o menor valor marginal. Para este método, todas as possibilidades restantes de desconto não são comparados sempre depois que uma única instância de um desconto se aplica. Em vez disso, os descontos são comparados sobrepor uma vez e aplicados na ordem. Nenhuma comparação adicional é feita. Configure o limite para alternar o método de depreciação marginal ** ** desconto na guia ** parâmetros de varejo ** de página. O tempo aceitáveis de calcular o desconto total variam nas indústrias de varejo. Porém, essas vezes normalmente ocorrem em intervalo de dez de milissegundos a uma segunda.


