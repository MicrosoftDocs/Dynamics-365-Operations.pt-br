---
title: Sincronização de ordens de venda diretamente entre o Sales e o Supply Chain Management
description: O tópico discute os modelos e as tarefas subjacentes que são usados para executar a sincronização de ordens de venda diretamente entre o Dynamics 365 Sales e o Dynamics 365 Supply Chain Management.
author: ChristianRytt
manager: tfehr
ms.date: 05/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: 3eaa25f0befcff448250ba2cce8e568fa4a4c707
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/13/2020
ms.locfileid: "4422377"
---
# <a name="synchronization-of-sales-orders-directly-between-sales-and-supply-chain-management"></a><span data-ttu-id="52d1d-103">Sincronização de ordens de venda diretamente entre o Sales e o Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="52d1d-103">Synchronization of sales orders directly between Sales and Supply Chain Management</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="52d1d-104">O tópico discute os modelos e as tarefas subjacentes que são usados para executar a sincronização de ordens de venda diretamente entre o Dynamics 365 Sales e o Dynamics 365 Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-104">The topic discusses the templates and underlying tasks that are used to run synchronization of sales orders directly between Dynamics 365 Sales and Dynamics 365 Supply Chain Management.</span></span>

## <a name="data-flow-in-prospect-to-cash"></a><span data-ttu-id="52d1d-105">Fluxo de dados no Prospect to cash</span><span class="sxs-lookup"><span data-stu-id="52d1d-105">Data flow in Prospect to cash</span></span>

<span data-ttu-id="52d1d-106">A solução Prospect to cash usa o recurso Integração de dados para sincronizar dados entre as instâncias Supply Chain Management e do Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-106">The Prospect to cash solution uses the Data integration feature to synchronize data across instances of Supply Chain Management and Sales.</span></span> <span data-ttu-id="52d1d-107">Os modelos de Prospect to cash que estão disponíveis com o recurso Integração de dados permitem o fluxo de dados para contas, contatos, produtos, cotações de venda, ordens de venda e faturas de venda entre o Supply Chain Management e o Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-107">The Prospect to cash templates that are available with the Data integration feature enable the flow of data for accounts, contacts, products, sales quotations, sales orders, and sales invoices between Supply Chain Management and Sales.</span></span> <span data-ttu-id="52d1d-108">A ilustração a seguir mostra como os dados são sincronizados entre o Supply Chain Management e o Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-108">The following illustration shows how the data is synchronized between Supply Chain Management and Sales.</span></span>

<span data-ttu-id="52d1d-109">[![Fluxo de dados em Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span><span class="sxs-lookup"><span data-stu-id="52d1d-109">[![Data flow in Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="52d1d-110">Modelos e tarefas</span><span class="sxs-lookup"><span data-stu-id="52d1d-110">Templates and tasks</span></span>

<span data-ttu-id="52d1d-111">Para acessar os modelos disponíveis, abra o [Centro de administração do Power Apps](https://preview.admin.powerapps.com/dataintegration).</span><span class="sxs-lookup"><span data-stu-id="52d1d-111">To access the available templates, open [Power Apps Admin Center](https://preview.admin.powerapps.com/dataintegration).</span></span> <span data-ttu-id="52d1d-112">Selecione **Projetos** e, no canto superior direito, selecione **Novo projeto** para selecionar modelos públicos.</span><span class="sxs-lookup"><span data-stu-id="52d1d-112">Select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="52d1d-113">Os seguintes modelos e as tarefas subjacentes são usados para executar sincronização de ordens de venda diretamente entre o Sales e o Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-113">The following templates and underlying tasks are used to run synchronization of sales orders directly between Sales and Supply Chain Management.</span></span>

- <span data-ttu-id="52d1d-114">**Nomes dos modelos na Integração de dados:**</span><span class="sxs-lookup"><span data-stu-id="52d1d-114">**Names of the templates in Data integration:**</span></span> 

    - <span data-ttu-id="52d1d-115">Ordens de Venda (Sales para Supply Chain Management) – Direto</span><span class="sxs-lookup"><span data-stu-id="52d1d-115">Sales Orders (Sales to Supply Chain Management) - Direct</span></span>
    - <span data-ttu-id="52d1d-116">Ordens de Venda (Supply Chain Management para Sales) – Direto</span><span class="sxs-lookup"><span data-stu-id="52d1d-116">Sales Orders (Supply Chain Management to Sales) - Direct</span></span>

- <span data-ttu-id="52d1d-117">**Nomes das tarefas no projeto de Integração de dados:**</span><span class="sxs-lookup"><span data-stu-id="52d1d-117">**Names of the tasks in the Data integration project:**</span></span>

    - <span data-ttu-id="52d1d-118">OrderHeader</span><span class="sxs-lookup"><span data-stu-id="52d1d-118">OrderHeader</span></span>
    - <span data-ttu-id="52d1d-119">OrderLine</span><span class="sxs-lookup"><span data-stu-id="52d1d-119">OrderLine</span></span>

<span data-ttu-id="52d1d-120">As seguintes tarefas de sincronização são obrigatórias para que a sincronização de cabeçalhos e linhas de fatura de venda possa ocorrer:</span><span class="sxs-lookup"><span data-stu-id="52d1d-120">The following synchronization tasks are required before synchronization of sales invoice headers and lines can occur:</span></span>

- <span data-ttu-id="52d1d-121">Produtos (Supply Chain Management para Sales) – Direto</span><span class="sxs-lookup"><span data-stu-id="52d1d-121">Products (Supply Chain Management to Sales) - Direct</span></span>
- <span data-ttu-id="52d1d-122">Contas (Sales para Supply Chain Management) – Direto (se usado)</span><span class="sxs-lookup"><span data-stu-id="52d1d-122">Accounts (Sales to Supply Chain Management) - Direct (if used)</span></span>
- <span data-ttu-id="52d1d-123">Contatos para Clientes (Sales para Supply Chain Management) – Direto (se usado)</span><span class="sxs-lookup"><span data-stu-id="52d1d-123">Contacts to Customers (Sales to Supply Chain Management) - Direct (if used)</span></span>

## <a name="entity-set"></a><span data-ttu-id="52d1d-124">Conjunto de entidades</span><span class="sxs-lookup"><span data-stu-id="52d1d-124">Entity set</span></span>

| <span data-ttu-id="52d1d-125">Gerenciamento da Cadeia de Fornecedores</span><span class="sxs-lookup"><span data-stu-id="52d1d-125">Supply Chain Management</span></span>  | <span data-ttu-id="52d1d-126">Vendas</span><span class="sxs-lookup"><span data-stu-id="52d1d-126">Sales</span></span>             |
|-------------------------|-------------------|
| <span data-ttu-id="52d1d-127">Cabeçalhos de ordens de venda CDS</span><span class="sxs-lookup"><span data-stu-id="52d1d-127">CDS sales order headers</span></span> | <span data-ttu-id="52d1d-128">SalesOrders</span><span class="sxs-lookup"><span data-stu-id="52d1d-128">SalesOrders</span></span>       |
| <span data-ttu-id="52d1d-129">Linhas de ordem de venda do CDS</span><span class="sxs-lookup"><span data-stu-id="52d1d-129">CDS sales order lines</span></span>   | <span data-ttu-id="52d1d-130">SalesOrderDetails</span><span class="sxs-lookup"><span data-stu-id="52d1d-130">SalesOrderDetails</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="52d1d-131">Fluxo de entidades</span><span class="sxs-lookup"><span data-stu-id="52d1d-131">Entity flow</span></span>

<span data-ttu-id="52d1d-132">As ordens de venda são criadas no Sales e sincronizadas para o Supply Chain Management quando **Executar projeto** é disparado para um projeto com base no modelo de **Ordens de Venda (Sales para Supply Chain Management) – Direto**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-132">Sales orders are created in Sales and synchronized to Supply Chain Management when **Run project** is triggered for a project based on the **Sales Orders (Sales to Supply Chain Management) - Direct** template.</span></span> <span data-ttu-id="52d1d-133">Você só pode ativar e sincronizar ordens do Sales se todos os **Produtos do Pedido** consistem em produtos que são mantidos externamente.</span><span class="sxs-lookup"><span data-stu-id="52d1d-133">You can only activate and synchronize orders from Sales if all **Order Products** consist of products that are externally maintained.</span></span> <span data-ttu-id="52d1d-134">Portanto, não pode haver nenhum produto inserido.</span><span class="sxs-lookup"><span data-stu-id="52d1d-134">Therefore, there can be no write-in products.</span></span> <span data-ttu-id="52d1d-135">Depois que a ordem é ativada, a ordem de venda se torna somente leitura na interface de usuário (IU).</span><span class="sxs-lookup"><span data-stu-id="52d1d-135">After the order is activated, the sales order becomes read-only in the user interface (UI).</span></span> <span data-ttu-id="52d1d-136">Nesse ponto, as atualizações são feitas no Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-136">At that point, the updates are made from Supply Chain Management.</span></span> <span data-ttu-id="52d1d-137">Depois que a ordem de venda tem um status **Confirmado**, um projeto baseado no modelo **Ordens de Venda (Supply Chain Management para Sales) – Direto** pode ser usado para sincronizar atualizações ou o status de atendimento do Supply Chain Management para Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-137">After the sales order has a status of **Confirmed**, the a project based on the **Sales Orders (Supply Chain Management to Sales) - Direct** template can be used to synchronize updates or fulfillment status from Supply Chain Management to Sales.</span></span>

<span data-ttu-id="52d1d-138">Você não precisa criar ordens no Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-138">You don't have to create orders in Sales.</span></span> <span data-ttu-id="52d1d-139">É possível criar novas ordens de venda no Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-139">You can create new sales orders in Supply Chain Management instead.</span></span> <span data-ttu-id="52d1d-140">Depois que uma ordem de venda tem um status **Confirmado**, ela é sincronizada com o Sales conforme descrito no parágrafo anterior.</span><span class="sxs-lookup"><span data-stu-id="52d1d-140">After a sales order has a status of **Confirmed**, it's synchronized to Sales as described in the previous paragraph.</span></span>

<span data-ttu-id="52d1d-141">No Supply Chain Management, os filtros no modelo ajudam a garantir que somente as ordens de venda relevantes sejam incluídas na sincronização:</span><span class="sxs-lookup"><span data-stu-id="52d1d-141">In Supply Chain Management, filters in the template help guarantee that only the relevant sales orders are included in the synchronization:</span></span>

- <span data-ttu-id="52d1d-142">Na ordem de venda, a solicitação e o faturamento do cliente precisam ter origem no Sales para serem incluídos na sincronização.</span><span class="sxs-lookup"><span data-stu-id="52d1d-142">On the sales order, both the ordering customer and the invoicing customer have to originate from Sales to be included in the synchronization.</span></span> <span data-ttu-id="52d1d-143">No Supply Chain Management, os campos **OrderingCustomerIsExternallyMaintained** e **InvoiceCustomerIsExternallyMaintained** são usados para filtrar ordens de venda das entidades de dados.</span><span class="sxs-lookup"><span data-stu-id="52d1d-143">In Supply Chain Management, the **OrderingCustomerIsExternallyMaintained** and **InvoiceCustomerIsExternallyMaintained** fields are used to filter sales orders from the data entities.</span></span>
- <span data-ttu-id="52d1d-144">A ordem de venda no Supply Chain Management deve ser confirmada.</span><span class="sxs-lookup"><span data-stu-id="52d1d-144">The sales order in Supply Chain Management must be confirmed.</span></span> <span data-ttu-id="52d1d-145">Somente ordens de venda confirmadas ou ordens de venda com status de processamento superior, como **Enviado** ou **Faturado** são sincronizadas com o Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-145">Only confirmed sales orders or sales orders that have a higher processing status, such as **Shipped** or **Invoiced**, are synchronized to Sales.</span></span>
- <span data-ttu-id="52d1d-146">Depois que uma ordem de venda é criada ou modificada, o trabalho em lotes **Calcular totais de vendas** no Supply Chain Management deve ser executado.</span><span class="sxs-lookup"><span data-stu-id="52d1d-146">After a sales order is created or modified, the **Calculate sales totals** batch job in Supply Chain Management must be run.</span></span> <span data-ttu-id="52d1d-147">Somente as ordens de venda em que os totais de vendas são calculados serão sincronizadas para o Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-147">Only sales orders where sales totals are calculated will be synchronized to Sales.</span></span>

## <a name="freight-tax"></a><span data-ttu-id="52d1d-148">Taxa de frete</span><span class="sxs-lookup"><span data-stu-id="52d1d-148">Freight tax</span></span>

<span data-ttu-id="52d1d-149">O Sales não dá suporte a impostos em nível de cabeçalho, pois os impostos são armazenados em nível de linha.</span><span class="sxs-lookup"><span data-stu-id="52d1d-149">Sales doesn't support tax at the header level, because tax is stored at the line level.</span></span> <span data-ttu-id="52d1d-150">Para permitir impostos no nível de cabeçalho no Supply Chain Management, como imposto sobre frete, o sistema sincroniza impostos com o Sales como um produto fora do catálogo que é chamado de **Taxa de Imposto sobre Frete** e que tem o valor de imposto do Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-150">To support tax at the header level from Supply Chain Management, such as tax on freight, the system synchronizes tax to Sales as a write-in product that is named **Freight Tax**, and that has the tax amount from Supply Chain Management.</span></span> <span data-ttu-id="52d1d-151">Dessa forma, o cálculo de preços padrão no Sales pode ser usado para totais, mesmo quando há um imposto no nível de cabeçalho do Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-151">In this way, the standard price calculation in Sales can be used for totals, even when there is tax at the header level from Supply Chain Management.</span></span>

## <a name="discount-calculation-and-rounding"></a><span data-ttu-id="52d1d-152">Cálculo de desconto e arredondamento</span><span class="sxs-lookup"><span data-stu-id="52d1d-152">Discount calculation and rounding</span></span>

<span data-ttu-id="52d1d-153">O modelo de cálculo de desconto no Sales difere do modelo de cálculo de desconto no Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-153">The discount calculation model in Sales differs from the discount calculation model in Supply Chain Management.</span></span> <span data-ttu-id="52d1d-154">No Supply Chain Management, o valor final de descontos em uma linha de venda pode ser o resultado de uma combinação de valores de desconto e porcentagens de desconto.</span><span class="sxs-lookup"><span data-stu-id="52d1d-154">In Supply Chain Management, the final discount amount on a sales line can be the result of a combination of discount amounts and discount percentages.</span></span> <span data-ttu-id="52d1d-155">Se este valor final de descontos for dividido pela quantidade na linha, poderá haver um arredondamento.</span><span class="sxs-lookup"><span data-stu-id="52d1d-155">If this final discount amount is divided by the quantity on the line, rounding can occur.</span></span> <span data-ttu-id="52d1d-156">No entanto, esse arredondamento não é considerado se um valor de desconto por unidade arredondado é sincronizado para o Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-156">However, this rounding isn't considered if a rounded per-unit discount amount is synchronized to Sales.</span></span> <span data-ttu-id="52d1d-157">Para ajudar a garantir que o valor total do desconto da linha de venda no Supply Chain Management seja sincronizado corretamente para o Sales, o valor total deve ser sincronizado sem ser dividido pela quantidade da linha.</span><span class="sxs-lookup"><span data-stu-id="52d1d-157">To help guarantee that the full discount amount from a sales line in Supply Chain Management is correctly synchronized to Sales, the full amount must be synchronized without being divided by the line quantity.</span></span> <span data-ttu-id="52d1d-158">Portanto, você deve definir o **Método de cálculo de desconto** como **Item de linha** no Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-158">Therefore, you must define the **Discount calculation method** as **Line item** in Sales.</span></span>

<span data-ttu-id="52d1d-159">Quando uma linha da ordem de venda for sincronizada do Sales para o Supply Chain Management, o valor de desconto de linha total será usado.</span><span class="sxs-lookup"><span data-stu-id="52d1d-159">When a sales order line is synchronized from Sales to Supply Chain Management, the full line discount amount is used.</span></span> <span data-ttu-id="52d1d-160">Como o Supply Chain Management não tem campos que possam armazenar o valor total de desconto para uma linha, o valor é dividido pela quantidade e armazenado no campo **Desconto de linha**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-160">Because Supply Chain Management has no field that can store the full discount amount for a line, the amount is divided by the quantity and stored in the **Line discount** field.</span></span> <span data-ttu-id="52d1d-161">Qualquer arredondamento que ocorrer nesta divisão será armazenado no campo **Encargos de venda** na linha de venda.</span><span class="sxs-lookup"><span data-stu-id="52d1d-161">Any rounding that occurs in this division is stored in the **Sales charges** field on the sales line.</span></span>

### <a name="example"></a><span data-ttu-id="52d1d-162">Exemplo</span><span class="sxs-lookup"><span data-stu-id="52d1d-162">Example</span></span>

<span data-ttu-id="52d1d-163">**Sincronização do Sales para o Supply Chain Management**</span><span class="sxs-lookup"><span data-stu-id="52d1d-163">**Synchronization from Sales to Supply Chain Management**</span></span>

- <span data-ttu-id="52d1d-164">**Vendas:** Quantidade = 3, desconto por linha = $ 10,00</span><span class="sxs-lookup"><span data-stu-id="52d1d-164">**Sales:** Quantity = 3, per-line discount = $10.00</span></span>
- <span data-ttu-id="52d1d-165">**Supply Chain Management:** Quantidade = 3, valor do desconto de linha = US$ 3,33, encargo de venda = -US$ 0,01</span><span class="sxs-lookup"><span data-stu-id="52d1d-165">**Supply Chain Management:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span> 

<span data-ttu-id="52d1d-166">**Sincronização do Supply Chain Management para Sales**</span><span class="sxs-lookup"><span data-stu-id="52d1d-166">**Synchronization from Supply Chain Management to Sales**</span></span>

- <span data-ttu-id="52d1d-167">**Supply Chain Management:** Quantidade = 3, valor do desconto de linha = US$ 3,33, encargo de venda = -US$ 0,01</span><span class="sxs-lookup"><span data-stu-id="52d1d-167">**Supply Chain Management:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span>
- <span data-ttu-id="52d1d-168">**Vendas:** Quantidade = 3, desconto por linha = (3 × $ 3,33) + $ 0,01 = $ 10,00</span><span class="sxs-lookup"><span data-stu-id="52d1d-168">**Sales:** Quantity = 3, per-line discount = (3 × $3.33) + $0.01 = $10.00</span></span>

## <a name="prospect-to-cash-solution-for-sales"></a><span data-ttu-id="52d1d-169">Solução Prospect to cash para o Sales</span><span class="sxs-lookup"><span data-stu-id="52d1d-169">Prospect to cash solution for Sales</span></span>

<span data-ttu-id="52d1d-170">Novos campos foram adicionados à entidade **Ordem** e são exibidos na página:</span><span class="sxs-lookup"><span data-stu-id="52d1d-170">New fields have been added to the **Order** entity and appear on the page:</span></span>

- <span data-ttu-id="52d1d-171">**É mantido externamente** – Defina essa opção como **Sim** quando a origem da ordem for o Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-171">**Is Maintained Externally** – Set this option to **Yes** when the order is coming from Supply Chain Management.</span></span>
- <span data-ttu-id="52d1d-172">**Status de processamento** – Esse campo mostra o status de processamento da ordem no Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-172">**Processing status** – This field shows the processing status of the order in Supply Chain Management.</span></span> <span data-ttu-id="52d1d-173">Os valores a seguir estão disponíveis:</span><span class="sxs-lookup"><span data-stu-id="52d1d-173">The following values are available:</span></span>

    - <span data-ttu-id="52d1d-174">**Rascunho** – O status inicial quando uma ordem é criada no Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-174">**Draft** – The initial status when an order is created in Sales.</span></span> <span data-ttu-id="52d1d-175">No Sales, só podem ser editadas ordens com este status de processamento.</span><span class="sxs-lookup"><span data-stu-id="52d1d-175">In Sales, only orders with this processing status can be edited.</span></span>
    - <span data-ttu-id="52d1d-176">**Ativo** – O status depois que a ordem é ativada no Sales usando o botão **Ativar**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-176">**Active** – The status after the order is activated in Sales by using the **Activate** button.</span></span>
    - <span data-ttu-id="52d1d-177">**Confirmado**</span><span class="sxs-lookup"><span data-stu-id="52d1d-177">**Confirmed**</span></span>
    - <span data-ttu-id="52d1d-178">**Guia de remessa**</span><span class="sxs-lookup"><span data-stu-id="52d1d-178">**Packing Slip**</span></span>
    - <span data-ttu-id="52d1d-179">**Faturado**</span><span class="sxs-lookup"><span data-stu-id="52d1d-179">**Invoiced**</span></span>
    - <span data-ttu-id="52d1d-180">**Separado**</span><span class="sxs-lookup"><span data-stu-id="52d1d-180">**Picked**</span></span>
    - <span data-ttu-id="52d1d-181">**Parcialmente separada**</span><span class="sxs-lookup"><span data-stu-id="52d1d-181">**Partially Picked**</span></span>
    - <span data-ttu-id="52d1d-182">**Parcialmente embalada**</span><span class="sxs-lookup"><span data-stu-id="52d1d-182">**Partially Packed**</span></span>
    - <span data-ttu-id="52d1d-183">**Remetido**</span><span class="sxs-lookup"><span data-stu-id="52d1d-183">**Shipped**</span></span>
    - <span data-ttu-id="52d1d-184">**Parcialmente remetida**</span><span class="sxs-lookup"><span data-stu-id="52d1d-184">**Partially Shipped**</span></span>
    - <span data-ttu-id="52d1d-185">**Parcialmente faturada**</span><span class="sxs-lookup"><span data-stu-id="52d1d-185">**Partially Invoiced**</span></span>
    - <span data-ttu-id="52d1d-186">**Cancelado**</span><span class="sxs-lookup"><span data-stu-id="52d1d-186">**Cancelled**</span></span>

<span data-ttu-id="52d1d-187">A configuração **Tem Somente Produtos Mantidos Externamente** é usada durante a ativação da ordem para rastrear, de forma consistente, se a ordem de venda consiste inteiramente em produtos mantidos externamente.</span><span class="sxs-lookup"><span data-stu-id="52d1d-187">The **Has Externally Maintained Products Only** setting is used during order activation to consistently track whether a sales order consists entirely of externally maintained products.</span></span> <span data-ttu-id="52d1d-188">Se uma ordem de venda consistir inteiramente em produtos mantidos externamente, os produtos serão mantidos no Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-188">If a sales order consists entirely of externally maintained products, the products are maintained in Supply Chain Management.</span></span> <span data-ttu-id="52d1d-189">Essa configuração ajuda a garantir que você não ative nem tente sincronizar linhas da ordem de venda que tenham produtos que sejam desconhecidos para o Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-189">This setting helps guarantee that you don't activate and try to synchronize sales order lines that have products that are unknown to Supply Chain Management.</span></span>

<span data-ttu-id="52d1d-190">Os botões **Criar fatura**, **Cancelar Ordem**, **Recalcular**, **Obter Produtos** e **Procurar Endereço** na página **Ordem de venda** são ocultados para ordens mantidas externamente, pois as faturas serão criadas no Supply Chain Management e sincronizadas para o Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-190">The **Create Invoice**, **Cancel Order**, **Recalculate**, **Get Products**, and **Lookup Address** buttons on the **Sales order** page are hidden for externally maintained orders, because invoices will be created in Supply Chain Management and synchronized to Sales.</span></span> <span data-ttu-id="52d1d-191">Essas ordens não podem ser editadas, pois as informações da ordem de venda serão sincronizadas do Supply Chain Management após a ativação.</span><span class="sxs-lookup"><span data-stu-id="52d1d-191">These orders can't be edited, because sales order information will be synchronized from Supply Chain Management after activation.</span></span>

<span data-ttu-id="52d1d-192">O status da ordem de venda permanecerá **Ativo** para ajudar a garantir que as alterações no Supply Chain Management possam fluir para a ordem de venda no Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-192">The sales order status will remain **Active** to help guarantee that changes from Supply Chain Management can flow to the sales order in Sales.</span></span> <span data-ttu-id="52d1d-193">Para controlar este comportamento, defina o padrão do valor **Statecode \[Status\]** para **Ativo** no Projeto de integração de dados.</span><span class="sxs-lookup"><span data-stu-id="52d1d-193">To control this behavior, set the default **Statecode \[Status\]** value to **Active** in the Data integration project.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="52d1d-194">Precondições e configuração de mapeamento</span><span class="sxs-lookup"><span data-stu-id="52d1d-194">Preconditions and mapping setup</span></span>

<span data-ttu-id="52d1d-195">Antes de sincronizar ordens de venda, é importante atualizar as configurações a seguir nos sistemas.</span><span class="sxs-lookup"><span data-stu-id="52d1d-195">Before you synchronize sales orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-sales"></a><span data-ttu-id="52d1d-196">Configuração no Sales</span><span class="sxs-lookup"><span data-stu-id="52d1d-196">Setup in Sales</span></span>

- <span data-ttu-id="52d1d-197">Verifique se as permissões estão definidas para a equipe à qual foi atribuído o usuário da conexão do Sales definida.</span><span class="sxs-lookup"><span data-stu-id="52d1d-197">Make sure that permissions are set up for the team that the user from your Sales connection set is assigned to.</span></span> <span data-ttu-id="52d1d-198">Se estiver usando os dados de demonstração, geralmente o usuário tem acesso admin, mas a equipe não tem acesso admin.</span><span class="sxs-lookup"><span data-stu-id="52d1d-198">If you're using demo data, the user usually has admin access, but the team doesn't have admin access.</span></span> <span data-ttu-id="52d1d-199">Se a equipe não tiver acesso de administrador, quando você executar o projeto na Integração de dados, você receberá uma mensagem de erro indicando que a Equipe principal está ausente.</span><span class="sxs-lookup"><span data-stu-id="52d1d-199">If the team doesn't have admin access, when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</span></span>

    <span data-ttu-id="52d1d-200">Vá para **Configurações** &gt; **Segurança** &gt; **Equipes**, selecione a equipe relevante, selecione **Gerenciar Funções** e selecione a função que tem as permissões desejadas, como **Administrador do Sistema**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-200">Go to **Settings** &gt; **Security** &gt; **Teams**, select the relevant team, select **Manage Roles**, and select a role that has the desired permissions, such as **System Administrator**.</span></span>

- <span data-ttu-id="52d1d-201">Para assegurar o cálculo correto de descontos no Sales e no Supply Chain Management, o **Método de cálculo de desconto** deve ser definido como **Item de linha**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-201">To ensure correct calculation of discounts in both Sales and Supply Chain Management **Discount calculation method** must be set to **Line item**.</span></span>
- <span data-ttu-id="52d1d-202">Vá para **Configurações** &gt; **Administração** &gt; **Configurações do sistema** &gt; **Vendas** e certifique-se de que as seguintes configurações sejam usadas:</span><span class="sxs-lookup"><span data-stu-id="52d1d-202">Go to **Settings** &gt; **Administration** &gt; **System settings** &gt; **Sales**, and make sure that the following settings are used:</span></span>

    - <span data-ttu-id="52d1d-203">A opção **Usar sistema de cálculo de precificação do sistema** está definida como **Sim**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-203">The **Use system prizing calculation system** option is set to **Yes**.</span></span>
    - <span data-ttu-id="52d1d-204">O campo **Método de cálculo de desconto** está definido como **Item de linha**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-204">The **Discount calculation method** field is set to **Line item**.</span></span>

### <a name="setup-in-supply-chain-management"></a><span data-ttu-id="52d1d-205">Configuração no Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="52d1d-205">Setup in Supply Chain Management</span></span>

- <span data-ttu-id="52d1d-206">Vá para **Vendas e marketing** &gt; **Tarefas periódicas** &gt; **Calcular totais de vendas**, e configure o trabalho para ser executado como um trabalho em lotes.</span><span class="sxs-lookup"><span data-stu-id="52d1d-206">Go to **Sales and marketing** &gt; **Periodic tasks** &gt; **Calculate sales totals**, and set the job to run as a batch job.</span></span> <span data-ttu-id="52d1d-207">Defina a opção **Calcular totais de ordens de venda** como **Sim**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-207">Set the **Calculate totals for sales orders** option to **Yes**.</span></span> <span data-ttu-id="52d1d-208">Esta etapa é importante, pois somente as ordens de venda em que os totais de vendas são calculados serão sincronizadas para o Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-208">This step is important, because only sales orders where sales totals are calculated will be synchronized to Sales.</span></span> <span data-ttu-id="52d1d-209">A frequência do trabalho em lotes deve ser alinhada à frequência de sincronização da ordem de venda.</span><span class="sxs-lookup"><span data-stu-id="52d1d-209">The frequency of the batch job should be aligned with the frequency of sales order synchronization.</span></span>

<span data-ttu-id="52d1d-210">Se você também usa a integração da ordem de trabalho, você precisa configurar a origem de venda.</span><span class="sxs-lookup"><span data-stu-id="52d1d-210">If you also use work order integration, you need to set up the sales origin.</span></span> <span data-ttu-id="52d1d-211">A origem de venda é usada para diferenciar as ordens de venda no Supply Chain Management criadas com base em ordens de serviço no Field Service.</span><span class="sxs-lookup"><span data-stu-id="52d1d-211">The sales origin is used to distinguish sales orders in Supply Chain Management that were created from work orders in Field Service.</span></span> <span data-ttu-id="52d1d-212">Quando uma ordem de venda tiver uma origem de venda do tipo **Integração de ordem de trabalho**, o campo **Status de ordens de trabalho externas** será exibido no cabeçalho da ordem de venda.</span><span class="sxs-lookup"><span data-stu-id="52d1d-212">When a sales order has a sales origin of the **Work order integration** type, the **External work order status** field appears on the sales order header.</span></span> <span data-ttu-id="52d1d-213">Além disso, a origem de venda garante que as ordens de venda criadas com base em ordens de serviço no Field Service sejam filtradas durante a sincronização da ordem de venda do Supply Chain Management para o Field Service.</span><span class="sxs-lookup"><span data-stu-id="52d1d-213">Additionally, the sales origin ensures that sales orders that were created from work orders in Field Service are filtered out during sales order synchronization from Supply Chain Management to Field Service.</span></span>

1. <span data-ttu-id="52d1d-214">Acesse **Vendas e marketing** \> **Configurar** \> **Ordens de venda** \> **Origem de venda**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-214">Go to **Sales and marketing** \> **Setup** \> **Sales orders** \> **Sales origin**.</span></span>
2. <span data-ttu-id="52d1d-215">Selecione **Nova** para criar uma nova origem de venda.</span><span class="sxs-lookup"><span data-stu-id="52d1d-215">Select **New** to create a new sales origin.</span></span>
3. <span data-ttu-id="52d1d-216">No campo **Origem de venda**, insira um nome para a origem de venda, como **SalesOrder**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-216">In the **Sales origin** field, enter a name for the sales origin, such as **SalesOrder**.</span></span>
4. <span data-ttu-id="52d1d-217">No campo **Descrição** insira uma descrição, como **Ordem de vendas a partir de Vendas**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-217">In the **Description** field, enter a description, such as **Sales Order from Sales**.</span></span>
5. <span data-ttu-id="52d1d-218">Marque a caixa de seleção **Atribuição do tipo de origem** .</span><span class="sxs-lookup"><span data-stu-id="52d1d-218">Select the **Origin type assignment** check box.</span></span>
6. <span data-ttu-id="52d1d-219">Defina o campo **Tipo de origem de vendas** como **Integração da ordem de vendas**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-219">Set the **Sales origin type** field to **Sales order integration**.</span></span>
7. <span data-ttu-id="52d1d-220">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-220">Select **Save**.</span></span>

### <a name="setup-in-the-sales-orders-sales-to-supply-chain-management---direct-data-integration-project"></a><span data-ttu-id="52d1d-221">Configuração nas Ordens de Venda (Sales para Supply Chain Management) - Projeto de integração de dados direta</span><span class="sxs-lookup"><span data-stu-id="52d1d-221">Setup in the Sales Orders (Sales to Supply Chain Management) - Direct Data integration project</span></span>

- <span data-ttu-id="52d1d-222">Verifique se o mapeamento exigido existe para **Shipto\_country** para **DeliveryAddressCountryRegionISOCode**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-222">Make sure that the required mapping exists for **Shipto\_country** to **DeliveryAddressCountryRegionISOCode**.</span></span> <span data-ttu-id="52d1d-223">Você pode tornar em branco um padrão no mapa de valores para não precisar digitar o país de ordens nacionais.</span><span class="sxs-lookup"><span data-stu-id="52d1d-223">You can make blank a default value in the value map to avoid having to type country for national orders.</span></span> <span data-ttu-id="52d1d-224">Defina o lado esquerdo como 'Embranco', e o lado direito com o país ou a região desejada.</span><span class="sxs-lookup"><span data-stu-id="52d1d-224">Set the left side to 'Blank', and set the right side to the desired country or region.</span></span>

    <span data-ttu-id="52d1d-225">O valor do modelo é um mapa de valores em que vários países ou regiões são mapeados, e onde 'Em branco' = EUA.</span><span class="sxs-lookup"><span data-stu-id="52d1d-225">The template value is a value map where several countries or regions are mapped, and where 'Blank' = US.</span></span>

### <a name="setup-in-the-sales-orders-supply-chain-management-to-sales---direct-data-integration-project"></a><span data-ttu-id="52d1d-226">Configuração nas Ordens de Venda (Supply Chain Management para Sales) - Projeto de integração de dados direta</span><span class="sxs-lookup"><span data-stu-id="52d1d-226">Setup in the Sales Orders (Supply Chain Management to Sales) - Direct Data integration project</span></span>

#### <a name="salesheader-task"></a><span data-ttu-id="52d1d-227">Tarefa de SalesHeader</span><span class="sxs-lookup"><span data-stu-id="52d1d-227">SalesHeader task</span></span>

- <span data-ttu-id="52d1d-228">Uma lista de preços é necessária para criar ordens no Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-228">A price list is required in order to create orders in Sales.</span></span> <span data-ttu-id="52d1d-229">Atualize o mapa de valores para **pricelevelid.name \[Price List Name\]** para a lista de preços que é usada no Sales por moeda.</span><span class="sxs-lookup"><span data-stu-id="52d1d-229">Update the value map for **pricelevelid.name \[Price List Name\]** to the price list that is used in Sales per currency.</span></span> <span data-ttu-id="52d1d-230">Você pode usar a lista de preços padrão para uma única moeda.</span><span class="sxs-lookup"><span data-stu-id="52d1d-230">You can use the default price list for a single currency.</span></span> <span data-ttu-id="52d1d-231">Caso existam listas de preços em várias moedas, você poderá usar um mapa de valores.</span><span class="sxs-lookup"><span data-stu-id="52d1d-231">Alternatively, if you have price lists in multiple currencies, you can use a value map.</span></span>

    <span data-ttu-id="52d1d-232">O valor do modelo padrão para **pricelevelid.name \[Price List Name\]** é **CRM Service USA (sample)**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-232">The default template value for **pricelevelid.name \[Price List Name\]** is **CRM Service USA (sample)**.</span></span>

#### <a name="salesline-task"></a><span data-ttu-id="52d1d-233">Tarefa de SalesLine</span><span class="sxs-lookup"><span data-stu-id="52d1d-233">SalesLine task</span></span>

- <span data-ttu-id="52d1d-234">Verifique se existe o mapa de valores necessário para **SalesUnitSymbol** no Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="52d1d-234">Make sure that the required value map for **SalesUnitSymbol** in Supply Chain Management exists.</span></span>
- <span data-ttu-id="52d1d-235">Verifique se as unidades necessários estão definidas no Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-235">Make sure that the required units are defined in Sales.</span></span>

    <span data-ttu-id="52d1d-236">Um valor do modelo que tem um mapa de valores é definido para o **SalesUnitSymbol** para **oumid.name**.</span><span class="sxs-lookup"><span data-stu-id="52d1d-236">A template value that has a value map is defined for **SalesUnitSymbol** to **oumid.name**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="52d1d-237">Mapeamento de modelo na Integração de dados</span><span class="sxs-lookup"><span data-stu-id="52d1d-237">Template mapping in Data integration</span></span>

> [!NOTE]
> <span data-ttu-id="52d1d-238">Os campos **Termos de pagamento**, **Condições de frete**, **Condições de entrega**, **Método de entrega** e **Modo de entrega** não estão incluídos no mapeamento padrão.</span><span class="sxs-lookup"><span data-stu-id="52d1d-238">The **Payment terms**, **Freight terms**, **Delivery terms**, **Shipping method**, and **Delivery mode** fields aren't part of the default mappings.</span></span> <span data-ttu-id="52d1d-239">Para mapear esses campos, é necessário configurar um mapeamento de valor que é específico para os dados nas organizações às quais a entidade está sincronizada.</span><span class="sxs-lookup"><span data-stu-id="52d1d-239">To map these fields, you must set up a value mapping that is specific to the data in the organizations that the entity is synchronized between.</span></span>

<span data-ttu-id="52d1d-240">As ilustrações a seguir mostram um exemplo de um mapeamento de modelo na Integração de dados.</span><span class="sxs-lookup"><span data-stu-id="52d1d-240">The following illustrations show an example of a template mapping in Data integration.</span></span>

> [!NOTE]
> <span data-ttu-id="52d1d-241">O mapeamento mostra quais informações de campo serão sincronizadas do Sales para o Supply Chain Management ou do Supply Chain Management para o Sales.</span><span class="sxs-lookup"><span data-stu-id="52d1d-241">The mapping shows which field information will be synchronized from Sales to Supply Chain Management, or from Supply Chain Management to Sales.</span></span>

### <a name="sales-orders-supply-chain-management-to-sales---direct-orderheader"></a><span data-ttu-id="52d1d-242">Ordens de Venda (Supply Chain Management para Sales) – Direto: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="52d1d-242">Sales Orders (Supply Chain Management to Sales) - Direct: OrderHeader</span></span>

<span data-ttu-id="52d1d-243">[![Mapeamento de modelo na Integração de dados](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span><span class="sxs-lookup"><span data-stu-id="52d1d-243">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span></span>

### <a name="sales-orders-supply-chain-management-to-sales---direct-orderline"></a><span data-ttu-id="52d1d-244">Ordens de Venda (Supply Chain Management para Sales) – Direto: OrderLine</span><span class="sxs-lookup"><span data-stu-id="52d1d-244">Sales Orders (Supply Chain Management to Sales) - Direct: OrderLine</span></span>

<span data-ttu-id="52d1d-245">[![Mapeamento de modelo na integração de dados](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span><span class="sxs-lookup"><span data-stu-id="52d1d-245">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span></span>

### <a name="sales-orders-sales-to-supply-chain-management---direct-orderheader"></a><span data-ttu-id="52d1d-246">Ordens de Venda (Sales para Supply Chain Management) – Direto: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="52d1d-246">Sales Orders (Sales to Supply Chain Management) - Direct: OrderHeader</span></span>

<span data-ttu-id="52d1d-247">[![Mapeamento de modelo na integração de dados](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span><span class="sxs-lookup"><span data-stu-id="52d1d-247">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span></span>

### <a name="sales-orders-sales-to-supply-chain-management---direct-orderline"></a><span data-ttu-id="52d1d-248">Ordens de Venda (Sales para Supply Chain Management) – Direto: OrderLine</span><span class="sxs-lookup"><span data-stu-id="52d1d-248">Sales Orders (Sales to Supply Chain Management) - Direct: OrderLine</span></span>

<span data-ttu-id="52d1d-249">[![Mapeamento de modelo na integração de dados](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span><span class="sxs-lookup"><span data-stu-id="52d1d-249">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span></span>

## <a name="related-topics"></a><span data-ttu-id="52d1d-250">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="52d1d-250">Related topics</span></span>

[<span data-ttu-id="52d1d-251">Cliente potencial ao pagamento à vista</span><span class="sxs-lookup"><span data-stu-id="52d1d-251">Prospect to cash</span></span>](prospect-to-cash.md)
