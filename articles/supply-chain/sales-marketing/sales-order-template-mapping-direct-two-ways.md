---
title: Sincronização de ordens de venda diretamente entre o Sales e o Finance and Operations
description: O tópico discute os modelos e as tarefas subjacentes que são usados para executar a sincronização de ordens de venda diretamente entre o Microsoft Dynamics 365 for Sales e o Microsoft Dynamics 365 for Finance and Operations.
author: ChristianRytt
manager: AnnBe
ms.date: 10/11/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: 985a5a908308bc2268b80e8eef7117fdd6d54af6
ms.sourcegitcommit: 0f530e5f72a40f383868957a6b5cb0e446e4c795
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/29/2019
ms.locfileid: "339110"
---
# <a name="synchronization-of-sales-orders-directly-between-sales-and-finance-and-operations"></a><span data-ttu-id="2df6d-103">Sincronização de ordens de venda diretamente entre o Sales e o Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="2df6d-103">Synchronization of sales orders directly between Sales and Finance and Operations</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="2df6d-104">O tópico discute os modelos e as tarefas subjacentes que são usados para executar a sincronização de ordens de venda diretamente entre o Microsoft Dynamics 365 for Sales e o Microsoft Dynamics 365 for Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-104">The topic discusses the templates and underlying tasks that are used to run synchronization of sales orders directly between Microsoft Dynamics 365 for Sales and Microsoft Dynamics 365 for Finance and Operations.</span></span>

## <a name="data-flow-in-prospect-to-cash"></a><span data-ttu-id="2df6d-105">Fluxo de dados no Prospect to cash</span><span class="sxs-lookup"><span data-stu-id="2df6d-105">Data flow in Prospect to cash</span></span>

<span data-ttu-id="2df6d-106">A solução Prospect to cash usa o recurso de integração de dados sincronizar dados nas instâncias do Finance and Operations e do Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-106">The Prospect to cash solution uses the Data integration feature to synchronize data across instances of Finance and Operations and Sales.</span></span> <span data-ttu-id="2df6d-107">Os modelos Prospect to cash que estão disponíveis com o recurso Integração de Dados permitem o fluxo de dados para contas, contatos, produtos, cotações de vendas, ordens de venda e faturas de vendas entre o Finance and Operations e o Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-107">The Prospect to cash templates that are available with the Data integration feature enable the flow of data for accounts, contacts, products, sales quotations, sales orders, and sales invoices between Finance and Operations and Sales.</span></span> <span data-ttu-id="2df6d-108">A ilustração a seguir mostra como os dados são sincronizados entre o Finance and Operations e o Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-108">The following illustration shows how the data is synchronized between Finance and Operations and Sales.</span></span>

<span data-ttu-id="2df6d-109">[![Fluxo de dados em Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span><span class="sxs-lookup"><span data-stu-id="2df6d-109">[![Data flow in Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="2df6d-110">Modelos e tarefas</span><span class="sxs-lookup"><span data-stu-id="2df6d-110">Templates and tasks</span></span>

<span data-ttu-id="2df6d-111">Para acessar os modelos disponíveis, abra o [Centro de administração de PowerApps](https://preview.admin.powerapps.com/dataintegration).</span><span class="sxs-lookup"><span data-stu-id="2df6d-111">To access the available templates, open [PowerApps Admin Center](https://preview.admin.powerapps.com/dataintegration).</span></span> <span data-ttu-id="2df6d-112">Selecione **Projetos** e, no canto superior direito, selecione **Novo projeto** para selecionar modelos públicos.</span><span class="sxs-lookup"><span data-stu-id="2df6d-112">Select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="2df6d-113">Os seguintes modelos e as tarefas subjacentes são usados para executar sincronização de ordens de venda diretamente entre o Sales e o Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="2df6d-113">The following templates and underlying tasks are used to run synchronization of sales orders directly between Sales and Finance and Operations:</span></span>

- <span data-ttu-id="2df6d-114">**Nomes dos modelos na Integração de dados:**</span><span class="sxs-lookup"><span data-stu-id="2df6d-114">**Names of the templates in Data integration:**</span></span> 

    - <span data-ttu-id="2df6d-115">Ordens de venda (Sales para Fin and Ops) – Direto</span><span class="sxs-lookup"><span data-stu-id="2df6d-115">Sales Orders (Sales to Fin and Ops) - Direct</span></span>
    - <span data-ttu-id="2df6d-116">Ordens de venda (Fin and Ops para Sales) – Direto</span><span class="sxs-lookup"><span data-stu-id="2df6d-116">Sales Orders (Fin and Ops to Sales) - Direct</span></span>

- <span data-ttu-id="2df6d-117">**Nomes das tarefas no projeto de Integração de dados:**</span><span class="sxs-lookup"><span data-stu-id="2df6d-117">**Names of the tasks in the Data integration project:**</span></span>

    - <span data-ttu-id="2df6d-118">OrderHeader</span><span class="sxs-lookup"><span data-stu-id="2df6d-118">OrderHeader</span></span>
    - <span data-ttu-id="2df6d-119">OrderLine</span><span class="sxs-lookup"><span data-stu-id="2df6d-119">OrderLine</span></span>

<span data-ttu-id="2df6d-120">As seguintes tarefas de sincronização são obrigatórias para que a sincronização de cabeçalhos e linhas de fatura de venda possa ocorrer:</span><span class="sxs-lookup"><span data-stu-id="2df6d-120">The following synchronization tasks are required before synchronization of sales invoice headers and lines can occur:</span></span>

- <span data-ttu-id="2df6d-121">Produtos (Fin and Ops para Sales) – Direto</span><span class="sxs-lookup"><span data-stu-id="2df6d-121">Products (Fin and Ops to Sales) - Direct</span></span>
- <span data-ttu-id="2df6d-122">Contas (Sales para Fin and Ops) - Direto (se usado)</span><span class="sxs-lookup"><span data-stu-id="2df6d-122">Accounts (Sales to Fin and Ops) - Direct (if used)</span></span>
- <span data-ttu-id="2df6d-123">Contatos para Clientes (Sales para Fin and Ops) – Direto (se usados)</span><span class="sxs-lookup"><span data-stu-id="2df6d-123">Contacts to Customers (Sales to Fin and Ops) - Direct (if used)</span></span>

## <a name="entity-set"></a><span data-ttu-id="2df6d-124">Conjunto de entidades</span><span class="sxs-lookup"><span data-stu-id="2df6d-124">Entity set</span></span>

| <span data-ttu-id="2df6d-125">Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="2df6d-125">Finance and Operations</span></span>  | <span data-ttu-id="2df6d-126">Vendas</span><span class="sxs-lookup"><span data-stu-id="2df6d-126">Sales</span></span>             |
|-------------------------|-------------------|
| <span data-ttu-id="2df6d-127">Cabeçalhos de ordens de venda CDS</span><span class="sxs-lookup"><span data-stu-id="2df6d-127">CDS sales order headers</span></span> | <span data-ttu-id="2df6d-128">SalesOrders</span><span class="sxs-lookup"><span data-stu-id="2df6d-128">SalesOrders</span></span>       |
| <span data-ttu-id="2df6d-129">Linhas de ordem de venda do CDS</span><span class="sxs-lookup"><span data-stu-id="2df6d-129">CDS sales order lines</span></span>   | <span data-ttu-id="2df6d-130">SalesOrderDetails</span><span class="sxs-lookup"><span data-stu-id="2df6d-130">SalesOrderDetails</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="2df6d-131">Fluxo de entidades</span><span class="sxs-lookup"><span data-stu-id="2df6d-131">Entity flow</span></span>

<span data-ttu-id="2df6d-132">As ordens de venda são criadas no Sales e sincronizadas para o Finance and Operations quando **Executar projeto** é disparado para um projeto com base no modelo de **Ordens de venda (Sales para Fin and Ops) – Direto**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-132">Sales orders are created in Sales and synchronized to Finance and Operations when **Run project** is triggered for a project based on the **Sales Orders (Sales to Fin and Ops) - Direct** template.</span></span> <span data-ttu-id="2df6d-133">Você só pode ativar e sincronizar ordens do Sales se todos os **Produtos do Pedido** consistem em produtos que são mantidos externamente.</span><span class="sxs-lookup"><span data-stu-id="2df6d-133">You can only activate and synchronize orders from Sales if all **Order Products** consist of products that are externally maintained.</span></span> <span data-ttu-id="2df6d-134">Portanto, não pode haver nenhum produto inserido.</span><span class="sxs-lookup"><span data-stu-id="2df6d-134">Therefore, there can be no write-in products.</span></span> <span data-ttu-id="2df6d-135">Depois que a ordem é ativada, a ordem de venda se torna somente leitura na interface de usuário (IU).</span><span class="sxs-lookup"><span data-stu-id="2df6d-135">After the order is activated, the sales order becomes read-only in the user interface (UI).</span></span> <span data-ttu-id="2df6d-136">Nesse ponto, as atualizações são feitas no Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-136">At that point, the updates are made from Finance and Operations.</span></span> <span data-ttu-id="2df6d-137">Depois que a ordem de venda tem um status **Confirmado**, um projeto baseado no modelo **Ordens de Venda (Fin and Ops para Sales) - Direto** pode ser usado para sincronizar atualizações ou o status de atendimento do Finance and Operations para o Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-137">After the sales order has a status of **Confirmed**, the a project based on the **Sales Orders (Fin and Ops to Sales) - Direct** template can be used to synchronize updates or fulfillment status from Finance and Operations to Sales.</span></span>

<span data-ttu-id="2df6d-138">Você não precisa criar ordens no Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-138">You don't have to create orders in Sales.</span></span> <span data-ttu-id="2df6d-139">Você pode criar novas ordens de venda no Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-139">You can create new sales orders in Finance and Operations instead.</span></span> <span data-ttu-id="2df6d-140">Depois que uma ordem de venda tem um status **Confirmado**, ela é sincronizada com o Sales conforme descrito no parágrafo anterior.</span><span class="sxs-lookup"><span data-stu-id="2df6d-140">After a sales order has a status of **Confirmed**, it's synchronized to Sales as described in the previous paragraph.</span></span>

<span data-ttu-id="2df6d-141">No Finance and Operations, os filtros no modelo ajudam a garantir que somente as ordens de venda relevantes sejam incluídas na sincronização:</span><span class="sxs-lookup"><span data-stu-id="2df6d-141">In Finance and operations, filters in the template help guarantee that only the relevant sales orders are included in the synchronization:</span></span>

- <span data-ttu-id="2df6d-142">Na ordem de venda, a solicitação e o faturamento do cliente precisam ter origem no Sales para serem incluídos na sincronização.</span><span class="sxs-lookup"><span data-stu-id="2df6d-142">On the sales order, both the ordering customer and the invoicing customer have to originate from Sales to be included in the synchronization.</span></span> <span data-ttu-id="2df6d-143">No Finance and Operations, os campos **OrderingCustomerIsExternallyMaintained** e **InvoiceCustomerIsExternallyMaintained** são usados para filtrar ordens de venda das entidades de dados.</span><span class="sxs-lookup"><span data-stu-id="2df6d-143">In Finance and Operations, the **OrderingCustomerIsExternallyMaintained** and **InvoiceCustomerIsExternallyMaintained** fields are used to filter sales orders from the data entities.</span></span>
- <span data-ttu-id="2df6d-144">A ordem de venda no Finance and Operations deve ser confirmada.</span><span class="sxs-lookup"><span data-stu-id="2df6d-144">The sales order in Finance and Operations must be confirmed.</span></span> <span data-ttu-id="2df6d-145">Somente ordens de venda confirmadas ou ordens de venda com status de processamento superior, como **Enviado** ou **Faturado** são sincronizadas com o Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-145">Only confirmed sales orders or sales orders that have a higher processing status, such as **Shipped** or **Invoiced**, are synchronized to Sales.</span></span>
- <span data-ttu-id="2df6d-146">Após uma ordem de venda ser criada ou modificada, o trabalho em lotes **Calcular totais de vendas** no Finance and Operations deve ser executado.</span><span class="sxs-lookup"><span data-stu-id="2df6d-146">After a sales order is created or modified, the **Calculate sales totals** batch job in Finance and Operations must be run.</span></span> <span data-ttu-id="2df6d-147">Somente as ordens de venda em que os totais de vendas são calculados serão sincronizadas para o Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-147">Only sales orders where sales totals are calculated will be synchronized to Sales.</span></span>

## <a name="freight-tax"></a><span data-ttu-id="2df6d-148">Taxa de frete</span><span class="sxs-lookup"><span data-stu-id="2df6d-148">Freight tax</span></span>

<span data-ttu-id="2df6d-149">O Sales não dá suporte a impostos em nível de cabeçalho, pois os impostos são armazenados em nível de linha.</span><span class="sxs-lookup"><span data-stu-id="2df6d-149">Sales doesn't support tax at the header level, because tax is stored at the line level.</span></span> <span data-ttu-id="2df6d-150">Para dar suporte a impostos em nível de cabeçalho no Finance and Operations, como imposto sobre frete, o sistema sincroniza impostos para o Sales como um produto inserido que é chamado de **Taxa de Imposto sobre Frete**, e que tem o valor de imposto do Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-150">To support tax at the header level from Finance and Operations, such as tax on freight, the system synchronizes tax to Sales as a write-in product that is named **Freight Tax**, and that has the tax amount from Finance and Operations.</span></span> <span data-ttu-id="2df6d-151">Dessa forma, o cálculo de preços padrão no Sales pode ser usado para totais, mesmo quando há um imposto em nível de cabeçalho do Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-151">In this way, the standard price calculation in Sales can be used for totals, even when there is tax at the header level from Finance and Operations.</span></span>

## <a name="discount-calculation-and-rounding"></a><span data-ttu-id="2df6d-152">Cálculo de desconto e arredondamento</span><span class="sxs-lookup"><span data-stu-id="2df6d-152">Discount calculation and rounding</span></span>

<span data-ttu-id="2df6d-153">O modelo de cálculo de desconto no Sales difere do modelo de cálculo de desconto no Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-153">The discount calculation model in Sales differs from the discount calculation model in Finance and Operations.</span></span> <span data-ttu-id="2df6d-154">No Finance and Operations, o valor final de descontos em uma linha de venda pode ser o resultado de uma combinação de valores de desconto e porcentagens de desconto.</span><span class="sxs-lookup"><span data-stu-id="2df6d-154">In Finance and Operations, the final discount amount on a sales line can be the result of a combination of discount amounts and discount percentages.</span></span> <span data-ttu-id="2df6d-155">Se este valor final de descontos for dividido pela quantidade na linha, poderá haver um arredondamento.</span><span class="sxs-lookup"><span data-stu-id="2df6d-155">If this final discount amount is divided by the quantity on the line, rounding can occur.</span></span> <span data-ttu-id="2df6d-156">No entanto, esse arredondamento não é considerado se um valor de desconto por unidade arredondado é sincronizado para o Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-156">However, this rounding isn't considered if a rounded per-unit discount amount is synchronized to Sales.</span></span> <span data-ttu-id="2df6d-157">Para ajudar a garantir que o valor total do desconto da linha de venda no Finance and Operations seja sincronizado corretamente para o Sales, o valor total deve ser sincronizado sem ser dividido pela quantidade da linha.</span><span class="sxs-lookup"><span data-stu-id="2df6d-157">To help guarantee that the full discount amount from a sales line in Finance and Operations is correctly synchronized to Sales, the full amount must be synchronized without being divided by the line quantity.</span></span> <span data-ttu-id="2df6d-158">Portanto, você deve definir o **Método de cálculo de desconto** como **Item de linha** no Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-158">Therefore, you must define the **Discount calculation method** as **Line item** in Sales.</span></span>

<span data-ttu-id="2df6d-159">Quando uma linha de ordem de venda for sincronizada do Sales para o Finance and Operations, o valor de desconto de linha total será usado.</span><span class="sxs-lookup"><span data-stu-id="2df6d-159">When a sales order line is synchronized from Sales to Finance and Operations, the full line discount amount is used.</span></span> <span data-ttu-id="2df6d-160">Como o Finance and Operations não tem campos que possam armazenar o valor total de desconto para uma linha, o valor é dividido pela quantidade e armazenado no campo **Desconto de linha**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-160">Because Finance and Operations has no field that can store the full discount amount for a line, the amount is divided by the quantity and stored in the **Line discount** field.</span></span> <span data-ttu-id="2df6d-161">Qualquer arredondamento que ocorrer nesta divisão será armazenado no campo **Encargos de venda** na linha de venda.</span><span class="sxs-lookup"><span data-stu-id="2df6d-161">Any rounding that occurs in this division is stored in the **Sales charges** field on the sales line.</span></span>

### <a name="example"></a><span data-ttu-id="2df6d-162">Exemplo</span><span class="sxs-lookup"><span data-stu-id="2df6d-162">Example</span></span>

<span data-ttu-id="2df6d-163">**Sincronização do Sales para o Finance and Operations**</span><span class="sxs-lookup"><span data-stu-id="2df6d-163">**Synchronization from Sales to Finance and Operations**</span></span>

- <span data-ttu-id="2df6d-164">**Vendas:** Quantidade = 3, desconto por linha = $ 10,00</span><span class="sxs-lookup"><span data-stu-id="2df6d-164">**Sales:** Quantity = 3, per-line discount = $10.00</span></span>
- <span data-ttu-id="2df6d-165">**Finance and Operations:** Quantidade = 3, valor de desconto de linha = $ 3,33, encargos de vendas = -$ 0,01</span><span class="sxs-lookup"><span data-stu-id="2df6d-165">**Finance and Operations:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span> 

<span data-ttu-id="2df6d-166">**Sincronização do Finance and Operations para o Sales**</span><span class="sxs-lookup"><span data-stu-id="2df6d-166">**Synchronization from Finance and Operations to Sales**</span></span>

- <span data-ttu-id="2df6d-167">**Finance and Operations:** Quantidade = 3, valor de desconto de linha = $ 3,33, encargos de vendas = -$ 0,01</span><span class="sxs-lookup"><span data-stu-id="2df6d-167">**Finance and Operations:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span>
- <span data-ttu-id="2df6d-168">**Vendas:** Quantidade = 3, desconto por linha = (3 × $ 3,33) + $ 0,01 = $ 10,00</span><span class="sxs-lookup"><span data-stu-id="2df6d-168">**Sales:** Quantity = 3, per-line discount = (3 × $3.33) + $0.01 = $10.00</span></span>

## <a name="prospect-to-cash-solution-for-sales"></a><span data-ttu-id="2df6d-169">Solução Prospect to cash para o Sales</span><span class="sxs-lookup"><span data-stu-id="2df6d-169">Prospect to cash solution for Sales</span></span>

<span data-ttu-id="2df6d-170">Novos campos foram adicionados à entidade **Ordem** e são exibidos na página:</span><span class="sxs-lookup"><span data-stu-id="2df6d-170">New fields have been added to the **Order** entity and appear on the page:</span></span>

- <span data-ttu-id="2df6d-171">**É mantido externamente** – Defina esta opção como **Sim** quando a ordem for proveniente do Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-171">**Is Maintained Externally** – Set this option to **Yes** when the order is coming from Finance and Operations.</span></span>
- <span data-ttu-id="2df6d-172">**Status de processamento** – Este campo mostra o status de processamento da ordem no Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-172">**Processing status** – This field shows the processing status of the order in Finance and Operations.</span></span> <span data-ttu-id="2df6d-173">Os valores a seguir estão disponíveis:</span><span class="sxs-lookup"><span data-stu-id="2df6d-173">The following values are available:</span></span>

    - <span data-ttu-id="2df6d-174">**Rascunho** – O status inicial quando uma ordem é criada no Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-174">**Draft** – The initial status when an order is created in Sales.</span></span> <span data-ttu-id="2df6d-175">No Sales, só podem ser editadas ordens com este status de processamento.</span><span class="sxs-lookup"><span data-stu-id="2df6d-175">In Sales, only orders with this processing status can be edited.</span></span>
    - <span data-ttu-id="2df6d-176">**Ativo** – O status depois que a ordem é ativada no Sales usando o botão **Ativar**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-176">**Active** – The status after the order is activated in Sales by using the **Activate** button.</span></span>
    - <span data-ttu-id="2df6d-177">**Confirmado**</span><span class="sxs-lookup"><span data-stu-id="2df6d-177">**Confirmed**</span></span>
    - <span data-ttu-id="2df6d-178">**Guia de remessa**</span><span class="sxs-lookup"><span data-stu-id="2df6d-178">**Packing Slip**</span></span>
    - <span data-ttu-id="2df6d-179">**Faturado**</span><span class="sxs-lookup"><span data-stu-id="2df6d-179">**Invoiced**</span></span>
    - <span data-ttu-id="2df6d-180">**Separado**</span><span class="sxs-lookup"><span data-stu-id="2df6d-180">**Picked**</span></span>
    - <span data-ttu-id="2df6d-181">**Parcialmente separada**</span><span class="sxs-lookup"><span data-stu-id="2df6d-181">**Partially Picked**</span></span>
    - <span data-ttu-id="2df6d-182">**Parcialmente embalada**</span><span class="sxs-lookup"><span data-stu-id="2df6d-182">**Partially Packed**</span></span>
    - <span data-ttu-id="2df6d-183">**Remetido**</span><span class="sxs-lookup"><span data-stu-id="2df6d-183">**Shipped**</span></span>
    - <span data-ttu-id="2df6d-184">**Parcialmente remetida**</span><span class="sxs-lookup"><span data-stu-id="2df6d-184">**Partially Shipped**</span></span>
    - <span data-ttu-id="2df6d-185">**Parcialmente faturada**</span><span class="sxs-lookup"><span data-stu-id="2df6d-185">**Partially Invoiced**</span></span>
    - <span data-ttu-id="2df6d-186">**Cancelado**</span><span class="sxs-lookup"><span data-stu-id="2df6d-186">**Cancelled**</span></span>

<span data-ttu-id="2df6d-187">A configuração **Tem Somente Produtos Mantidos Externamente** é usada durante a ativação da ordem para rastrear, de forma consistente, se a ordem de venda consiste inteiramente em produtos mantidos externamente.</span><span class="sxs-lookup"><span data-stu-id="2df6d-187">The **Has Externally Maintained Products Only** setting is used during order activation to consistently track whether a sales order consists entirely of externally maintained products.</span></span> <span data-ttu-id="2df6d-188">Se uma ordem de venda consiste inteiramente em produtos mantidos externamente, os produtos são mantidos no Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-188">If a sales order consists entirely of externally maintained products, the products are maintained in Finance and Operations.</span></span> <span data-ttu-id="2df6d-189">Esta configuração ajuda a garantir que você não ative e tente sincronizar linhas de ordem de venda com produtos que sejam desconhecidos para o Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-189">This setting helps guarantee that you don't activate and try to synchronize sales order lines that have products that are unknown to Finance and Operations.</span></span>

<span data-ttu-id="2df6d-190">Os botões **Criar fatura**, **Cancelar Ordem**, **Recalcular**, **Obter Produtos** e **Procurar Endereço** na página **Ordem de venda** são ocultos para ordens mantidas externamente, pois as faturas serão criadas no Finance and Operations e sincronizadas para o Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-190">The **Create Invoice**, **Cancel Order**, **Recalculate**, **Get Products**, and **Lookup Address** buttons on the **Sales order** page are hidden for externally maintained orders, because invoices will be created in Finance and Operations and synchronized to Sales.</span></span> <span data-ttu-id="2df6d-191">Essas ordens não podem ser editadas, pois as informações da ordem de venda serão sincronizadas do Finance and Operations após a ativação.</span><span class="sxs-lookup"><span data-stu-id="2df6d-191">These orders can't be edited, because sales order information will be synchronized from Finance and Operations after activation.</span></span>

<span data-ttu-id="2df6d-192">O status da ordem de venda permanecerá **Ativo** para ajudar a garantir que as alterações do Finance and Operations possam fluir para a ordem de venda do Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-192">The sales order status will remain **Active** to help guarantee that changes from Finance and Operations can flow to the sales order in Sales.</span></span> <span data-ttu-id="2df6d-193">Para controlar este comportamento, defina o padrão do valor **Statecode \[Status\]** para **Ativo** no Projeto de integração de dados.</span><span class="sxs-lookup"><span data-stu-id="2df6d-193">To control this behavior, set the default **Statecode \[Status\]** value to **Active** in the Data integration project.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="2df6d-194">Precondições e configuração de mapeamento</span><span class="sxs-lookup"><span data-stu-id="2df6d-194">Preconditions and mapping setup</span></span>

<span data-ttu-id="2df6d-195">Antes de sincronizar ordens de venda, é importante atualizar as configurações a seguir nos sistemas.</span><span class="sxs-lookup"><span data-stu-id="2df6d-195">Before you synchronize sales orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-sales"></a><span data-ttu-id="2df6d-196">Configuração no Sales</span><span class="sxs-lookup"><span data-stu-id="2df6d-196">Setup in Sales</span></span>

- <span data-ttu-id="2df6d-197">Verifique se as permissões estão definidas para a equipe à qual foi atribuído o usuário da conexão do Sales definida.</span><span class="sxs-lookup"><span data-stu-id="2df6d-197">Make sure that permissions are set up for the team that the user from your Sales connection set is assigned to.</span></span> <span data-ttu-id="2df6d-198">Se estiver usando os dados de demonstração, geralmente o usuário tem acesso admin, mas a equipe não tem acesso admin.</span><span class="sxs-lookup"><span data-stu-id="2df6d-198">If you're using demo data, the user usually has admin access, but the team doesn't have admin access.</span></span> <span data-ttu-id="2df6d-199">Se a equipe não tiver acesso de administrador, quando você executar o projeto na Integração de dados, você receberá uma mensagem de erro indicando que a Equipe principal está ausente.</span><span class="sxs-lookup"><span data-stu-id="2df6d-199">If the team doesn't have admin access, when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</span></span>

    <span data-ttu-id="2df6d-200">Vá para **Configurações** &gt; **Segurança** &gt; **Equipes**, selecione a equipe relevante, selecione **Gerenciar Funções** e selecione a função que tem as permissões desejadas, como **Administrador do Sistema**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-200">Go to **Settings** &gt; **Security** &gt; **Teams**, select the relevant team, select **Manage Roles**, and select a role that has the desired permissions, such as **System Administrator**.</span></span>

- <span data-ttu-id="2df6d-201">Para assegurar o cálculo correto de descontos no Sales e no Finance and Operations, o **Método de cálculo de desconto** deve ser definido como **Item de linha**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-201">To ensure correct calculation of discounts in both Sales and Finance and Operations **Discount calculation method** must be set to **Line item**.</span></span>
- <span data-ttu-id="2df6d-202">Vá para **Configurações** &gt; **Administração** &gt; **Configurações do sistema** &gt; **Vendas** e certifique-se de que as seguintes configurações sejam usadas:</span><span class="sxs-lookup"><span data-stu-id="2df6d-202">Go to **Settings** &gt; **Administration** &gt; **System settings** &gt; **Sales**, and make sure that the following settings are used:</span></span>

    - <span data-ttu-id="2df6d-203">A opção **Usar sistema de cálculo de precificação do sistema** está definida como **Sim**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-203">The **Use system prizing calculation system** option is set to **Yes**.</span></span>
    - <span data-ttu-id="2df6d-204">O campo **Método de cálculo de desconto** está definido como **Item de linha**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-204">The **Discount calculation method** field is set to **Line item**.</span></span>

### <a name="setup-in-finance-and-operations"></a><span data-ttu-id="2df6d-205">Configuração no Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="2df6d-205">Setup in Finance and Operations</span></span>

- <span data-ttu-id="2df6d-206">Vá para **Vendas e marketing** &gt; **Tarefas periódicas** &gt; **Calcular totais de vendas**, e configure o trabalho para ser executado como um trabalho em lotes.</span><span class="sxs-lookup"><span data-stu-id="2df6d-206">Go to **Sales and marketing** &gt; **Periodic tasks** &gt; **Calculate sales totals**, and set the job to run as a batch job.</span></span> <span data-ttu-id="2df6d-207">Defina a opção **Calcular totais de ordens de venda** como **Sim**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-207">Set the **Calculate totals for sales orders** option to **Yes**.</span></span> <span data-ttu-id="2df6d-208">Esta etapa é importante, pois somente as ordens de venda em que os totais de vendas são calculados serão sincronizadas para o Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-208">This step is important, because only sales orders where sales totals are calculated will be synchronized to Sales.</span></span> <span data-ttu-id="2df6d-209">A frequência do trabalho em lotes deve ser alinhada à frequência de sincronização da ordem de venda.</span><span class="sxs-lookup"><span data-stu-id="2df6d-209">The frequency of the batch job should be aligned with the frequency of sales order synchronization.</span></span>

### <a name="setup-in-the-sales-orders-sales-to-fin-and-ops---direct-data-integration-project"></a><span data-ttu-id="2df6d-210">Configuração de Ordens de venda (Sales para Fin and Ops) - Projeto de integração de dados diretos</span><span class="sxs-lookup"><span data-stu-id="2df6d-210">Setup in the Sales Orders (Sales to Fin and Ops) - Direct Data integration project</span></span>

- <span data-ttu-id="2df6d-211">Verifique se o mapeamento exigido existe para **Shipto\_country** para **DeliveryAddressCountryRegionISOCode**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-211">Make sure that the required mapping exists for **Shipto\_country** to **DeliveryAddressCountryRegionISOCode**.</span></span> <span data-ttu-id="2df6d-212">Você pode tornar em branco um padrão no mapa de valores para não precisar digitar o país de ordens nacionais.</span><span class="sxs-lookup"><span data-stu-id="2df6d-212">You can make blank a default value in the value map to avoid having to type country for national orders.</span></span> <span data-ttu-id="2df6d-213">Defina o lado esquerdo como 'Embranco', e o lado direito com o país ou a região desejada.</span><span class="sxs-lookup"><span data-stu-id="2df6d-213">Set the left side to 'Blank', and set the right side to the desired country or region.</span></span>

    <span data-ttu-id="2df6d-214">O valor do modelo é um mapa de valores em que vários países ou regiões são mapeados, e onde 'Em branco' = EUA.</span><span class="sxs-lookup"><span data-stu-id="2df6d-214">The template value is a value map where several countries or regions are mapped, and where 'Blank' = US.</span></span>

### <a name="setup-in-the-sales-orders-fin-and-ops-to-sales---direct-data-integration-project"></a><span data-ttu-id="2df6d-215">Configuração de Ordens de venda (Fin and Ops para Sales) – Projeto de integração de dados diretos</span><span class="sxs-lookup"><span data-stu-id="2df6d-215">Setup in the Sales Orders (Fin and Ops to Sales) - Direct Data integration project</span></span>

#### <a name="salesheader-task"></a><span data-ttu-id="2df6d-216">Tarefa de SalesHeader</span><span class="sxs-lookup"><span data-stu-id="2df6d-216">SalesHeader task</span></span>

- <span data-ttu-id="2df6d-217">Uma lista de preços é necessária para criar ordens no Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-217">A price list is required in order to create orders in Sales.</span></span> <span data-ttu-id="2df6d-218">Atualize o mapa de valores para **pricelevelid.name \[Price List Name\]** para a lista de preços que é usada no Sales por moeda.</span><span class="sxs-lookup"><span data-stu-id="2df6d-218">Update the value map for **pricelevelid.name \[Price List Name\]** to the price list that is used in Sales per currency.</span></span> <span data-ttu-id="2df6d-219">Você pode usar a lista de preços padrão para uma única moeda.</span><span class="sxs-lookup"><span data-stu-id="2df6d-219">You can use the default price list for a single currency.</span></span> <span data-ttu-id="2df6d-220">Caso existam listas de preços em várias moedas, você poderá usar um mapa de valores.</span><span class="sxs-lookup"><span data-stu-id="2df6d-220">Alternatively, if you have price lists in multiple currencies, you can use a value map.</span></span>

    <span data-ttu-id="2df6d-221">O valor do modelo padrão para **pricelevelid.name \[Price List Name\]** é **CRM Service USA (sample)**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-221">The default template value for **pricelevelid.name \[Price List Name\]** is **CRM Service USA (sample)**.</span></span>

#### <a name="salesline-task"></a><span data-ttu-id="2df6d-222">Tarefa de SalesLine</span><span class="sxs-lookup"><span data-stu-id="2df6d-222">SalesLine task</span></span>

- <span data-ttu-id="2df6d-223">Verifique se existe o mapa de valores necessário para **SalesUnitSymbol** no Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="2df6d-223">Make sure that the required value map for **SalesUnitSymbol** in Finance and Operations exists.</span></span>
- <span data-ttu-id="2df6d-224">Verifique se as unidades necessários estão definidas no Sales.</span><span class="sxs-lookup"><span data-stu-id="2df6d-224">Make sure that the required units are defined in Sales.</span></span>

    <span data-ttu-id="2df6d-225">Um valor do modelo que tem um mapa de valores é definido para o **SalesUnitSymbol** para **oumid.name**.</span><span class="sxs-lookup"><span data-stu-id="2df6d-225">A template value that has a value map is defined for **SalesUnitSymbol** to **oumid.name**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="2df6d-226">Mapeamento de modelo na Integração de dados</span><span class="sxs-lookup"><span data-stu-id="2df6d-226">Template mapping in Data integration</span></span>

> [!NOTE]
> <span data-ttu-id="2df6d-227">Os campos **Termos de pagamento**, **Condições de frete**, **Condições de entrega**, **Método de entrega** e **Modo de entrega** não estão incluídos no mapeamento padrão.</span><span class="sxs-lookup"><span data-stu-id="2df6d-227">The **Payment terms**, **Freight terms**, **Delivery terms**, **Shipping method**, and **Delivery mode** fields aren't part of the default mappings.</span></span> <span data-ttu-id="2df6d-228">Para mapear esses campos, é necessário configurar um mapeamento de valor que é específico para os dados nas organizações às quais a entidade está sincronizada.</span><span class="sxs-lookup"><span data-stu-id="2df6d-228">To map these fields, you must set up a value mapping that is specific to the data in the organizations that the entity is synchronized between.</span></span>

<span data-ttu-id="2df6d-229">As ilustrações a seguir mostram um exemplo de um mapeamento de modelo na Integração de dados.</span><span class="sxs-lookup"><span data-stu-id="2df6d-229">The following illustrations show an example of a template mapping in Data integration.</span></span>

> [!NOTE]
> <span data-ttu-id="2df6d-230">O mapeamento mostra quais informações de campo serão sincronizadas do Sales para o Finance and Operations, ou vice-versa..</span><span class="sxs-lookup"><span data-stu-id="2df6d-230">The mapping shows which field information will be synchronized from Sales to Finance and Operations, or from Finance and Operations to Sales.</span></span>

### <a name="sales-orders-fin-and-ops-to-sales---direct-orderheader"></a><span data-ttu-id="2df6d-231">Ordens de venda (Fin and Ops para Sales) – Direto: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="2df6d-231">Sales Orders (Fin and Ops to Sales) - Direct: OrderHeader</span></span>

<span data-ttu-id="2df6d-232">[![Mapeamento de modelo na Integração de dados](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span><span class="sxs-lookup"><span data-stu-id="2df6d-232">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span></span>

### <a name="sales-orders-fin-and-ops-to-sales---direct-orderline"></a><span data-ttu-id="2df6d-233">Ordens de venda (Fin and Ops para Sales) – Direto: OrderLine</span><span class="sxs-lookup"><span data-stu-id="2df6d-233">Sales Orders (Fin and Ops to Sales) - Direct: OrderLine</span></span>

<span data-ttu-id="2df6d-234">[![Mapeamento de modelo na integração de dados](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span><span class="sxs-lookup"><span data-stu-id="2df6d-234">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span></span>

### <a name="sales-orders-sales-to-fin-and-ops---direct-orderheader"></a><span data-ttu-id="2df6d-235">Ordens de venda (Sales para Fin and Ops) – Direto: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="2df6d-235">Sales Orders (Sales to Fin and Ops) - Direct: OrderHeader</span></span>

<span data-ttu-id="2df6d-236">[![Mapeamento de modelo na integração de dados](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span><span class="sxs-lookup"><span data-stu-id="2df6d-236">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span></span>

### <a name="sales-orders-sales-to-fin-and-ops---direct-orderline"></a><span data-ttu-id="2df6d-237">Ordens de venda (Sales para Fin and Ops) – Direto: OrderLine</span><span class="sxs-lookup"><span data-stu-id="2df6d-237">Sales Orders (Sales to Fin and Ops) - Direct: OrderLine</span></span>

<span data-ttu-id="2df6d-238">[![Mapeamento de modelo na integração de dados](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span><span class="sxs-lookup"><span data-stu-id="2df6d-238">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span></span>

## <a name="related-topics"></a><span data-ttu-id="2df6d-239">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="2df6d-239">Related topics</span></span>

[<span data-ttu-id="2df6d-240">Prospect to cash</span><span class="sxs-lookup"><span data-stu-id="2df6d-240">Prospect to cash</span></span>](prospect-to-cash.md)
