---
title: Arquivo-morto de transações de estoque
description: Este tópico descreve como arquivar dados de transações de estoque para ajudar a melhorar o desempenho do sistema.
author: sherry-zheng
ms.date: 03/01/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: InventTransArchiveProcessForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: chuzheng
ms.search.validFrom: 2021-03-01
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: 8b61e65d3a641a1e3d73192853c832d57ed17401
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/11/2021
ms.locfileid: "6021256"
---
# <a name="archive-inventory-transactions"></a><span data-ttu-id="a9a8b-103">Arquivo-morto de transações de estoque</span><span class="sxs-lookup"><span data-stu-id="a9a8b-103">Archive inventory transactions</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="a9a8b-104">Com o tempo, a tabela de transações de estoque (`InventTrans`) continuará a crescer e consumir mais espaço no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-104">Over time, the inventory transactions table (`InventTrans`) will continue to grow and consume more database space.</span></span> <span data-ttu-id="a9a8b-105">Portanto, as consultas feitas na tabela ficarão mais lentas gradualmente.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-105">Therefore, queries that are made against the table will gradually become slower.</span></span> <span data-ttu-id="a9a8b-106">Este tópico descreve como você pode usar o recurso *Arquivo-morto de transações de estoque* para arquivar dados sobre transações de estoque para ajudar a melhorar o desempenho do sistema.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-106">This topic describes how you can use the *Inventory transactions archive* feature to archive data about inventory transactions to help improve system performance.</span></span>

> [!NOTE]
> <span data-ttu-id="a9a8b-107">Somente as transações de estoque atualizadas financeiramente podem ser arquivadas em um período contábil fechado selecionado.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-107">Only financially updated inventory transactions can be archived in a selected closed ledger period.</span></span> <span data-ttu-id="a9a8b-108">Para serem arquivados, as transações de estoque de saída atualizadas financeiramente devem ter um status de saída de *Vendido*, e as transações de estoque de entrada devem ter um status de recebimento de *Comprado*.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-108">To be archived, financially updated outbound inventory transactions must have an issue status of *Sold*, and inbound inventory transactions must have a receipt status of *Purchased*.</span></span>

<span data-ttu-id="a9a8b-109">Ao arquivar transações de estoque, todas as transações relacionadas são movidas para a tabela `InventTransArchive`.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-109">When you archive inventory transactions, all related transactions are moved to the `InventTransArchive` table.</span></span> <span data-ttu-id="a9a8b-110">As transações de saída de estoque e as transações de recebimento de estoque são arquivadas separadamente, com base na combinação da ID do item (`itemId`) e da ID da dimensão de estoque (`inventDimId`), e são colocadas na saída resumida e nas transações de recebimento resumidas.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-110">Inventory issue transactions and inventory receipt transactions are archived separately, based on the combination of the item ID (`itemId`) and inventory dimension ID (`inventDimId`), and they are put into the summarized issue and summarized receipt transactions.</span></span>

<span data-ttu-id="a9a8b-111">Se uma combinação de `itemId` e `inventDimId` contiver somente uma transação de recebimento ou de saída, a transação não será arquivada.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-111">If an `itemId` and `inventDimId` combination contains only one receipt or issue transaction, the transaction won't be archived.</span></span>

## <a name="turn-on-the-feature-in-your-system"></a><span data-ttu-id="a9a8b-112">Ative o recurso no seu sistema</span><span class="sxs-lookup"><span data-stu-id="a9a8b-112">Turn on the feature in your system</span></span>

<span data-ttu-id="a9a8b-113">Se o sistema ainda não incluir os recursos descritos neste tópico, acesse [Gerenciamento de recursos](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) e ative o recurso *Arquivo-morto de transações de estoque*.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-113">If your system doesn't already include the features that is described in this topic, go to [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Inventory transactions archive* feature.</span></span> <span data-ttu-id="a9a8b-114">Observe que esse recurso não pode ser desabilitado após ter sido habilitado.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-114">Note that this feature cannot be disabled once it has been enabled.</span></span>

## <a name="things-to-consider-before-you-archive-inventory-transactions"></a><span data-ttu-id="a9a8b-115">Itens a serem considerados antes de arquivar transações de estoque</span><span class="sxs-lookup"><span data-stu-id="a9a8b-115">Things to consider before you archive inventory transactions</span></span>

<span data-ttu-id="a9a8b-116">Antes de arquivar transações de estoque, considere os cenários comerciais a seguir, porque eles serão afetados pela operação:</span><span class="sxs-lookup"><span data-stu-id="a9a8b-116">Before you archive inventory transactions, you should consider the following business scenarios, because they will be affected by the operation:</span></span>

- <span data-ttu-id="a9a8b-117">Quando você auditar transações de estoque de documentos relacionados, como linhas de ordem de compra, elas serão mostradas como arquivadas.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-117">When you audit inventory transactions from related documents, such as purchase order lines, they will be shown as archived.</span></span> <span data-ttu-id="a9a8b-118">Para revisar as transações arquivadas, você deve acessar **Gerenciamento de estoque \> Tarefas periódicas \> Limpar \> Arquivo-morto de transações de estoque**.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-118">To review the archived transactions, you must go to **Inventory management \> Periodic tasks \> Clean up \> Inventory transactions archive**.</span></span>
- <span data-ttu-id="a9a8b-119">Não é possível cancelar o fechamento de estoque para períodos arquivados.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-119">Inventory closing can't be canceled for archived periods.</span></span> <span data-ttu-id="a9a8b-120">Antes que possa cancelar um fechamento de estoque, você deve reverter o arquivamento da transação de estoque para o período relevante.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-120">Before you can cancel an inventory closing, you must reverse the inventory transaction archive for the relevant period.</span></span>
- <span data-ttu-id="a9a8b-121">Não é possível fazer a conversão de custo padrão para períodos arquivados.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-121">Standard cost conversion can't be done for archived periods.</span></span> <span data-ttu-id="a9a8b-122">Antes que possa fazer a conversão de custo padrão, você deve reverter o arquivamento da transação de estoque para o período relevante.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-122">Before you can do standard cost conversion, you must reverse the inventory transaction archive for the relevant period.</span></span>
- <span data-ttu-id="a9a8b-123">Os relatórios de estoque que são originados das transações de estoque serão afetados quando você arquivar as transações de estoque.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-123">Inventory reports that are sourced from inventory transactions will be affected when you archive inventory transactions.</span></span> <span data-ttu-id="a9a8b-124">Esses relatórios incluem o relatório de classificação por vencimento do estoque e os relatórios de valor de estoque.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-124">These reports include the inventory aging report and inventory value reports.</span></span>
- <span data-ttu-id="a9a8b-125">As previsões de estoque podem ser afetadas se forem executadas durante o horizonte de tempo dos períodos arquivados.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-125">Inventory forecasts might be affected if they are run during the time horizon of archived periods.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a9a8b-126">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="a9a8b-126">Prerequisites</span></span>

<span data-ttu-id="a9a8b-127">As transações de estoque poderão ser arquivadas somente durante os períodos em que as seguintes condições forem atendidas:</span><span class="sxs-lookup"><span data-stu-id="a9a8b-127">Inventory transactions can be archived only during periods where the following conditions are met:</span></span>

- <span data-ttu-id="a9a8b-128">O período contábil deve estar fechado.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-128">The ledger period must be closed.</span></span>
- <span data-ttu-id="a9a8b-129">O fechamento de estoque deve ser executado na data final do período do arquivamento ou em data posterior.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-129">Inventory closing must be run on or after the to-period date of the archive.</span></span>
- <span data-ttu-id="a9a8b-130">O período deve ser pelo menos um ano antes da data inicial do período do arquivamento.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-130">The period must be at least one year before the from-period date of the archive.</span></span>
- <span data-ttu-id="a9a8b-131">Não deve haver nenhum recálculos de estoque existente.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-131">There must not be any existing inventory recalculations.</span></span>

## <a name="archive-inventory-transactions"></a><span data-ttu-id="a9a8b-132">Arquivo-morto de transações de estoque</span><span class="sxs-lookup"><span data-stu-id="a9a8b-132">Archive inventory transactions</span></span>

<span data-ttu-id="a9a8b-133">Para arquivar as transações de estoque, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="a9a8b-133">To archive inventory transactions, follow these steps.</span></span>

1. <span data-ttu-id="a9a8b-134">Acesse **Gerenciamento de estoque** \> **Tarefas periódicas** \> **Limpar** \> **Arquivo-morto de transação de estoque**.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-134">Go to **Inventory management** \> **Periodic tasks** \> **Clean up** \> **Inventory transaction archive**.</span></span>

    <span data-ttu-id="a9a8b-135">A página **Arquivo-morto de transações de estoque** será exibida e exibirá uma lista de registros de processos arquivados.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-135">The **Inventory transactions archive** page appears and shows a list of archived process records.</span></span>

    <span data-ttu-id="a9a8b-136">![Página Arquivo-morto de transações de estoque](media/archive-inventory-empty.png "Página Arquivo-morto de transações de estoque")</span><span class="sxs-lookup"><span data-stu-id="a9a8b-136">![Inventory transactions archive page](media/archive-inventory-empty.png "Inventory transactions archive page")</span></span>

1. <span data-ttu-id="a9a8b-137">No Painel de Ações, selecione **Arquivo-morto de transações de estoque** para criar um arquivo de transação de estoque.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-137">On the Action Pane, select **Inventory transactions archive** to create an inventory transaction archive.</span></span>
1. <span data-ttu-id="a9a8b-138">Na caixa de diálogo **Arquivo-morto de transações de estoque**, na FastTab **Parâmetros**, defina os seguintes campos:</span><span class="sxs-lookup"><span data-stu-id="a9a8b-138">In the **Inventory transactions archive** dialog box, on the **Parameters** FastTab, set the following fields:</span></span>

    - <span data-ttu-id="a9a8b-139">**Data inicial do período contábil fechado** — selecione a data da transação mais antiga a ser incluída no arquivo morto.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-139">**From date in closed ledger period** – Select the earliest transaction date to include in the archive.</span></span>
    - <span data-ttu-id="a9a8b-140">**Data final do período contábil fechado** — selecione a data da transação mais recente a ser incluída no arquivo morto.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-140">**To date in closed ledger period** – Select the latest transaction date to include in the archive.</span></span>

    <span data-ttu-id="a9a8b-141">![Caixa de diálogo Arquivo-morto de transações de estoque](media/archive-inventory-dates.png "Caixa de diálogo Arquivo-morto de transações de estoque")</span><span class="sxs-lookup"><span data-stu-id="a9a8b-141">![Inventory transactions archive dialog box](media/archive-inventory-dates.png "Inventory transactions archive dialog box")</span></span>

    > [!NOTE]
    > <span data-ttu-id="a9a8b-142">Somente os períodos que atendem aos [pré-requisitos](#prerequisites) estarão disponíveis para seleção.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-142">Only periods that meet the [prerequisites](#prerequisites) will be available for selection.</span></span>

1. <span data-ttu-id="a9a8b-143">Na FastTab **Executar em segundo plano**, configure os detalhes do processamento em lotes conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-143">On the **Run in the background** FastTab, set up batch processing details as you require.</span></span> <span data-ttu-id="a9a8b-144">Siga as etapas usuais para trabalhos em lotes no Microsoft Dynamics 365 Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-144">Follow the usual steps for batch jobs in Microsoft Dynamics 365 Supply Chain Management.</span></span>
1. <span data-ttu-id="a9a8b-145">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-145">Select **OK**.</span></span>
1. <span data-ttu-id="a9a8b-146">Você receberá uma mensagem solicitando que você confirme se deseja continuar.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-146">You receive a message that prompts you to confirm that you want to continue.</span></span> <span data-ttu-id="a9a8b-147">Leia a mensagem com atenção e selecione **Sim** se quiser continuar.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-147">Read the message carefully, and then select **Yes** if you want to continue.</span></span>

    <span data-ttu-id="a9a8b-148">Você receberá uma mensagem indicando que o trabalho de arquivamento de transações de estoque foi adicionado à fila de lotes.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-148">You receive a message that states that your inventory transactions archive job has been added to the batch queue.</span></span> <span data-ttu-id="a9a8b-149">Agora, o trabalho começará a arquivar as transações de estoque do período selecionado.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-149">The job will now start to archive inventory transactions from the selected period.</span></span>

## <a name="view-archived-inventory-transactions"></a><span data-ttu-id="a9a8b-150">Exibir transações de estoque arquivadas</span><span class="sxs-lookup"><span data-stu-id="a9a8b-150">View archived inventory transactions</span></span>

<span data-ttu-id="a9a8b-151">A página **Arquivo-morto de transações de estoque** exibe o histórico completo do arquivamento.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-151">The **Inventory transactions archive** page shows your full archiving history.</span></span> <span data-ttu-id="a9a8b-152">Cada linha na grade mostra informações como a data em que o arquivo foi criado, o usuário que o criou e seu status.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-152">Each row in the grid shows information such as the date when the archive was created, the user who created it, and its status.</span></span>

<span data-ttu-id="a9a8b-153">![Histórico do arquivamento na página Arquivo-morto de transações de estoque](media/archive-inventory-full.png "Histórico do arquivamento na página Arquivo-morto de transações de estoque")</span><span class="sxs-lookup"><span data-stu-id="a9a8b-153">![Archiving history on the Inventory transactions archive page](media/archive-inventory-full.png "Archiving history on the Inventory transactions archive page")</span></span>

<span data-ttu-id="a9a8b-154">Na lista suspensa na parte superior da página, selecione um dos seguintes valores para filtrar os arquivos exibidos na grade:</span><span class="sxs-lookup"><span data-stu-id="a9a8b-154">In the drop-down list at the top of the page select one of the following values to filter the archives that are shown in the grid:</span></span>

- <span data-ttu-id="a9a8b-155">**Ativo** — mostra somente os arquivos ativos, não os arquivos revertidos.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-155">**Active** – Show only active archives, not reversed archives.</span></span>
- <span data-ttu-id="a9a8b-156">**Todos** — mostra todos os arquivos, ativos e revertidos.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-156">**All** – Show all archives, both active and reversed.</span></span>

<span data-ttu-id="a9a8b-157">Para cada arquivo na grade, são fornecidas as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="a9a8b-157">For each archive in the grid, the following information is provided:</span></span>

- <span data-ttu-id="a9a8b-158">**Ativo** — uma marca de seleção indica se o arquivo-morto está ativo.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-158">**Active** – A check mark indicates that the archive is active.</span></span>
- <span data-ttu-id="a9a8b-159">**Data inicial** — a data da transação mais antiga que pode ser incluída no arquivo-morto.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-159">**From date** – The date of the oldest transaction that can be included in the archive.</span></span>
- <span data-ttu-id="a9a8b-160">**Data final** — a data da transação mais recente que pode ser incluída no arquivo-morto.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-160">**To date** – The date of the latest transaction that can be included in the archive.</span></span>
- <span data-ttu-id="a9a8b-161">**Agendado por** — a conta de usuário que criou o arquivo.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-161">**Scheduled by** – The user account that created the archive.</span></span>
- <span data-ttu-id="a9a8b-162">**Executado** — a data de criação do arquivo-morto.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-162">**Executed** – The date when the archive was created.</span></span>
- <span data-ttu-id="a9a8b-163">**Revertido** — uma marca de seleção indica que o arquivo foi revertido.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-163">**Reverse** – A check mark indicates that the archive has been reversed.</span></span>
- <span data-ttu-id="a9a8b-164">**Parar atualização presente** — uma marca de seleção indica que o arquivamento está em andamento, mas que foi pausado.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-164">**Stop current update** – A check mark indicates that the archive is in progress, but it has been paused.</span></span>
- <span data-ttu-id="a9a8b-165">**Estado** — o status de processamento do arquivo-morto.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-165">**State** – The processing status of the archive.</span></span> <span data-ttu-id="a9a8b-166">Os valores possíveis são *Aguardando*, *Em andamento* e *Concluído*.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-166">The possible values are *Waiting*, *In progress*, and *Finished*.</span></span>

<span data-ttu-id="a9a8b-167">A barra de ferramentas acima da grade fornece os seguintes botões que podem ser usados para trabalhar com um arquivo-morto selecionado:</span><span class="sxs-lookup"><span data-stu-id="a9a8b-167">The toolbar above the grid provides the following buttons that you can use to work with a selected archive:</span></span>

- <span data-ttu-id="a9a8b-168">**Transações arquivadas** — exibe os detalhes completos do arquivo-morto selecionado.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-168">**Archived transactions** – View the full details of the selected archive.</span></span> <span data-ttu-id="a9a8b-169">A página **Transações arquivadas** exibida mostra todas as transações no arquivo-morto.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-169">The **Archived transactions** page that appears shows all the transactions in the archive.</span></span>

    <span data-ttu-id="a9a8b-170">![Página Transações arquivadas](media/archive-inventory-transactions.png "Página Transações arquivadas")</span><span class="sxs-lookup"><span data-stu-id="a9a8b-170">![Archived transactions page](media/archive-inventory-transactions.png "Archived transactions page")</span></span>

    <span data-ttu-id="a9a8b-171">Para exibir mais informações sobre uma transação específica na página **Transações arquivadas**, selecione-a na grade e, no Painel de Ações, selecione **Detalhes da transação arquivada**.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-171">To view more information about a specific transaction on the **Archived transactions** page, select it in the grid, and then, on the Action Pane, select **Archived transaction details**.</span></span> <span data-ttu-id="a9a8b-172">A página **Detalhes da transação arquivada** exibida mostra informações como o lançamento contábil, as referências do auxiliar relacionado e as dimensões financeiras.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-172">The **Archived transaction details** page that appears shows information such as the ledger posting, related subledger references, and financial dimensions.</span></span>

- <span data-ttu-id="a9a8b-173">**Pausar arquivamento** — pausa um arquivo-morto selecionado que está sendo processado no momento.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-173">**Pause archiving** – Pause a selected archive that is currently being processed.</span></span> <span data-ttu-id="a9a8b-174">A pausa entrará em vigor somente após a geração da tarefa de arquivamento.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-174">The pause takes effect only after the archiving task has been generated.</span></span> <span data-ttu-id="a9a8b-175">Portanto, pode haver um breve atraso antes que a pausa entre em vigor.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-175">Therefore, there might be a short delay before the pause takes effect.</span></span> <span data-ttu-id="a9a8b-176">Se um arquivo-morto for pausado, aparecerá uma marca de seleção no campo **Parar atualização presente**.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-176">If an archive has been paused, a check mark appears in its **Stop current update** field.</span></span>
- <span data-ttu-id="a9a8b-177">**Continuar arquivamento** — retoma o processamento de um arquivo-morto selecionado que está pausado no momento.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-177">**Resume archiving** – Resume processing for a selected archive that is currently paused.</span></span>
- <span data-ttu-id="a9a8b-178">**Reverter** — reverte o arquivo-morto selecionado.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-178">**Reverse** – Reverse the selected archive.</span></span> <span data-ttu-id="a9a8b-179">Só é possível reverter um arquivo-morto se o campo **Estado** estiver definido como *Concluído*.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-179">You can reverse an archive only if its **State** field is set to *Finished*.</span></span> <span data-ttu-id="a9a8b-180">Se um arquivo-morto for revertido, aparecerá uma marca de seleção no campo **Revertido**.</span><span class="sxs-lookup"><span data-stu-id="a9a8b-180">If an archive has been reversed, a check mark appears in its **Reverse** field.</span></span>
