---
title: Armazenamento em backup de modelos de ER
description: Este tópico explica como usar o armazenamento de backup de relatórios eletrônicos (ER) para a recuperação de modelos.
author: NickSelin
manager: AnnBe
ms.date: 08/19/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 8b4e783f79b02c77a27fc59c2f4be8a192f2f476
ms.sourcegitcommit: 2460d0da812c45fce67a061386db52e0ae46b0f3
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/30/2019
ms.locfileid: "2248691"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="1470f-103">Armazenamento em backup de modelos de ER</span><span class="sxs-lookup"><span data-stu-id="1470f-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="1470f-104">A [estrutura de relatório eletrônico (ER)](general-electronic-reporting.md) permite que usuários comerciais configurem formatos para documentos de saída de acordo com os requisitos legais de vários países e regiões.</span><span class="sxs-lookup"><span data-stu-id="1470f-104">The [Electronic reporting (ER) framework](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="1470f-105">Os formatos de ER configurados podem usar modelos predefinidos para gerar documentos de saída em vários formatos, como pastas de trabalho do Microsoft Excel, documentos do Microsoft Word ou documentos em PDF.</span><span class="sxs-lookup"><span data-stu-id="1470f-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="1470f-106">Os modelos são preenchidos com os dados exigidos pelo fluxo de dados configurado para os documentos gerados.</span><span class="sxs-lookup"><span data-stu-id="1470f-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="1470f-107">Cada formato configurado pode ser publicado como parte de uma solução de ER.</span><span class="sxs-lookup"><span data-stu-id="1470f-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="1470f-108">Cada solução de ER pode ser exportada de uma instância do Finance and Operations e importada para outra instância.</span><span class="sxs-lookup"><span data-stu-id="1470f-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="1470f-109">A estrutura de ER usa a [estrutura de gerenciamento de documentos](../../fin-and-ops/organization-administration/configure-document-management.md) para manter os modelos exigidos para a instância atual do Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="1470f-109">The ER framework uses the [Document management framework](../../fin-and-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="1470f-110">Dependendo das configurações da estrutura de ER, o Armazenamento de Blob do Microsoft Azure ou uma pasta do Microsoft SharePoint podem ser selecionados como o local de armazenamento físico principal de modelos.</span><span class="sxs-lookup"><span data-stu-id="1470f-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="1470f-111">(Para obter mais informações, consulte [Configurar a estrutura de ER](electronic-reporting-er-configure-parameters.md).) A tabela DocuValue mantém um registro individual para cada modelo.</span><span class="sxs-lookup"><span data-stu-id="1470f-111">(For more information, see [Configure the ER framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="1470f-112">Em cada registro, o campo **AccessInformation** armazena o caminho de um arquivo de modelo que encontra-se no local de armazenamento configurado.</span><span class="sxs-lookup"><span data-stu-id="1470f-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="1470f-113">Quando você gerencia as instâncias do Finance and Operations, pode decidir migrar a instância atual para outro local.</span><span class="sxs-lookup"><span data-stu-id="1470f-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="1470f-114">Por exemplo, você poderá migrar sua instância de produção para um novo do ambiente de área restrita.</span><span class="sxs-lookup"><span data-stu-id="1470f-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="1470f-115">Se você configurou a estrutura de ER para armazenar modelos no Armazenamento de Blob, a tabela DocuValue no novo ambiente de área restrita refere-se à instância de Armazenamento de Blob no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="1470f-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="1470f-116">Entretanto, essa instância não pode ser acessada do ambiente de área restrita, pois o processo de migração não dá suporte à migração de artefatos no Armazenamento de Blob.</span><span class="sxs-lookup"><span data-stu-id="1470f-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="1470f-117">Portanto, se você tentar executar um formato de ER que usa um modelo para gerar documentos comerciais, ocorrerá uma exceção, e você será notificado sobre o modelo ausente.</span><span class="sxs-lookup"><span data-stu-id="1470f-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="1470f-118">Você também é orientado a usar a ferramenta de limpeza de ER para excluir e depois reimportar a configuração de formato de ER que contém o modelo.</span><span class="sxs-lookup"><span data-stu-id="1470f-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="1470f-119">Como você pode ter várias configurações de formato de ER, esse processo pode ser demorado.</span><span class="sxs-lookup"><span data-stu-id="1470f-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="1470f-120">O recurso de armazenamento de backup de modelos de ER pode ajudar a produzir seus modelos de modo que estejam sempre disponíveis para gerar documentos comerciais.</span><span class="sxs-lookup"><span data-stu-id="1470f-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="1470f-121">Esse recurso pode ser usado somente quando o Armazenamento de Blob foi selecionado como local de armazenamento físico de modelos de ER.</span><span class="sxs-lookup"><span data-stu-id="1470f-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

<span data-ttu-id="1470f-122">Para esse recurso, cada modelo de uma nova configuração de formato de ER no ambiente atual é salvo automaticamente no local de armazenamento de backup de modelos (a tabela de banco de dados ERDocuDatabaseStorage) quando ocorrem os seguintes eventos:</span><span class="sxs-lookup"><span data-stu-id="1470f-122">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="1470f-123">Você importa uma nova configuração de formato de ER que contém um modelo.</span><span class="sxs-lookup"><span data-stu-id="1470f-123">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="1470f-124">Você conclui a versão de rascunho de uma configuração de formato de ER que contém um modelo.</span><span class="sxs-lookup"><span data-stu-id="1470f-124">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="1470f-125">Cópias de backup de modelos são migradas para uma nova instância do Finance and Operations como parte do banco de dados do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1470f-125">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="1470f-126">Se um modelo de um formato de ER for necessário para a geração de documentos de saída, processar pagamentos de fornecedor, inclusive a geração de avisos de pagamento e relatórios de controle, por exemplo, mas o modelo necessário não se encontra no local de armazenamento principal, os seguintes eventos ocorrerão:</span><span class="sxs-lookup"><span data-stu-id="1470f-126">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="1470f-127">Se o modelo estiver disponível no local de armazenamento de backup, ele será obtido automaticamente do local de armazenamento de backup, restaurado no local de armazenamento principal e usado para a execução atual.</span><span class="sxs-lookup"><span data-stu-id="1470f-127">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="1470f-128">Cada usuário com a função **Desenvolvedor de relatório eletrônico** ou **Administrador do sistema** atribuída é notificado sobre o problema de modelo ausente por meio da Central de ações.</span><span class="sxs-lookup"><span data-stu-id="1470f-128">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="1470f-129">A mensagem exibida depende do valor do parâmetro **Executar automaticamente o procedimento de restauração de modelos corrompidos em lotes**:</span><span class="sxs-lookup"><span data-stu-id="1470f-129">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="1470f-130">Se esse parâmetro estiver definido como **Desativado**, a mensagem recomendará que você inicie o processo em lote para corrigir automaticamente problemas semelhantes de outros modelos de configuração de formato de ER.</span><span class="sxs-lookup"><span data-stu-id="1470f-130">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="1470f-131">A mensagem inclui um link que você pode usar para iniciar o processo em lote.</span><span class="sxs-lookup"><span data-stu-id="1470f-131">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="1470f-132">Se esse parâmetro estiver definido como **Ativado**, a mensagem o notificará de que foi identificado um problema de modelos ausentes e que um novo processo em lote, **Restaurar modelos corrompidos do backup do banco de dados interno**, será agendado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1470f-132">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="1470f-133">Esse processo em lote corrigirá automaticamente problemas semelhantes de outros modelos.</span><span class="sxs-lookup"><span data-stu-id="1470f-133">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="1470f-134">Para configurar o parâmetro **Executar automaticamente o procedimento de restauração de modelos corrompidos em lotes**, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="1470f-134">To set up the he **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="1470f-135">No Finance and Operations, abra a página **Administração da organização \> Relatório eletrônico \> Configurações**.</span><span class="sxs-lookup"><span data-stu-id="1470f-135">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="1470f-136">Na página **Configurações**, no Painel Ação, na guia **Configurações**, no grupo **Configurações avançadas**, selecione **Parâmetros de usuário**.</span><span class="sxs-lookup"><span data-stu-id="1470f-136">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="1470f-137">Na caixa de diálogo **Parâmetros de usuário**, defina o valor necessário para o parâmetro **Executar automaticamente o procedimento de restauração de modelos corrompidos em lotes** .</span><span class="sxs-lookup"><span data-stu-id="1470f-137">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="1470f-138">Esse parâmetro é definido como específico da empresa registrada e do usuário do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1470f-138">This parameter is defined as application user and logged company specific.</span></span>

![Página de configurações de ER](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="1470f-140">A ilustração a seguir mostra um exemplo da mensagem que aparece quando o parâmetro **Executar automaticamente o procedimento de restauração de modelos corrompidos em lotes** está definido como **Ativado**.</span><span class="sxs-lookup"><span data-stu-id="1470f-140">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Página do diário de pagamentos do fornecedor](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="1470f-142">A ilustração a seguir mostra o processo em lote **Restaurar modelos corrompidos do backup do banco de dados interno** na página **Trabalho em lotes** .</span><span class="sxs-lookup"><span data-stu-id="1470f-142">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Página Trabalho em lotes](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="1470f-144">O log de execução do processo em lote **Restaurar modelos corrompidos do backup do banco de dados interno** concluído inclui informações sobre os modelos que foram restaurados do local de armazenamento de backup para o local de armazenamento principal.</span><span class="sxs-lookup"><span data-stu-id="1470f-144">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Página Histórico de trabalho em lotes](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="1470f-146">Por padrão, o processo de criação automática de cópias de backup de modelos que residem em configurações de formato de ER fica ativado.</span><span class="sxs-lookup"><span data-stu-id="1470f-146">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="1470f-147">Para parar de fazer cópias de backup de modelos, defina a opção **Parar de fazer cópias de backup de modelos** como **Sim** na guia **Anexos** da página **Parâmetros de relatório eletrônico**.</span><span class="sxs-lookup"><span data-stu-id="1470f-147">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="1470f-148">Você pode abrir essa página no espaço de trabalho **Relatório eletrônico**.</span><span class="sxs-lookup"><span data-stu-id="1470f-148">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="1470f-149">Se você definiu a opção **Parar de fazer backup cópias de modelos** como **Sim** e não deseja manter as cópias de backup de modelos feitas anteriormente, selecione **Limpar o armazenamento de backup** na página **Parâmetros de relatório eletrônico** .</span><span class="sxs-lookup"><span data-stu-id="1470f-149">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="1470f-150">Se você atualizou seu ambiente para o Finance and Operations versão 10.0.5 (outubro de 2019) e deseja migrar para um novo ambiente que inclui as configurações de formato de ER que podem ser executadas, selecione **Preencher o armazenamento de backup** na página **Parâmetros de relatório eletrônico** antes da migração.</span><span class="sxs-lookup"><span data-stu-id="1470f-150">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="1470f-151">Esse botão inicia o processo de fazer cópias de backup de todos os modelos disponíveis, de modo que elas possam ser armazenadas no local de armazenamento de backup de ER para modelos.</span><span class="sxs-lookup"><span data-stu-id="1470f-151">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Página de parâmetros de relatórios eletrônicos](./media/GER-BackupTemplates-5.png)

## <a name="supported-deployments"></a><span data-ttu-id="1470f-153">Implantações com suporte</span><span class="sxs-lookup"><span data-stu-id="1470f-153">Supported deployments</span></span>

<span data-ttu-id="1470f-154">No Finance and Operations versão 10.0.5, o recurso de armazenamento em backup de modelos de ER está disponível somente em implantações de nuvem.</span><span class="sxs-lookup"><span data-stu-id="1470f-154">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="1470f-155">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="1470f-155">Additional resources</span></span>

[<span data-ttu-id="1470f-156">Visão geral de Relatório eletrônico</span><span class="sxs-lookup"><span data-stu-id="1470f-156">Electronic reporting overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="1470f-157">Configurar a estrutura de Relatórios eletrônicos</span><span class="sxs-lookup"><span data-stu-id="1470f-157">Configure the Electronic reporting framework</span></span>](electronic-reporting-er-configure-parameters.md)
