---
title: Pesquisa de formato estendido de ER (Relatório eletrônico)
description: Este tópico descreve como uma referência de formato de ER pode ser configurada na pesquisa de formato de ER quando o formato necessário é armazenado no Repositório global.
author: NickSelin
manager: AnnBe
ms.date: 01/24/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-04-01
ms.dyn365.ops.version: AX 10.0.9
ms.openlocfilehash: c72335d7d83934146f827ef0bb568b79a585a7a5
ms.sourcegitcommit: 6a70f9ac296158edd065d52a12703b3ce85ce5ee
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/03/2020
ms.locfileid: "3015111"
---
# <a name="allow-users-to-set-up-an-er-format-reference-inquiring-a-format-from-the-global-repository"></a><span data-ttu-id="b0227-103">Permitir que os usuários configurem uma referência de formato de ER consultando um formato no Repositório global</span><span class="sxs-lookup"><span data-stu-id="b0227-103">Allow users to set up an ER format reference inquiring a format from the Global repository</span></span>

[!include [banner](../includes/banner.md)]

[!include [banner](../includes/preview-banner.md)]

<span data-ttu-id="b0227-104">Você pode usar a estrutura de ER [(Relatório eletrônico)](general-electronic-reporting.md) a fim de configurar [formatos](general-electronic-reporting.md#FormatComponentOutbound) para documentos de saída de acordo com os requisitos legais de diversos países/regiões.</span><span class="sxs-lookup"><span data-stu-id="b0227-104">You can use the [Electronic reporting](general-electronic-reporting.md) (ER) framework to configure [formats](general-electronic-reporting.md#FormatComponentOutbound) for outbound documents in accordance to the legal requirements of various countries/regions.</span></span> <span data-ttu-id="b0227-105">Também é possível usar a estrutura de ER a fim de configurar [formatos](general-electronic-reporting.md#FormatComponentInbound) para analisar documentos de entrada e usar as informações desses documentos para acrescentar ou atualizar dados de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b0227-105">You can also use the ER framework to configure [formats](general-electronic-reporting.md#FormatComponentInbound) for parsing inbound documents and use the information from those documents to append or update application data.</span></span> <span data-ttu-id="b0227-106">Cada um desses formatos pode ser usado na instância do seu Dynamics 365 Finance para manipular documentos comerciais de entrada ou saída como parte de um determinado processo de negócios.</span><span class="sxs-lookup"><span data-stu-id="b0227-106">Each of these formats can used in your Dynamics 365 Finance instance for handling inbound or outbound business documents as part of a certain business process.</span></span> 

<span data-ttu-id="b0227-107">Normalmente, você deve especificar o formato ER que deve ser usado em um determinado processo de negócios.</span><span class="sxs-lookup"><span data-stu-id="b0227-107">Usually, you must specify what ER format must be used in a certain business process.</span></span> <span data-ttu-id="b0227-108">Para isso, selecione um único formato de ER em um campo de pesquisa configurado como parte dos parâmetros específicos do processo de negócios.</span><span class="sxs-lookup"><span data-stu-id="b0227-108">To do that, select a single ER format in a lookup field that is configured as part of business process-specific parameters.</span></span> <span data-ttu-id="b0227-109">Esses campos de pesquisa geralmente são implementados usando a API apropriada da estrutura de ER.</span><span class="sxs-lookup"><span data-stu-id="b0227-109">These lookup fields are usually implemented by using the appropriate API of the ER framework.</span></span> <span data-ttu-id="b0227-110">Para obter mais informações, consulte [API da estrutura de ER – código para exibir uma pesquisa de mapeamento de formato](er-apis-app73.md#code-to-display-a-format-mapping-lookup).</span><span class="sxs-lookup"><span data-stu-id="b0227-110">For more information, see [ER framework API - code to display a format mapping lookup](er-apis-app73.md#code-to-display-a-format-mapping-lookup).</span></span>

<span data-ttu-id="b0227-111">Por exemplo, ao configurar [parâmetros de comércio exterior](https://docs.microsoft.com/dynamics365/finance/localizations/emea-intrastat#set-up-foreign-trade-parameters), você precisará configurar as referências para formatos de ER individuais que serão usados para gerar a declaração Intrastat e o relatório de controle de declaração Intrastat.</span><span class="sxs-lookup"><span data-stu-id="b0227-111">For example, when you configure [foreign trade parameters](https://docs.microsoft.com/dynamics365/finance/localizations/emea-intrastat#set-up-foreign-trade-parameters), you need to set up the references to individual ER formats that will be used to generate the Intrastat declaration and the Intrastat declaration control report.</span></span> <span data-ttu-id="b0227-112">As capturas de tela abaixo mostram a aparência do campo de pesquisa de formatos de ER na página **Parâmetros de comércio exterior**.</span><span class="sxs-lookup"><span data-stu-id="b0227-112">The screenshots below show how the ER formats lookup field looks like in the **Foreign trade parameters** page.</span></span>

<span data-ttu-id="b0227-113">Se a instância atual de Finance não contiver formatos de ER relacionados ao processo de negócios Intrastat, esse campo de pesquisa ficará vazio.</span><span class="sxs-lookup"><span data-stu-id="b0227-113">If the current Finance instance contains no Intrastat business process related ER formats, this lookup field will be empty.</span></span>

<span data-ttu-id="b0227-114">[![Página Parâmetros de comércio exterior](./media/ER-ExtLookup-Lookup1.gif)](./media/ER-ExtLookup-Lookup1.gif)</span><span class="sxs-lookup"><span data-stu-id="b0227-114">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup1.gif)](./media/ER-ExtLookup-Lookup1.gif)</span></span>

<span data-ttu-id="b0227-115">Se a instância atual de Finance contiver formatos de ER relacionados ao processo de negócios Intrastat, esse campo de pesquisa oferecerá os formatos de ER.</span><span class="sxs-lookup"><span data-stu-id="b0227-115">If the current Finance instance contains Intrastat business process related ER formats, this lookup field offers the ER formats.</span></span>

<span data-ttu-id="b0227-116">[![Página Parâmetros de comércio exterior](./media/ER-ExtLookup-Lookup2.png)](./media/ER-ExtLookup-Lookup2.png)</span><span class="sxs-lookup"><span data-stu-id="b0227-116">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup2.png)](./media/ER-ExtLookup-Lookup2.png)</span></span>

<span data-ttu-id="b0227-117">Essa pesquisa oferece somente os formatos de ER que já foram importados para a instância atual do Finance.</span><span class="sxs-lookup"><span data-stu-id="b0227-117">This lookup offers only the ER formats that have already been imported to the current Finance instance.</span></span> <span data-ttu-id="b0227-118">Para [importar](./tasks/er-import-configuration-lifecycle-services.md) soluções ER para a atual instância de Finance, você precisa ter permissões para executar a função apropriada da estrutura de ER que dá suporte ao [ciclo de vida](general-electronic-reporting-manage-configuration-lifecycle.md) das soluções ER que contêm os formatos de ER.</span><span class="sxs-lookup"><span data-stu-id="b0227-118">To [import](./tasks/er-import-configuration-lifecycle-services.md) ER solutions to the current Finance instance, you need to have permissions to run the appropriate function of the ER framework that supports the [lifecycle](general-electronic-reporting-manage-configuration-lifecycle.md) of ER solutions that contain ER formats.</span></span>

<span data-ttu-id="b0227-119">A partir do Finance versão 10.0.9 (lançamento de abril de 2020), a interface de usuário da pesquisa de formato de ER que é implementada usando a API da estrutura de ER, foi estendida.</span><span class="sxs-lookup"><span data-stu-id="b0227-119">Starting in the Finance version 10.0.9 (April 2020 release), the user interface of the ER format lookup that is implemented by using the ER framework API, has been extended.</span></span> <span data-ttu-id="b0227-120">Você ainda pode selecionar os formatos de ER existentes, que estão na FastTab **Selecionar configuração do formato**.</span><span class="sxs-lookup"><span data-stu-id="b0227-120">You can still select the existing ER formats, which on the **Select format configuration** FastTab.</span></span> <span data-ttu-id="b0227-121">Além disso, a pesquisa estendida oferece a nova opção de procurar o GR (Repositório global) para localizar formatos de ER específicos.</span><span class="sxs-lookup"><span data-stu-id="b0227-121">In addition to that, the extended lookup offers the new option to search the Global repository (GR) to locate specific ER formats.</span></span> <span data-ttu-id="b0227-122">Todos os formatos de ER do GR são oferecidos na FastTab **Importar do Repositório global**.</span><span class="sxs-lookup"><span data-stu-id="b0227-122">All ER formats of the GR are offered on the **Import from Global repository** FastTab.</span></span>

<span data-ttu-id="b0227-123">[![Página Parâmetros de comércio exterior](./media/ER-ExtLookup-Lookup3.png)](./media/ER-ExtLookup-Lookup3.png)</span><span class="sxs-lookup"><span data-stu-id="b0227-123">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup3.png)](./media/ER-ExtLookup-Lookup3.png)</span></span>

<span data-ttu-id="b0227-124">Semelhante à FastTab **Selecionar configuração do formato**, a FastTab **Importar do Repositório global** mostra apenas os formatos de ER que são aplicáveis ao processo de negócios para os quais um formato de ER é selecionado nesse campo de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="b0227-124">Similar to the **Select format configuration** FastTab, the **Import from Global repository** FastTab shows only the ER formats that are applicable to the business process for which an ER format is selected in this lookup field.</span></span> <span data-ttu-id="b0227-125">Neste exemplo, a geração da declaração Intrastat.</span><span class="sxs-lookup"><span data-stu-id="b0227-125">In this example, the generation of Intrastat declaration.</span></span> <span data-ttu-id="b0227-126">O formato de ER é aplicável para a empresa à qual o usuário está conectado no momento, dependendo do contexto de país da empresa.</span><span class="sxs-lookup"><span data-stu-id="b0227-126">The ER format is applicable for the company to which the user is currently signed in, depending on the company country context.</span></span>

<span data-ttu-id="b0227-127">Quando você seleciona um formato de ER na FastTab **Importar do Repositório global**, a [configuração](general-electronic-reporting.md#Configuration) do formato de ER selecionado é importada do GR para a atual instância de Finance.</span><span class="sxs-lookup"><span data-stu-id="b0227-127">When you select an ER format on the **Import from Global repository** FastTab, the selected ER format [configuration](general-electronic-reporting.md#Configuration) is imported from the GR to the current Finance instance.</span></span>

<span data-ttu-id="b0227-128">[![Página Parâmetros de comércio exterior](./media/ER-ExtLookup-FormatImport.png)](./media/ER-ExtLookup-FormatImport.png)</span><span class="sxs-lookup"><span data-stu-id="b0227-128">[![Foreign trade parameters page](./media/ER-ExtLookup-FormatImport.png)](./media/ER-ExtLookup-FormatImport.png)</span></span>

<span data-ttu-id="b0227-129">Assim, se a importação for concluída com êxito, a referência para o formato de ER importada será armazenada nesse campo de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="b0227-129">Then, if the import completes successfully, the reference to the imported ER format is stored in this lookup field.</span></span> <span data-ttu-id="b0227-130">Observe que ao acessar o GR pela primeira vez, você precisará seguir o link fornecido para inscrever-se no RCS [(Regulatory Configuration Service)](https://aka.ms/rcs) que é usado para gerenciar o acesso ao armazenamento do GR.</span><span class="sxs-lookup"><span data-stu-id="b0227-130">Note that when you access the GR for the first time, you need to follow the link provided to sign up for the [Regulatory Configuration Service](https://aka.ms/rcs) (RCS) that is used to manage access to the GR storage.</span></span>

<span data-ttu-id="b0227-131">[![Página Parâmetros de comércio exterior](./media/ER-ExtLookup-RepoSignUp.png)](./media/ER-ExtLookup-RepoSignUp.png)</span><span class="sxs-lookup"><span data-stu-id="b0227-131">[![Foreign trade parameters page](./media/ER-ExtLookup-RepoSignUp.png)](./media/ER-ExtLookup-RepoSignUp.png)</span></span>

<span data-ttu-id="b0227-132">Por padrão, a FastTab **Importar do Repositório global** apresenta a lista de formatos de ER do armazenamento temporário que é criada automaticamente com base no conteúdo do GR para melhorias de desempenho.</span><span class="sxs-lookup"><span data-stu-id="b0227-132">By default, the **Import from Global repository** FastTab presents the list of ER formats from the temporary storage that is automatically created based on the GR content for performance improvements.</span></span> <span data-ttu-id="b0227-133">Isso ocorre quando a FastTab **Importar do Repositório global** é aberta pela primeira vez, o que pode demorar alguns segundos.</span><span class="sxs-lookup"><span data-stu-id="b0227-133">This happens when the **Import from Global repository** FastTab is opened the first time, which may take several seconds.</span></span>

<span data-ttu-id="b0227-134">Se você não visualizar o formato obrigatório de ER na FastTab **Importar do Repositório global**, mas tiver certeza de que esse formato de ER está armazenado no GR, selecione a opção **Sincronizar**.</span><span class="sxs-lookup"><span data-stu-id="b0227-134">If you do not see the required ER format in the **Import from Global repository** FastTab, but you are sure that this ER format is stored in the GR, select the **Synchronize** option.</span></span> <span data-ttu-id="b0227-135">Isso atualizará o armazenamento temporário e o sincronizará com o conteúdo atual do GR.</span><span class="sxs-lookup"><span data-stu-id="b0227-135">This will update the temporary storage and synchronize it with the current content of the GR.</span></span>

## <a name="feature-activation"></a><span data-ttu-id="b0227-136">Ativação de recurso</span><span class="sxs-lookup"><span data-stu-id="b0227-136">Feature activation</span></span>

<span data-ttu-id="b0227-137">A disponibilidade dessa funcionalidade é controlada pelo recurso **Pesquisa estendida das configurações de formato de ER que permite consultar o Repositório global** no **Gerenciamento de recursos**.</span><span class="sxs-lookup"><span data-stu-id="b0227-137">The availability of this functionality is controlled by the feature **Extended lookup of ER format configurations allowing to inquire the Global repository** in the **Feature management**.</span></span> <span data-ttu-id="b0227-138">Esse recurso é habilitado por padrão.</span><span class="sxs-lookup"><span data-stu-id="b0227-138">This feature is enabled by default.</span></span>

<span data-ttu-id="b0227-139">[![Página Gerenciamento de recursos](./media/ER-ExtLookup-FeatureMngt.png)](./media/ER-ExtLookup-FeatureMngt.png)</span><span class="sxs-lookup"><span data-stu-id="b0227-139">[![Feature management page](./media/ER-ExtLookup-FeatureMngt.png)](./media/ER-ExtLookup-FeatureMngt.png)</span></span>

## <a name="security-considerations"></a><span data-ttu-id="b0227-140">Considerações de segurança</span><span class="sxs-lookup"><span data-stu-id="b0227-140">Security considerations</span></span>

<span data-ttu-id="b0227-141">O privilégio **Manter repositórios de configuração** (**ERMaintainSolutionRepositories**) controla o acesso ao GR para um usuário que abre a pesquisa de formato de ER com a FastTab **Importar do Repositório global**.</span><span class="sxs-lookup"><span data-stu-id="b0227-141">The **Maintain configuration repositories** (**ERMaintainSolutionRepositories**) privilege controls access to the GR for a user opening the ER format lookup with the enabled **Import from Global repository** FastTab.</span></span> <span data-ttu-id="b0227-142">Para permitir que os usuários acessem o conteúdo do GR a partir das pesquisas de formato de ER, é preciso alterar as configurações de segurança concedendo o privilégio **ERMaintainSolutionRepositories** aos usuários, diretamente ou usando funções e direitos já atribuídos.</span><span class="sxs-lookup"><span data-stu-id="b0227-142">To allow users to access the GR content from the ER format lookups, you need to change the security settings by granting the **ERMaintainSolutionRepositories** privilege to users either directly or by using already assigned roles and duties.</span></span>

<span data-ttu-id="b0227-143">A captura de tela a seguir mostra como esse privilégio pode ser concedido aos usuários atribuídos à função **Contador**.</span><span class="sxs-lookup"><span data-stu-id="b0227-143">The following screenshot shows how this privilege can be granted to users who are assigned to the **Accountant** role.</span></span> <span data-ttu-id="b0227-144">Essa função permite que os usuários configurem parâmetros de comércio exterior e referências para os formatos de ER nos campos **Mapeamento de formato de arquivo** e **Mapeamento de formato de relatório** na página **Parâmetros de comércio exterior**.</span><span class="sxs-lookup"><span data-stu-id="b0227-144">This role makes allows users to configure foreign trade parameters and set up references to the ER formats in the **File format mapping** and **Report format mapping** fields on the **Foreign trade parameters** page.</span></span>

<span data-ttu-id="b0227-145">[![Página Configuração de segurança](./media/ER-ExtLookup-SecuritySetting.png)](./media/ER-ExtLookup-SecuritySetting.png)</span><span class="sxs-lookup"><span data-stu-id="b0227-145">[![Security configuration page](./media/ER-ExtLookup-SecuritySetting.png)](./media/ER-ExtLookup-SecuritySetting.png)</span></span>

## <a name="limitations"></a><span data-ttu-id="b0227-146">Limitações</span><span class="sxs-lookup"><span data-stu-id="b0227-146">Limitations</span></span>

<span data-ttu-id="b0227-147">Atualmente, o acesso ao GR na pesquisa de formato de ER só é permitido para a seleção de formatos de ER que são usados para gerar documentos de saída.</span><span class="sxs-lookup"><span data-stu-id="b0227-147">Access to the GR in the ER format lookup is currently only supported for the selection of ER formats that are used to generate outbound documents.</span></span>

## <a name="frequently-asked-questions"></a><span data-ttu-id="b0227-148">Perguntas frequentes</span><span class="sxs-lookup"><span data-stu-id="b0227-148">Frequently asked questions</span></span>

### <a name="why-cant-i-access-the-global-repository-from-the-er-format-lookup"></a><span data-ttu-id="b0227-149">Por que não consigo acessar o Repositório global a partir da pesquisa de formato de ER?</span><span class="sxs-lookup"><span data-stu-id="b0227-149">Why can't I access the Global repository from the ER format lookup?</span></span>

<span data-ttu-id="b0227-150">Se você habilitou o recurso **Pesquisa estendida das configurações de formato de ER que permite consultar o Repositório global** na página **Gerenciamento de recursos**, mas os usuários não conseguem ver os formatos de ER na FastTab **Importar do Repositório global** e a opção **Sincronizar** está visível mas desabilitada, verifique se o privilégio **Manter repositórios de configuração** (**ERMaintainSolutionRepositories**) foi concedido ao usuário.</span><span class="sxs-lookup"><span data-stu-id="b0227-150">If you have enabled the **Extended lookup of ER format configurations allowing to inquire the Global repository** feature on the **Feature management** page, but users can't see ER formats on the **Import from Global repository** FastTab and the **Synchronize** option is visible but disabled, make sure that the **Maintain configuration repositories** (**ERMaintainSolutionRepositories**) privilege has been granted to the user.</span></span> <span data-ttu-id="b0227-151">Entre em contato com o administrador de sistema para receber esse privilégio.</span><span class="sxs-lookup"><span data-stu-id="b0227-151">Contact your system administrator to receive this privilege.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b0227-152">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="b0227-152">Additional resources</span></span>

- [<span data-ttu-id="b0227-153">Visão geral de Relatório eletrônico (ER)</span><span class="sxs-lookup"><span data-stu-id="b0227-153">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="b0227-154">API da estrutura de ER (Relatório eletrônico)</span><span class="sxs-lookup"><span data-stu-id="b0227-154">Electronic reporting (ER) framework API</span></span>](er-apis-app73.md)
- [<span data-ttu-id="b0227-155">Gerenciar o ciclo de vida das configurações de ER (Relatório eletrônico)</span><span class="sxs-lookup"><span data-stu-id="b0227-155">Manage Electronic reporting (ER) configurations lifecycle</span></span>](general-electronic-reporting-manage-configuration-lifecycle.md)
