---
title: Configurar formatos de ER para usar parâmetros especificados por entidade legal
description: Este tópico explica como configurar formatos de relatório eletrônico (ER) para usar parâmetros especificados por entidade legal.
author: NickSelin
manager: AnnBe
ms.date: 10/26/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 0ed1442403ae82dfc820212e3e235737f37f21a4
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/05/2020
ms.locfileid: "4679717"
---
# <a name="configure-er-formats-to-use-parameters-that-are-specified-per-legal-entity"></a><span data-ttu-id="90452-103">Configurar formatos de ER para usar parâmetros especificados por entidade legal</span><span class="sxs-lookup"><span data-stu-id="90452-103">Configure ER formats to use parameters that are specified per legal entity</span></span>

[!include[banner](../includes/banner.md)]

## <a name="overview"></a><span data-ttu-id="90452-104">Visão geral</span><span class="sxs-lookup"><span data-stu-id="90452-104">Overview</span></span>

<span data-ttu-id="90452-105">Em muitos dos formatos de relatório eletrônico (ER) que você criará, é preciso filtrar dados usando um conjunto de valores que são específicos de cada entidade legal da sua instância (por exemplo, um conjunto de códigos de imposto para filtrar as transações de imposto).</span><span class="sxs-lookup"><span data-stu-id="90452-105">In many of the Electronic reporting (ER) formats that you will design, you must filter data by using a set of values that are specific to each legal entity of your instance (for example, a set of tax codes to filter tax transactions).</span></span> <span data-ttu-id="90452-106">Atualmente, quando a filtragem deste tipo é configurada em um formato de ER, os valores que dependem da entidade legal (por exemplo, códigos de imposto) são usados em expressões do formato de ER para especificar regras de filtragem de dados.</span><span class="sxs-lookup"><span data-stu-id="90452-106">Currently, when filtering of this type is configured in an ER format, values that are dependent on the legal entity (for example, tax codes) are used in expressions of the ER format to specify data filtering rules.</span></span> <span data-ttu-id="90452-107">Portanto, o formato de ER torna-se específico da entidade legal e, para gerar os relatórios necessários, você deve criar cópias derivadas do formato de ER original para cada entidade legal onde precisa executar o formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-107">Therefore, the ER format is made legal entity–specific, and to generate the required reports, you must create derived copies of the original ER format for each legal entity where you have to run the ER format.</span></span> <span data-ttu-id="90452-108">Cada formato de ER derivado deve ser editado para ter valores específicos da entidade legal, passar por uma troca de base sempre que a versão original (base) for atualizada, exportada de um ambiente de teste e importada para um ambiente de produção quando tiver de ser implantada para uso em produção e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="90452-108">Each derived ER format must be edited to bring legal entity–specific values into it, rebased whenever the original (base) version has been updated, exported from a test environment and imported into a production environment when it must be deployed for production use, and so on.</span></span> <span data-ttu-id="90452-109">Portanto, a manutenção desse tipo de solução de ER configurada é bastante complexa e demorada por vários motivos:</span><span class="sxs-lookup"><span data-stu-id="90452-109">Therefore, maintenance of this type of configured ER solution is quite complex and time-consuming for several reasons:</span></span>

-   <span data-ttu-id="90452-110">Quanto mais entidades legais existem, maior é a necessidade de manter as configurações do formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-110">The more legal entities there are, the more ER format configurations must be maintained.</span></span>
-   <span data-ttu-id="90452-111">A manutenção das configurações de ER requer que os usuários empresariais tenham conhecimento de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-111">Maintenance of ER configurations requires that business users have ER knowledge.</span></span>

<span data-ttu-id="90452-112">O recurso de parâmetros específicos do aplicativo de ER permite que os usuários avançados configurem a filtragem de dados em um formato de ER de forma que ela seja baseada em um conjunto de regras abstratas</span><span class="sxs-lookup"><span data-stu-id="90452-112">The ER application-specific parameters feature lets power users configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="90452-113">Esse conjunto de regras pode ser configurado para usar as fontes de dados disponíveis em um formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-113">This set of rules can be configured to use the data sources that are available in an ER format.</span></span> <span data-ttu-id="90452-114">Os usuários empresariais podem então especificar regras reais além da estrutura de ER usando a interface de usuário (UI) que é gerada automaticamente com base nas configurações do formato de ER correspondente e nos dados da entidade legal atual que serão acessados pelas fontes de dados do formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-114">Business users can then specify real rules beyond the ER framework by using the user interface (UI) that is automatically generated based on the settings of the corresponding ER format and the current legal entity data that will be accessed by the ER format's data sources.</span></span> <span data-ttu-id="90452-115">O conjunto de regras que é especificado para um formato de ER pode ser exportado de entidade legal atual da instância do Dynamics 365 Finance (Finance).</span><span class="sxs-lookup"><span data-stu-id="90452-115">The set of rules that is specified for an ER format can be exported from the current legal entity of the Dynamics 365 Finance (Finance) instance.</span></span> <span data-ttu-id="90452-116">Ele pode ser importado para outra entidade legal da mesma instância do Finance ou de outra instância como um conjunto de regras para o mesmo formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-116">It can then be imported into another legal entity of either the same Finance instance or a different instance as a set of rules for the same ER format.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="90452-117">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="90452-117">Prerequisites</span></span>

<span data-ttu-id="90452-118">Para concluir os exemplos neste tópico, você deve ter acesso à instância de Regulatory Configuration Services (RCS) que foi provisionada para o mesmo locatário de Finance para uma das seguintes funções:</span><span class="sxs-lookup"><span data-stu-id="90452-118">To complete the examples in this topic, you must have access to the instance of Regulatory Configuration Services (RCS) that has been provisioned for the same tenant as Finance for one of the following roles:</span></span>

- <span data-ttu-id="90452-119">Desenvolvedor de relatório eletrônico</span><span class="sxs-lookup"><span data-stu-id="90452-119">Electronic reporting developer</span></span>
- <span data-ttu-id="90452-120">Consultor funcional de relatório eletrônico</span><span class="sxs-lookup"><span data-stu-id="90452-120">Electronic reporting functional consultant</span></span>
- <span data-ttu-id="90452-121">Administrador do sistema</span><span class="sxs-lookup"><span data-stu-id="90452-121">System administrator</span></span>

<span data-ttu-id="90452-122">Recomendamos que você conclua as etapas no tópico [Suporte a chamadas parametrizadas de fontes de dados de ER do tipo CAMPO CALCULADO](er-calculated-field-type.md).</span><span class="sxs-lookup"><span data-stu-id="90452-122">We recommend that you complete the steps in the [Support parameterized calls of ER data sources of CALCULATED FIELD type](er-calculated-field-type.md) topic.</span></span> <span data-ttu-id="90452-123">Se você já concluiu essas etapas, ignore as etapas na seção **Importar configurações de ER para o RCS** a seguir.</span><span class="sxs-lookup"><span data-stu-id="90452-123">If you've already completed those steps, you can skip the steps in the **Import ER configurations into RCS** section that follows.</span></span>

## <a name="import-er-configurations-into-rcs"></a><span data-ttu-id="90452-124">Importar configurações de ER para o RCS</span><span class="sxs-lookup"><span data-stu-id="90452-124">Import ER configurations into RCS</span></span>

<span data-ttu-id="90452-125">No [Centro de Download da Microsoft](https://go.microsoft.com/fwlink/?linkid=851448), baixe o arquivo compactado **Suporte a chamadas parametrizadas de fontes de dados de ER do tipo CAMPO CALCULADO**.</span><span class="sxs-lookup"><span data-stu-id="90452-125">From [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=851448), download the **Support parameterized calls of ER data sources of CALCULATED FIELD type** zip file.</span></span> <span data-ttu-id="90452-126">Esse arquivo contém as configurações de ER a seguir que devem ser extraídas e armazenadas localmente.</span><span class="sxs-lookup"><span data-stu-id="90452-126">This zip file contains the following ER configurations that must be extracted and stored locally.</span></span>

| <span data-ttu-id="90452-127">**Descrição do conteúdo**</span><span class="sxs-lookup"><span data-stu-id="90452-127">**Content description**</span></span>                        | <span data-ttu-id="90452-128">**Nome do arquivo**</span><span class="sxs-lookup"><span data-stu-id="90452-128">**File name**</span></span>                                        |
|------------------------------------------------|------------------------------------------------------|
| <span data-ttu-id="90452-129">Exemplo de arquivo de configuração **Modelo de dados de ER**</span><span class="sxs-lookup"><span data-stu-id="90452-129">Sample **ER data model** configuration file</span></span>    | <span data-ttu-id="90452-130">Modelo para conhecer chamadas parametrizadas.versão.1.xml</span><span class="sxs-lookup"><span data-stu-id="90452-130">Model to learn parameterized calls.version.1.xml</span></span>     |
| <span data-ttu-id="90452-131">Exemplo de arquivo de configuração **Metadados de ER**</span><span class="sxs-lookup"><span data-stu-id="90452-131">Sample **ER metadata** configuration file</span></span>      | <span data-ttu-id="90452-132">Metadados para conhecer chamadas parametrizadas.versão.1.xml</span><span class="sxs-lookup"><span data-stu-id="90452-132">Metadata to learn parameterized calls.version.1.xml</span></span>  |
| <span data-ttu-id="90452-133">Exemplo de arquivo de configuração **Mapeamento de modelos de ER**</span><span class="sxs-lookup"><span data-stu-id="90452-133">Sample **ER model mapping** configuration file</span></span> | <span data-ttu-id="90452-134">Mapeamento para conhecer chamadas parametrizadas.versão.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="90452-134">Mapping to learn parameterized calls.version.1.1.xml</span></span> |
| <span data-ttu-id="90452-135">Exemplo de configuração **Formato de ER**</span><span class="sxs-lookup"><span data-stu-id="90452-135">Sample **ER format** configuration</span></span>             | <span data-ttu-id="90452-136">Formato para conhecer chamadas parametrizadas.versão.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="90452-136">Format to learn parameterized calls.version.1.1.xml</span></span>  |

<span data-ttu-id="90452-137">Em seguida, entre em sua instância do RCS.</span><span class="sxs-lookup"><span data-stu-id="90452-137">Next, sign in to your RCS instance.</span></span>

<span data-ttu-id="90452-138">Neste exemplo, você irá criar uma configuração para a empresa de exemplo Litware, Inc.</span><span class="sxs-lookup"><span data-stu-id="90452-138">In this example, you will create a configuration for the Litware, Inc sample company.</span></span> <span data-ttu-id="90452-139">Para concluir este procedimento, você deve concluir as etapas descritas no tópico [Criar um provedor de configuração e marcá-lo como ativo](tasks/er-configuration-provider-mark-it-active-2016-11.md) no RCS.</span><span class="sxs-lookup"><span data-stu-id="90452-139">Before you can complete this procedure, you must complete the steps in the [Create a configuration provider and mark it as active](tasks/er-configuration-provider-mark-it-active-2016-11.md) topic in RCS.</span></span>

1.  <span data-ttu-id="90452-140">No painel padrão, selecione **Relatório eletrônico**.</span><span class="sxs-lookup"><span data-stu-id="90452-140">On the default dashboard, select **Electronic reporting**.</span></span>
2.  <span data-ttu-id="90452-141">Selecione **Configurações de relatórios**.</span><span class="sxs-lookup"><span data-stu-id="90452-141">Select **Reporting configurations**.</span></span>
3.  <span data-ttu-id="90452-142">Importe as configurações de ER baixadas anteriormente para o RCS na seguinte ordem: modelo de dados, metadados, mapeamento de modelos e formato.</span><span class="sxs-lookup"><span data-stu-id="90452-142">Import the ER configurations that you downloaded earlier into RCS, in the following order: data model, metadata, model mapping, and format.</span></span> <span data-ttu-id="90452-143">Para cada configuração de ER, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="90452-143">For each ER configuration, follow these steps:</span></span>

    1.  <span data-ttu-id="90452-144">Selecione **Taxa de câmbio**.</span><span class="sxs-lookup"><span data-stu-id="90452-144">Select **Exchange**.</span></span>
    2.  <span data-ttu-id="90452-145">Selecione **Carregar do arquivo XML**.</span><span class="sxs-lookup"><span data-stu-id="90452-145">Select **Load from XML file**.</span></span>
    3.  <span data-ttu-id="90452-146">Selecione **Procurar** para selecionar o arquivo para a configuração de ER necessária no formato XML.</span><span class="sxs-lookup"><span data-stu-id="90452-146">Select **Browse** to select the file for the required ER configuration in XML format.</span></span>
    4.  <span data-ttu-id="90452-147">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="90452-147">Select **OK**.</span></span>

## <a name="review-the-er-solution-that-is-provided"></a><span data-ttu-id="90452-148">Revisar a solução de ER que é fornecida</span><span class="sxs-lookup"><span data-stu-id="90452-148">Review the ER solution that is provided</span></span>

1.  <span data-ttu-id="90452-149">Na árvore de configuração, expanda o conteúdo do item **Modelo para conhecer chamadas parametrizadas**.</span><span class="sxs-lookup"><span data-stu-id="90452-149">In the configuration tree, expand the contents of the **Model to learn parameterized calls** item.</span></span>
2.  <span data-ttu-id="90452-150">Selecione o item **Formato para conhecer chamadas parametrizadas**.</span><span class="sxs-lookup"><span data-stu-id="90452-150">Select the **Format to learn parameterized calls** item.</span></span>
3.  <span data-ttu-id="90452-151">Selecione **Designer**.</span><span class="sxs-lookup"><span data-stu-id="90452-151">Select **Designer**.</span></span>
4.  <span data-ttu-id="90452-152">Selecione **Expandir/Recolher**.</span><span class="sxs-lookup"><span data-stu-id="90452-152">Select **Expand/Collapse**.</span></span>

    <span data-ttu-id="90452-153">O formato de ER **Formato para conhecer chamadas parametrizadas** gera uma obrigação fiscal no formato XML apresentando vários níveis de tributação (normal, reduzido e nenhum.)</span><span class="sxs-lookup"><span data-stu-id="90452-153">The **Format to learn parameterized calls** ER format is designed to generate a tax statement in XML format that presents several levels of taxation (regular, reduced, and none).</span></span> <span data-ttu-id="90452-154">Cada nível tem um número diferente de detalhes.</span><span class="sxs-lookup"><span data-stu-id="90452-154">Each level has a different number of details.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ReviewFormat.PNG)

5.  <span data-ttu-id="90452-156">Na guia **Mapeamento**, expanda os itens **Modelo**, **Dados** e **Resumo**.</span><span class="sxs-lookup"><span data-stu-id="90452-156">On the **Mapping** tab, expand the **Model**, **Data**, and **Summary** items.</span></span>

    <span data-ttu-id="90452-157">A fonte de dados **Model.Data.Summary** retorna a lista de transações de imposto.</span><span class="sxs-lookup"><span data-stu-id="90452-157">The **Model.Data.Summary** data source returns the list of tax transactions.</span></span> <span data-ttu-id="90452-158">Essas transações são resumidas por código de imposto.</span><span class="sxs-lookup"><span data-stu-id="90452-158">These transactions are summarized by tax code.</span></span> <span data-ttu-id="90452-159">Para essa fonte de dados, o campo calculado **Model.Data.Summary.Level** foi configurado para retornar o código do nível de tributação de cada registro resumido.</span><span class="sxs-lookup"><span data-stu-id="90452-159">For this data source, the **Model.Data.Summary.Level** calculated field has been configured to return the code for the taxation level of each summarized record.</span></span> <span data-ttu-id="90452-160">Para qualquer código de imposto que pode ser recuperado da fonte de dados **Model.Data.Summary** em tempo de execução. o campo calculado retorna o código do nível de tributação (**Normal**, **Reduzido**, **Nenhum** ou **Outro**) como um valor de texto.</span><span class="sxs-lookup"><span data-stu-id="90452-160">For any tax code that can be retrieved from the **Model.Data.Summary** data source at runtime, the calculated field returns the taxation level code (**Regular**, **Reduced**, **None**, or **Other**) as a text value.</span></span> <span data-ttu-id="90452-161">O campo calculado **Model.Data.Summary.Level** é usado para filtrar registros da fonte de dados **Model.Data.Summary** e inserir os dados filtrados em cada elemento XML que representa um nível de tributação usando os campos **Model.Data2.Level1**, **Model.Data2.Level2** e **Model.Data2.Level3**.</span><span class="sxs-lookup"><span data-stu-id="90452-161">The **Model.Data.Summary.Level** calculated field is used to filter records of the **Model.Data.Summary** data source and enter the filtered data in each XML element that represents a taxation level by using the **Model.Data2.Level1**, **Model.Data2.Level2**, and **Model.Data2.Level3** fields.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ReviewFormat-Data2Fld.PNG)

    <span data-ttu-id="90452-163">O campo calculado **Model.Data.Summary.Level** foi configurado para conter uma expressão de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-163">The **Model.Data.Summary.Level** calculated field has been configured so that it contains an ER expression.</span></span> <span data-ttu-id="90452-164">Observe que os códigos de imposto (**VAT19**, **InVAT19**, **VAT7**, **InVAT7**, **THIRD** e **InVAT0**) são embutidos em código nesta configuração.</span><span class="sxs-lookup"><span data-stu-id="90452-164">Note that tax codes (**VAT19**, **InVAT19**, **VAT7**, **InVAT7**, **THIRD**, and **InVAT0**) are hardcoded into this configuration.</span></span> <span data-ttu-id="90452-165">Portanto, esse formato de ER depende da entidade legal onde esses códigos de imposto foram configurados.</span><span class="sxs-lookup"><span data-stu-id="90452-165">Therefore, this ER format is dependent on the legal entity where these tax codes were configured.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ReviewFormat-LevelFld.PNG)

    <span data-ttu-id="90452-167">Para dar suporte a um conjunto de códigos de imposto diferente para cada entidade legal, você deve seguir estas etapas:</span><span class="sxs-lookup"><span data-stu-id="90452-167">To support a different set of tax codes for each legal entity, you must follow these steps:</span></span>

    - <span data-ttu-id="90452-168">Criar uma versão derivada do formato de ER para cada entidade legal.</span><span class="sxs-lookup"><span data-stu-id="90452-168">Create a derived version of the ER format for each legal entity.</span></span>
    - <span data-ttu-id="90452-169">Atualize os códigos de imposto no campo calculado **Model.Data.Summary.Level** com base na configuração da entidade legal.</span><span class="sxs-lookup"><span data-stu-id="90452-169">Update the tax codes in the **Model.Data.Summary.Level** calculated field, based on the legal entity setting.</span></span>

6.  <span data-ttu-id="90452-170">Feche a página **Designer de formato**.</span><span class="sxs-lookup"><span data-stu-id="90452-170">Close the **Format designer** page.</span></span>

## <a name="create-a-derived-format"></a><span data-ttu-id="90452-171">Criar um formato derivado</span><span class="sxs-lookup"><span data-stu-id="90452-171">Create a derived format</span></span>

<span data-ttu-id="90452-172">Em seguida, use o recurso de parâmetros específicos do aplicativo de ER para dar suporte a um conjunto diferente de códigos de imposto para cada entidade legal em um único formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-172">Next, you will use the ER application-specific parameters feature to support a different set of tax codes for each legal entity in a single ER format.</span></span>

1.  <span data-ttu-id="90452-173">Na árvore de configuração, expanda o conteúdo do item **Modelo para conhecer chamadas parametrizadas**.</span><span class="sxs-lookup"><span data-stu-id="90452-173">In the configuration tree, expand the contents of the **Model to learn parameterized calls** item.</span></span>
2.  <span data-ttu-id="90452-174">Selecione o item **Formato para conhecer chamadas parametrizadas**.</span><span class="sxs-lookup"><span data-stu-id="90452-174">Select the **Format to learn parameterized calls** item.</span></span>
3.  <span data-ttu-id="90452-175">Selecione **Criar configuração**.</span><span class="sxs-lookup"><span data-stu-id="90452-175">Select **Create configuration**.</span></span>
4.  <span data-ttu-id="90452-176">Selecione a opção **Derivar do Nome: Formato para conhecer chamadas parametrizadas, Microsoft**.</span><span class="sxs-lookup"><span data-stu-id="90452-176">Select the **Derive from Name: Format to learn parameterized calls, Microsoft** option.</span></span>
5.  <span data-ttu-id="90452-177">No campo **Nome**, insira **Formato para saber como pesquisar dados de LE**.</span><span class="sxs-lookup"><span data-stu-id="90452-177">In the **Name** field, enter **Format to learn how to lookup LE data**.</span></span>
6.  <span data-ttu-id="90452-178">Selecione **Criar configuração**.</span><span class="sxs-lookup"><span data-stu-id="90452-178">Select **Create configuration**.</span></span>

## <a name="configure-a-derived-format"></a><span data-ttu-id="90452-179">Configurar um formato derivado</span><span class="sxs-lookup"><span data-stu-id="90452-179">Configure a derived format</span></span>

### <a name="add-a-format-enumeration"></a><span data-ttu-id="90452-180">Adicionar uma enumeração de formato</span><span class="sxs-lookup"><span data-stu-id="90452-180">Add a format enumeration</span></span>

<span data-ttu-id="90452-181">Em seguida, você adicionará uma nova enumeração de formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-181">Next, you will add a new ER format enumeration.</span></span> <span data-ttu-id="90452-182">Os valores dessa enumeração de formato serão apresentados aos usuários empresariais, que especificarão conjuntos de códigos de imposto dependentes da entidade legal para os vários níveis de tributação usados no formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-182">The values of this format enumeration will be presented to business users, who will specify legal entity–dependent sets of tax codes for the various taxation levels that are used in the ER format.</span></span>

1.  <span data-ttu-id="90452-183">Selecione **Designer**.</span><span class="sxs-lookup"><span data-stu-id="90452-183">Select **Designer**.</span></span>
2.  <span data-ttu-id="90452-184">Selecione **Enumerações de formato**.</span><span class="sxs-lookup"><span data-stu-id="90452-184">Select **Format enumerations**.</span></span>
3.  <span data-ttu-id="90452-185">Selecione **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="90452-185">Select **Add**.</span></span>
4.  <span data-ttu-id="90452-186">No campo **Nome**, insira **Lista de níveis de tributação**.</span><span class="sxs-lookup"><span data-stu-id="90452-186">In the **Name** field, enter **List of taxation levels**.</span></span>
5.  <span data-ttu-id="90452-187">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="90452-187">Select **Save**.</span></span>
6.  <span data-ttu-id="90452-188">Na guia **Valores de enumeração de formato**, selecione **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="90452-188">On the **Format enumeration values** tab, select **Add**.</span></span>
7.  <span data-ttu-id="90452-189">No campo **Nome**, insira **Tributação normal**.</span><span class="sxs-lookup"><span data-stu-id="90452-189">In the **Name** field, enter **Regular taxation**.</span></span>
8.  <span data-ttu-id="90452-190">Selecione **Adicionar** novamente.</span><span class="sxs-lookup"><span data-stu-id="90452-190">Select **Add** again.</span></span>
9.  <span data-ttu-id="90452-191">No campo **Nome**, insira **Tributação reduzida**.</span><span class="sxs-lookup"><span data-stu-id="90452-191">In the **Name** field, enter **Reduced taxation**.</span></span>
10. <span data-ttu-id="90452-192">Selecione **Adicionar** novamente.</span><span class="sxs-lookup"><span data-stu-id="90452-192">Select **Add** again.</span></span>
11. <span data-ttu-id="90452-193">No campo **Nome**, insira **Sem tributação**.</span><span class="sxs-lookup"><span data-stu-id="90452-193">In the **Name** field, enter **No taxation**.</span></span>
12. <span data-ttu-id="90452-194">Selecione **Adicionar** novamente.</span><span class="sxs-lookup"><span data-stu-id="90452-194">Select **Add** again.</span></span>
13. <span data-ttu-id="90452-195">No campo **Nome**, insira **Outro**.</span><span class="sxs-lookup"><span data-stu-id="90452-195">In the **Name** field, enter **Other**.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-Enum.PNG)

    <span data-ttu-id="90452-197">Como os usuários empresariais podem utilizar diferentes idiomas para especificar conjuntos de códigos de imposto dependentes da entidade legal, recomendamos traduzir os valores dessa enumeração para os idiomas configurados como preferenciais para esses usuários no Finance.</span><span class="sxs-lookup"><span data-stu-id="90452-197">Because the business users might use different languages to specify legal entity–dependent sets of tax codes, we recommend that you translate the values of this enumeration into the languages that are configured as the preferred languages for those users in Finance.</span></span>

14. <span data-ttu-id="90452-198">Selecione o registro **Sem tributação** .</span><span class="sxs-lookup"><span data-stu-id="90452-198">Select the **No taxation** record.</span></span>
15. <span data-ttu-id="90452-199">Clique no campo **Etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="90452-199">Click in the **Label** field.</span></span>
16. <span data-ttu-id="90452-200">Selecione **Traduzir**.</span><span class="sxs-lookup"><span data-stu-id="90452-200">Select **Translate**.</span></span>
17. <span data-ttu-id="90452-201">No painel **Tradução do texto**, no campo **Id da etiqueta**, insira **LBL_LEVELENUM_NO**.</span><span class="sxs-lookup"><span data-stu-id="90452-201">In the **Text translation** pane, in the **Label Id** field, enter **LBL_LEVELENUM_NO**.</span></span>
18. <span data-ttu-id="90452-202">No campo **Texto no idioma padrão**, insira **Sem tributação**.</span><span class="sxs-lookup"><span data-stu-id="90452-202">In the **Text in default language** field, enter **No taxation**.</span></span>
19. <span data-ttu-id="90452-203">No campo **Idioma**, selecione **DE**.</span><span class="sxs-lookup"><span data-stu-id="90452-203">In the **Language** field, select **DE**.</span></span>
20. <span data-ttu-id="90452-204">No campo **Texto traduzido**, digite **keine Besteuerung**.</span><span class="sxs-lookup"><span data-stu-id="90452-204">In the **Translated text** field, enter **keine Besteuerung**.</span></span>
21. <span data-ttu-id="90452-205">Selecione **Traduzir**.</span><span class="sxs-lookup"><span data-stu-id="90452-205">Select **Translate**.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-EnumTranslate.PNG)

22. <span data-ttu-id="90452-207">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="90452-207">Select **Save**.</span></span>
23. <span data-ttu-id="90452-208">Feche a página **Enumerações de formato**.</span><span class="sxs-lookup"><span data-stu-id="90452-208">Close the **Format enumerations** page.</span></span>

### <a name="add-a-new-lookup-data-source"></a><span data-ttu-id="90452-209">Adicionar uma nova fonte de dados de pesquisa</span><span class="sxs-lookup"><span data-stu-id="90452-209">Add a new lookup data source</span></span>

<span data-ttu-id="90452-210">Em seguida, você adicionará uma nova fonte de dados para especificar como os usuários empresariais especificarão regras dependentes da entidade legal para reconhecer o nível de tributação correto para cada registro de transação resumido.</span><span class="sxs-lookup"><span data-stu-id="90452-210">Next, you will add a new data source to specify how business users will specify legal entity–dependent rules to recognize the correct taxation level for each summarized transaction record.</span></span>

1.  <span data-ttu-id="90452-211">Na guia **Mapeamento**, selecione **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="90452-211">On the **Mapping** tab, select **Add**.</span></span>
2.  <span data-ttu-id="90452-212">Selecione **Enumeração de formato\Pesquisa**.</span><span class="sxs-lookup"><span data-stu-id="90452-212">Select **Format enumeration\Lookup**.</span></span>

    <span data-ttu-id="90452-213">Você apenas identificou que cada regra que os usuários empresariais especificarem para reconhecimento do nível de tributação retornará um valor de uma enumeração do formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-213">You just identified that each rule that business users specify for taxation level recognition will return a value of an ER format enumeration.</span></span> <span data-ttu-id="90452-214">Observe que o tipo de fonte de dados **Pesquisa** pode ser acessado nos blocos **Modelo de dados** e **Dynamics 365 for Operations**, além do bloco **Enumeração de formato**.</span><span class="sxs-lookup"><span data-stu-id="90452-214">Notice that the **Lookup** data source type can be accessed under the **Data model** and **Dynamics 365 for Operations** blocks in addition to the **Format enumeration** block.</span></span> <span data-ttu-id="90452-215">Portanto, as enumerações de modelo de dados de ER e as enumerações de aplicativo podem ser usados para especificar o tipo de valores retornados para fontes de dados desse tipo.</span><span class="sxs-lookup"><span data-stu-id="90452-215">Therefore, ER data model enumerations and application enumerations can be used to specify the type of values that is are returned for data sources of that type.</span></span>
    
3.  <span data-ttu-id="90452-216">No campo **Nome**, digite **Seletor**.</span><span class="sxs-lookup"><span data-stu-id="90452-216">In the **Name** field, enter **Selector**.</span></span>
4.  <span data-ttu-id="90452-217">No campo **Enumeração de formato**, selecione **Lista de níveis de tributação**.</span><span class="sxs-lookup"><span data-stu-id="90452-217">In the **Format enumeration** field, select **List of taxation levels**.</span></span>

    <span data-ttu-id="90452-218">Você apenas especificou que, para cada regra especificada nessa fonte dados, um usuário empresarial deve selecionar um dos valores da enumeração de formato **Lista de níveis de tributação** como um valor retornado.</span><span class="sxs-lookup"><span data-stu-id="90452-218">You just specified that, for each rule that is specified in this data source, a business user must select one of the values of the **List of taxation levels** format enumeration as a returned value.</span></span>
    
5.  <span data-ttu-id="90452-219">Selecione **Editar pesquisa**.</span><span class="sxs-lookup"><span data-stu-id="90452-219">Select **Edit lookup**.</span></span>
6.  <span data-ttu-id="90452-220">Selecione **Colunas**.</span><span class="sxs-lookup"><span data-stu-id="90452-220">Select **Columns**.</span></span>
7.  <span data-ttu-id="90452-221">Expanda o item **Modelo**.</span><span class="sxs-lookup"><span data-stu-id="90452-221">Expand the **Model** item.</span></span>
8.  <span data-ttu-id="90452-222">Expanda o item **Dados**.</span><span class="sxs-lookup"><span data-stu-id="90452-222">Expand the **Data** item.</span></span>
9.  <span data-ttu-id="90452-223">Expanda o item **Imposto**.</span><span class="sxs-lookup"><span data-stu-id="90452-223">Expand the **Tax** item.</span></span>
10. <span data-ttu-id="90452-224">Selecione o item **Model.Data.Tax.Code**.</span><span class="sxs-lookup"><span data-stu-id="90452-224">Select the **Model.Data.Tax.Code** item.</span></span>
11. <span data-ttu-id="90452-225">Selecione o botão **Adicionar** (a seta para a direita.)</span><span class="sxs-lookup"><span data-stu-id="90452-225">Select the **Add** button (the right arrow).</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-Lookup1.PNG)

    <span data-ttu-id="90452-227">Você apenas especificou que, para cada regra especificada nessa fonte dados para reconhecimento do nível de tributação, um usuário empresarial deve selecionar um dos códigos de imposto como uma condição.</span><span class="sxs-lookup"><span data-stu-id="90452-227">You just specified that, for each rule that is specified in this data source for taxation level recognition, a business user must select one of the tax codes as a condition.</span></span> <span data-ttu-id="90452-228">A lista de códigos de imposto que o usuário empresarial pode selecionar será retornada pela fonte de dados **Model.Data.Tax**.</span><span class="sxs-lookup"><span data-stu-id="90452-228">The list of tax codes that the business user can select will be returned by the **Model.Data.Tax** data source.</span></span> <span data-ttu-id="90452-229">Como essa fonte dados contém o campo **Nome**, o nome do código de imposto será mostrado para cada valor de código de imposto na pesquisa apresentada para o usuário empresarial.</span><span class="sxs-lookup"><span data-stu-id="90452-229">Because this data source contains the **Name** field, the name of the tax code will be shown for each tax code value in the lookup that is presented to the business user.</span></span>
    
12. <span data-ttu-id="90452-230">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="90452-230">Select **OK**.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-Lookup2.PNG)

    <span data-ttu-id="90452-232">Os usuários empresariais podem adicionar várias regras como registros dessa fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="90452-232">Business users can add multiple rules as records of this data source.</span></span> <span data-ttu-id="90452-233">Cada registro será numerado por uma linha por código.</span><span class="sxs-lookup"><span data-stu-id="90452-233">Each record will be numbered by a line code.</span></span> <span data-ttu-id="90452-234">As regras serão avaliadas em ordem crescente de número de linha.</span><span class="sxs-lookup"><span data-stu-id="90452-234">Rules will be evaluated in order of increasing line number.</span></span>

    <span data-ttu-id="90452-235">Pelo fato de você ter selecionado o campo **Código de imposto** como uma condição para as regras nessa fonte dados de pesquisa e como o **Código de imposto** é configurado como um campo do tipo de dados **String**, cada regra será avaliada em tempo de execução comparando o código de imposto passado para a fonte de dados com o código de imposto definido nesse registro da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="90452-235">Because you selected the **Tax code** field as a condition for rules in this lookup data source, and because **Tax code** is set up as a field of the **String** data type, each rule will be evaluated at runtime by comparing the tax code that is passed to the data source with the tax code that is defined in this record of the data source.</span></span>

    <span data-ttu-id="90452-236">Quando uma regra que atende à condição configurada é encontrada, essa fonte dados retorna o valor de pesquisa da regra definido no campo **Resultados da pesquisa**.</span><span class="sxs-lookup"><span data-stu-id="90452-236">When a rule that satisfies the configured condition is found, this data source returns the lookup value of the rule that is defined in the **Lookup result** field.</span></span> <span data-ttu-id="90452-237">Se nenhuma regra for encontrada, será gerada uma exceção para notificar o usuário de que a fonte de dados atual não pode retornar um valor correto.</span><span class="sxs-lookup"><span data-stu-id="90452-237">If no rule is found, an exception is thrown to notify the user that the current data source can't return a correct value.</span></span>

13. <span data-ttu-id="90452-238">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="90452-238">Select **Save**.</span></span>
14. <span data-ttu-id="90452-239">Feche a página **Designer de pesquisa**.</span><span class="sxs-lookup"><span data-stu-id="90452-239">Close the **Lookup designer** page.</span></span>
15. <span data-ttu-id="90452-240">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="90452-240">Select **OK**.</span></span>

    <span data-ttu-id="90452-241">Observe que você adicionou uma nova fonte de dados que retornará o nível de tributação como o valor da enumeração de formato **Lista de níveis de tributação** para qualquer código de imposto passado para a fonte de dados como argumento do parâmetro **Código** do tipo de dados **String**.</span><span class="sxs-lookup"><span data-stu-id="90452-241">Notice that you added a new data source that will return the taxation level as the value of the **List of taxation levels** format enumeration for any tax code that is passed to the data source as the argument of the **Code** parameter of the **String** data type.</span></span>
    
    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFld.PNG)

    <span data-ttu-id="90452-243">Observe que a avaliação das regras configuradas depende do tipo de dados dos campos que foram selecionados para definir as condições dessas regras.</span><span class="sxs-lookup"><span data-stu-id="90452-243">Note that the evaluation of configured rules depends on the data type of the fields that have been selected to define conditions of those rules.</span></span> <span data-ttu-id="90452-244">Quando você selecionar um campo configurado como um campo de tipo de dados **Numérico** ou **Data**, os critérios serão diferentes dos critérios descritos anteriormente para o tipo de dados **String**.</span><span class="sxs-lookup"><span data-stu-id="90452-244">When you select a field that is configured as a field of either the **Numeric** or **Date** data type, the criteria will differ from the criteria that were described earlier for the **String** data type.</span></span> <span data-ttu-id="90452-245">Para os campos **Numérico** e **Data**, a regra deve ser especificada como um intervalo de valores.</span><span class="sxs-lookup"><span data-stu-id="90452-245">For **Numeric** and **Date** fields, the rule must be specified as a range of values.</span></span> <span data-ttu-id="90452-246">A condição de regra será considerada atendida quando um valor passado para a fonte de dados estiver no intervalo configurado.</span><span class="sxs-lookup"><span data-stu-id="90452-246">The condition of the rule will then be considered satisfied when a value that is passed to the data source is in the configured range.</span></span>
    
    <span data-ttu-id="90452-247">A ilustração a seguir mostra um exemplo desse tipo de configuração.</span><span class="sxs-lookup"><span data-stu-id="90452-247">The following illustration shows an example of this type of setup.</span></span> <span data-ttu-id="90452-248">Além do campo **Model.Data.Tax.Code** do tipo de dados **String**, o campo **Model.Tax.Summary.Base** do tipo de dados **Real** é usado para especificar as condições para uma fonte de dados de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="90452-248">In addition to the **Model.Data.Tax.Code** field of the **String** data type, the **Model.Tax.Summary.Base** field of the **Real** data type is used to specify conditions for a lookup data source.</span></span>
    
    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFld2.PNG)

    <span data-ttu-id="90452-250">Como os campos **Model.Data.Tax.Code** e **Model.Tax.Summary.Base** são selecionados para essa fonte dados de pesquisa, cada regra da fonte de dados será configurada da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="90452-250">Because the **Model.Data.Tax.Code** and **Model.Tax.Summary.Base** fields are selected for this lookup data source, each rule of this data source will be configured in the following way:</span></span>
    
    -   <span data-ttu-id="90452-251">Na lista que é exibida, o valor da enumeração de formato **Lista de níveis de tributação** deve ser selecionado como um valor retornado.</span><span class="sxs-lookup"><span data-stu-id="90452-251">In the list that is presented, the value of the **List of taxation levels** format enumeration must be selected as a returned value.</span></span>
    -   <span data-ttu-id="90452-252">O código de imposto ser inserido como uma condição dessa regra.</span><span class="sxs-lookup"><span data-stu-id="90452-252">The tax code must be entered as a condition of this rule.</span></span> <span data-ttu-id="90452-253">Somente os códigos de imposto fornecidos pela fonte de dados **Model.Data.Tax** são aplicáveis.</span><span class="sxs-lookup"><span data-stu-id="90452-253">Only tax codes that are provided by the **Model.Data.Tax** data source are applicable.</span></span>
    -   <span data-ttu-id="90452-254">Os valores mínimo e máximo do valor base do imposto devem ser inseridos como condições da regra.</span><span class="sxs-lookup"><span data-stu-id="90452-254">Minimum and maximum values of the tax base amount must be entered as conditions of this rule.</span></span>

    <span data-ttu-id="90452-255">Cada regra dessa fonte de dados será avaliada da seguinte maneira em tempo de execução:</span><span class="sxs-lookup"><span data-stu-id="90452-255">Here is how each rule of this data source will be evaluated at runtime:</span></span>
    -   <span data-ttu-id="90452-256">O código do tipo de dados **String** que foi passado para a fonte dados é igual ao código de imposto de uma regra?</span><span class="sxs-lookup"><span data-stu-id="90452-256">Does the code of the **String** data type that was passed to this data source equal the tax code of a rule?</span></span>
    -   <span data-ttu-id="90452-257">O valor do tipo de dados **Real** que foi passado para a fonte de dados está entre valores mínimo e máximo especificados?</span><span class="sxs-lookup"><span data-stu-id="90452-257">Does the value of the **Real** data type that was passed to this data source fall between specific minimum and maximum values?</span></span>

    <span data-ttu-id="90452-258">Uma regra será considerada aplicável quando as duas condições forem satisfeitas.</span><span class="sxs-lookup"><span data-stu-id="90452-258">A rule will be considered applicable when both conditions are satisfied.</span></span>

### <a name="translate-the-label-of-the-lookup-data-source-that-was-added"></a><span data-ttu-id="90452-259">Traduzir a etiqueta da fonte de dados de consulta adicionada</span><span class="sxs-lookup"><span data-stu-id="90452-259">Translate the label of the lookup data source that was added</span></span>

<span data-ttu-id="90452-260">Como os usuários empresariais podem utilizar diferentes idiomas para especificar conjuntos de códigos de imposto dependentes da entidade legal, recomendamos que você traduza a etiqueta de qualquer fonte de dados de pesquisa que adicionar para que ela seja apresentada no idioma preferencial de cada usuário na página correspondente.</span><span class="sxs-lookup"><span data-stu-id="90452-260">Because business users might use different languages to specify legal entity–dependent sets of tax codes, we recommend that you translate the label of any lookup data source that you add, so that it's presented in each user's preferred language on the corresponding page.</span></span>

1.  <span data-ttu-id="90452-261">Selecione a fonte de dados **Model.Data.Selector**.</span><span class="sxs-lookup"><span data-stu-id="90452-261">Select the **Model.Data.Selector** data source.</span></span>
2.  <span data-ttu-id="90452-262">Selecione **Editar**.</span><span class="sxs-lookup"><span data-stu-id="90452-262">Select **Edit**.</span></span>
3.  <span data-ttu-id="90452-263">Clique no campo **Etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="90452-263">Click in the **Label** field.</span></span>
4.  <span data-ttu-id="90452-264">Selecione **Traduzir**.</span><span class="sxs-lookup"><span data-stu-id="90452-264">Select **Translate**.</span></span>
5.  <span data-ttu-id="90452-265">No painel **Tradução do texto**, no campo **Id da etiqueta**, insira **LBL_SELECTOR_DS**.</span><span class="sxs-lookup"><span data-stu-id="90452-265">In the **Text translation** pane, in the **Label Id** field, enter **LBL_SELECTOR_DS**.</span></span>
6.  <span data-ttu-id="90452-266">No campo **Texto no idioma padrão**, insira **Selecionar nível de tributação por código de imposto**.</span><span class="sxs-lookup"><span data-stu-id="90452-266">In the **Text in default language** field, enter **Select tax level by tax code**.</span></span>
7.  <span data-ttu-id="90452-267">No campo **Idioma**, selecione **DE**.</span><span class="sxs-lookup"><span data-stu-id="90452-267">In the **Language** field, select **DE**.</span></span>
8.  <span data-ttu-id="90452-268">No campo **Texto traduzido**, insira **Steuerebene für Steuerkennzeichen auswählen**.</span><span class="sxs-lookup"><span data-stu-id="90452-268">In the **Translated text** field, enter **Steuerebene für Steuerkennzeichen auswählen**.</span></span>
9.  <span data-ttu-id="90452-269">Selecione **Traduzir**.</span><span class="sxs-lookup"><span data-stu-id="90452-269">Select **Translate**.</span></span>
10. <span data-ttu-id="90452-270">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="90452-270">Select **OK**.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFldTranslate.PNG)

### <a name="add-a-new-field-to-consume-the-configured-lookup"></a><span data-ttu-id="90452-272">Adicionar um novo campo para consumir a pesquisa configurada</span><span class="sxs-lookup"><span data-stu-id="90452-272">Add a new field to consume the configured lookup</span></span>

1.  <span data-ttu-id="90452-273">Expanda o item **Model.Data**.</span><span class="sxs-lookup"><span data-stu-id="90452-273">Expand the **Model.Data** item.</span></span>
2.  <span data-ttu-id="90452-274">Selecione o item **Model.Data.Summary**.</span><span class="sxs-lookup"><span data-stu-id="90452-274">Select the **Model.Data.Summary** item.</span></span>
3.  <span data-ttu-id="90452-275">Selecione **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="90452-275">Select **Add**.</span></span>
4.  <span data-ttu-id="90452-276">Selecione **Funções/Campo calculado**.</span><span class="sxs-lookup"><span data-stu-id="90452-276">Select **Functions/Calculated field**.</span></span>
5.  <span data-ttu-id="90452-277">No campo **Nome**, insira **LevelByLookup**.</span><span class="sxs-lookup"><span data-stu-id="90452-277">In the **Name** field, enter **LevelByLookup**.</span></span>
6.  <span data-ttu-id="90452-278">Selecione **Editar fórmula**.</span><span class="sxs-lookup"><span data-stu-id="90452-278">Select **Edit formula**.</span></span>
7.  <span data-ttu-id="90452-279">No campo **Fórmula**, insira **Model.Selector(Model.Data.Summary.Code)**.</span><span class="sxs-lookup"><span data-stu-id="90452-279">In the **Formula field**, enter **Model.Selector(Model.Data.Summary.Code)**.</span></span>
8.  <span data-ttu-id="90452-280">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="90452-280">Select **Save**.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-AddLevelByLookupFld.PNG)

9.  <span data-ttu-id="90452-282">Feche a página **Editor de fórmulas**.</span><span class="sxs-lookup"><span data-stu-id="90452-282">Close the **Formula editor** page.</span></span>
10. <span data-ttu-id="90452-283">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="90452-283">Select **OK**.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-AddLevelByLookupFld2.PNG)

    <span data-ttu-id="90452-285">Observe que o campo calculado **LevelByLookup** que você adicionou retornará o nível de tributação como o valor da enumeração de formato **Lista de níveis de tributação** para cada registro resumido de transações de imposto.</span><span class="sxs-lookup"><span data-stu-id="90452-285">Notice that the **LevelByLookup** calculated field that you added will return the taxation level as the value of the **List of taxation levels** format enumeration for each summarized tax transactions record.</span></span> <span data-ttu-id="90452-286">O código de imposto do registro será passado para a fonte de dados de pesquisa **Model.Selector** e o conjunto de regras para essa fonte de dados será usado para selecionar o nível de tributação correto.</span><span class="sxs-lookup"><span data-stu-id="90452-286">The tax code of the record will be passed to the **Model.Selector** lookup data source, and the set of rules for this data source will be used to select the correct taxation level.</span></span>

### <a name="add-a-new-format-enumeration-based-data-source"></a><span data-ttu-id="90452-287">Adicionar uma nova fonte de dados com base em enumeração de formato</span><span class="sxs-lookup"><span data-stu-id="90452-287">Add a new format enumeration-based data source</span></span>

<span data-ttu-id="90452-288">Em seguida, você adicionará uma nova fonte de dados que faz referência à enumeração de formato adicionada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="90452-288">Next, you will add a new data source that refers to the format enumeration that you added earlier.</span></span> <span data-ttu-id="90452-289">Os valores dessa fonte de dados serão usados posteriormente em uma expressão de formato de ER.</span><span class="sxs-lookup"><span data-stu-id="90452-289">Values of this data source will be used in an ER format expression later.</span></span>

1.  <span data-ttu-id="90452-290">Selecione **Adicionar raiz**.</span><span class="sxs-lookup"><span data-stu-id="90452-290">Select **Add root**.</span></span>
2.  <span data-ttu-id="90452-291">Selecione **Enumerações de formato\Enumeração**.</span><span class="sxs-lookup"><span data-stu-id="90452-291">Select **Format enumerations\Enumeration**.</span></span>
3.  <span data-ttu-id="90452-292">No campo **Nome**, insira **TaxationLevel**.</span><span class="sxs-lookup"><span data-stu-id="90452-292">In the **Name** field, enter **TaxationLevel**.</span></span>
4.  <span data-ttu-id="90452-293">No campo **Enumeração de formato**, selecione **Lista de níveis de tributação**.</span><span class="sxs-lookup"><span data-stu-id="90452-293">In the **Format enumeration** field, select **List of taxation levels**.</span></span>
5.  <span data-ttu-id="90452-294">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="90452-294">Select **Save**.</span></span>

### <a name="modify-an-existing-field-to-start-to-use-the-lookup"></a><span data-ttu-id="90452-295">Modificar um campo existente para começar a usar a pesquisa</span><span class="sxs-lookup"><span data-stu-id="90452-295">Modify an existing field to start to use the lookup</span></span>

<span data-ttu-id="90452-296">Em seguida, você modificará o campo calculado existente para que ele use a fonte de dados de pesquisa configurada para retornar o valor de nível de tributação correto, dependendo do código de imposto.</span><span class="sxs-lookup"><span data-stu-id="90452-296">Next, you will modify the existing calculated field so that it uses the configured lookup data source to return the correct taxation level value, depending on the tax code.</span></span>

1.  <span data-ttu-id="90452-297">Selecione o item **Model.Data.Summary.Level**.</span><span class="sxs-lookup"><span data-stu-id="90452-297">Select the **Model.Data.Summary.Level** item.</span></span>
2.  <span data-ttu-id="90452-298">Selecione **Editar**.</span><span class="sxs-lookup"><span data-stu-id="90452-298">Select **Edit**.</span></span>
3.  <span data-ttu-id="90452-299">Selecione **Editar fórmula**.</span><span class="sxs-lookup"><span data-stu-id="90452-299">Select **Edit formula**.</span></span>

    <span data-ttu-id="90452-300">Observe que a expressão atual do campo **Model.Data.Summary.Level** inclui os seguintes códigos de imposto codificados:</span><span class="sxs-lookup"><span data-stu-id="90452-300">Notice that the current expression of the **Model.Data.Summary.Level** field includes the following hard-coded tax codes:</span></span>
    
    <span data-ttu-id="90452-301">CASE (@.Code, "VAT19", "Normal", "InVAT19", "Normal", "VAT7", "Reduzido", "InVAT7", "Reduzido", "THIRD", "Nenhum", "InVAT0", "Nenhum", "Outro")</span><span class="sxs-lookup"><span data-stu-id="90452-301">CASE (@.Code, "VAT19", "Regular", "InVAT19", "Regular", "VAT7", "Reduced", "InVAT7", "Reduced", "THIRD", "None", "InVAT0", "None", "Other")</span></span>

4.  <span data-ttu-id="90452-302">No campo **Fórmula**, insira **CASE(@.LevelByLookup, TaxationLevel.'Tributação normal',"Normal”, TaxationLevel.'Tributação reduzida', "Reduzido", TaxationLevel.'Sem tributação', "Nenhuma", "Outro")**.</span><span class="sxs-lookup"><span data-stu-id="90452-302">In the **Formula** field, enter **CASE(@.LevelByLookup, TaxationLevel.'Regular taxation', "Regular", TaxationLevel.'Reduced taxation', "Reduced", TaxationLevel.'No taxation', "None", "Other")**.</span></span>

    ![Página do designer de operação de ER](./media/RCS-AppSpecParms-ConfigureFormat-ChangeLookupFld.PNG)
    
    <span data-ttu-id="90452-304">Observe que agora a expressão do campo **Model.Data.Summary.Level** retornará o nível de tributação com base no código de imposto do registro atual e no conjunto de regras configurado por um usuário empresarial na fonte de dados de pesquisa **Model.Data.Selector**.</span><span class="sxs-lookup"><span data-stu-id="90452-304">Notice that the expression of the **Model.Data.Summary.Level** field will now return the taxation level, based on the tax code of the current record and the set of rules that that a business user configures in the **Model.Data.Selector** lookup data source.</span></span>
    
5.  <span data-ttu-id="90452-305">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="90452-305">Select **Save**.</span></span>
6.  <span data-ttu-id="90452-306">Feche a página **Designer de fórmulas**.</span><span class="sxs-lookup"><span data-stu-id="90452-306">Close **Formula designer** page.</span></span>
7.  <span data-ttu-id="90452-307">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="90452-307">Select **OK**.</span></span>
8.  <span data-ttu-id="90452-308">Selecione **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="90452-308">Select **Save**.</span></span>
9.  <span data-ttu-id="90452-309">Feche a página **Designer de formato**.</span><span class="sxs-lookup"><span data-stu-id="90452-309">Close **Format designer** page.</span></span>

## <a name="complete-the-draft-version-of-a-derived-format"></a><span data-ttu-id="90452-310">Concluir a versão de rascunho de um formato derivado</span><span class="sxs-lookup"><span data-stu-id="90452-310">Complete the draft version of a derived format</span></span>

1.  <span data-ttu-id="90452-311">Na guia rápida **Versões**, selecione **Alterar status**.</span><span class="sxs-lookup"><span data-stu-id="90452-311">On the **Versions** fast tab, select **Change status**.</span></span>
2.  <span data-ttu-id="90452-312">Selecione **Concluir**.</span><span class="sxs-lookup"><span data-stu-id="90452-312">Select **Complete**.</span></span>
3.  <span data-ttu-id="90452-313">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="90452-313">Select **OK**.</span></span>

## <a name="export-completed-version-of-modified-format"></a><span data-ttu-id="90452-314">Exportar a versão concluída de um formato modificado</span><span class="sxs-lookup"><span data-stu-id="90452-314">Export completed version of modified format</span></span>

1.  <span data-ttu-id="90452-315">Na árvore de configuração, selecione o item **Formato para saber como pesquisar dados de LE**.</span><span class="sxs-lookup"><span data-stu-id="90452-315">In the configuration tree, select the **Format to learn how to lookup LE data** item.</span></span>
2.  <span data-ttu-id="90452-316">Na guia rápida **Versões**, selecione o registro com o status **Concluído**.</span><span class="sxs-lookup"><span data-stu-id="90452-316">On the **Versions** fast tab, select the record that has a status of **Completed**.</span></span>
3.  <span data-ttu-id="90452-317">Selecione **Taxa de câmbio**.</span><span class="sxs-lookup"><span data-stu-id="90452-317">Select **Exchange**.</span></span>
4.  <span data-ttu-id="90452-318">Selecione **Exportar como arquivo XML**.</span><span class="sxs-lookup"><span data-stu-id="90452-318">Select **Export as XML file**.</span></span>
5.  <span data-ttu-id="90452-319">Selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="90452-319">Select **OK**.</span></span>
6.  <span data-ttu-id="90452-320">O navegador da Web baixa um arquivo **Formato para saber como pesquisar dados de LE.xml**.</span><span class="sxs-lookup"><span data-stu-id="90452-320">The web browser downloads a **Format to learn how to lookup LE data.xml** file.</span></span> <span data-ttu-id="90452-321">Armazene esse arquivo localmente.</span><span class="sxs-lookup"><span data-stu-id="90452-321">Store this file locally.</span></span>

<span data-ttu-id="90452-322">Repita as etapas nesta seção para itens pai do formato **Formato para saber como pesquisar dados de LE** e armazene os seguintes arquivos localmente:</span><span class="sxs-lookup"><span data-stu-id="90452-322">Repeat steps in this section for parent items of the **Format to learn how to lookup LE data** format, and store the following files locally:</span></span>

-   <span data-ttu-id="90452-323">Formato para conhecer chamadas parametrizadas.xml</span><span class="sxs-lookup"><span data-stu-id="90452-323">Format to learn parameterized calls.xml</span></span>
-   <span data-ttu-id="90452-324">Mapeamento para conhecer chamadas parametrizadas.xml</span><span class="sxs-lookup"><span data-stu-id="90452-324">Mapping to learn parameterized calls.xml</span></span>
-   <span data-ttu-id="90452-325">Modelo para conhecer chamadas parametrizadas.xml</span><span class="sxs-lookup"><span data-stu-id="90452-325">Model to learn parameterized calls.xml</span></span>

<span data-ttu-id="90452-326">Para aprender a usar o formato de ER configurado **Formato para saber como pesquisar dados de ER** para configurar conjuntos de códigos de imposto dependentes de entidade legal a fim de filtrar transações de imposto por diferentes níveis de tributação, conclua as etapas no tópico [Configurar os parâmetros de um formato de ER por entidade legal](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="90452-326">To learn how to use the configured **Format to learn how to lookup LE data** ER format to set up legal entity–dependent sets of tax codes to filter tax transactions by different taxation levels, complete the steps in the [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md) topic.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="90452-327">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="90452-327">Additional resources</span></span>

[<span data-ttu-id="90452-328">Designer de fórmulas no Relatório eletrônico</span><span class="sxs-lookup"><span data-stu-id="90452-328">Formula designer in Electronic reporting</span></span>](general-electronic-reporting-formula-designer.md)

[<span data-ttu-id="90452-329">Configurar os parâmetros de um formato de ER por entidade legal</span><span class="sxs-lookup"><span data-stu-id="90452-329">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)
