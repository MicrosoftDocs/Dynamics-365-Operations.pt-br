---
title: Configurar autenticação do Azure Active Directory para entrada de PDV
description: Este tópico explica como configurar o Azure Active Directory como o método de autenticação no ponto de venda do Microsoft Dynamics 365 Commerce.
author: boycezhu
ms.date: 04/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Core, Operations, Retail
ms.search.region: global
ms.author: boycez
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.11
ms.openlocfilehash: 63121a9b5f1b062b7ca927f6b9eb1689ce8aa698
ms.sourcegitcommit: dc4898aa32f381620c517bf89c7856e693563ace
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/17/2021
ms.locfileid: "6270674"
---
# <a name="configure-azure-active-directory-authentication-for-pos-sign-in"></a><span data-ttu-id="209af-103">Configurar autenticação do Azure Active Directory para entrada de PDV</span><span class="sxs-lookup"><span data-stu-id="209af-103">Configure Azure Active Directory authentication for POS sign-in</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="209af-104">Este tópico explica como configurar o Azure Active Directory (Azure AD) como o método de autenticação no ponto de venda (PDV) do Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="209af-104">This topic explains how to configure Azure Active Directory (Azure AD) as the authentication method in Microsoft Dynamics 365 Commerce point of sale (POS).</span></span>

<span data-ttu-id="209af-105">Os varejistas que usam o Dynamics 365 Commerce junto com outros serviços em nuvem da Microsoft, como o Microsoft Azure, Microsoft 365 e Microsoft Teams geralmente querem usar o Azure AD para o gerenciamento centralizado de credenciais de usuário para uma experiência de entrada segura e perfeita entre aplicativos.</span><span class="sxs-lookup"><span data-stu-id="209af-105">Retailers who use Dynamics 365 Commerce along with other Microsoft cloud services such as Microsoft Azure, Microsoft 365, and Microsoft Teams typically want to use Azure AD for centralized management of user credentials for a secure and seamless sign-in experience across applications.</span></span> <span data-ttu-id="209af-106">Para usar a autenticação do Azure AD para PDV do Commerce, primeiro você deve configurar o Azure AD como o método de autenticação no Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="209af-106">To use Azure AD authentication for Commerce POS, you must first configure Azure AD as the authentication method in Commerce headquarters.</span></span>

## <a name="configure-pos-authentication-method"></a><span data-ttu-id="209af-107">Configurar método de autenticação do PDV</span><span class="sxs-lookup"><span data-stu-id="209af-107">Configure POS authentication method</span></span>

<span data-ttu-id="209af-108">Para configurar o método de autenticação do PDV no Commerce headquarters, siga estas etapas.</span><span class="sxs-lookup"><span data-stu-id="209af-108">To configure the POS authentication method in Commerce headquarters, follow these steps.</span></span>
    
1. <span data-ttu-id="209af-109">Vá para **Varejo e Comércio \> Configuração do canal \> Configuração do PDV \> Perfis de PDV \> Perfis de funcionalidade** e selecione um perfil de funcionalidade a ser alterado.</span><span class="sxs-lookup"><span data-stu-id="209af-109">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**, and select a functionality profile to change.</span></span>
1. <span data-ttu-id="209af-110">Na seção **Logon da equipe de PDV** da FastTab **Funções**, selecione uma opção do método de autenticação desejado na lista suspensa **Método de autenticação de logon**.</span><span class="sxs-lookup"><span data-stu-id="209af-110">In the **POS staff logon** section of the **Functions** FastTab, select a desired authentication method option from the **Logon authentication method** drop-down list.</span></span>

    <span data-ttu-id="209af-111">O **Método de autenticação de logon** tem três opções:</span><span class="sxs-lookup"><span data-stu-id="209af-111">The **Logon authentication method** has three options:</span></span>
    
    - <span data-ttu-id="209af-112">**ID e Senha de Pessoal** - essa opção padrão requer que os usuários do PDV insiram uma ID de pessoal e senha para entrar no PDV e na funcionalidade de substituição do gerenciador de acesso.</span><span class="sxs-lookup"><span data-stu-id="209af-112">**Personnel ID and Password** - This default option requires POS users to enter a personnel ID and password to sign in to the POS and to access manager override functionality.</span></span>
    - <span data-ttu-id="209af-113">**Azure AD sem o logon único** - essa opção exige que os usuários do PDV usem as credenciais do Azure AD para entrar no PDV e acessar a funcionalidade de substituição gerenciador.</span><span class="sxs-lookup"><span data-stu-id="209af-113">**Azure AD without single sign-on** - This option requires POS users to use Azure AD credentials to sign in to the POS and access manager override functionality.</span></span> <span data-ttu-id="209af-114">Quando o cliente de PDV for atualizado ou reaberto, o usuário de PDV deverá fornecer credenciais do Azure AD para entrar novamente.</span><span class="sxs-lookup"><span data-stu-id="209af-114">When the POS client is refreshed or reopened, the POS user must provide Azure AD credentials to sign in again.</span></span>
    - <span data-ttu-id="209af-115">**Azure AD com o logon único** - quando essa opção é selecionada, os usuários do PDV podem entrar no PDV em Nuvem (CPOs) usando credenciais ativas do Azure AD, que estão sendo usadas por outros aplicativos Web no mesmo navegador da Web, ou entrar no Modern PDV (MPOs) usando credenciais do Azure AD registradas no Windows.</span><span class="sxs-lookup"><span data-stu-id="209af-115">**Azure AD with single sign-on** - When this option is selected, POS users are able to sign in to Cloud POS (CPOS) using active Azure AD credentials that are being used by other web applications in the same web browser, or sign in to Modern POS (MPOS) using Azure AD credentials signed in to Windows.</span></span> <span data-ttu-id="209af-116">Os dois métodos permitem entrada sem a necessidade de inserir credenciais do Azure AD na tela de entrada do PDV.</span><span class="sxs-lookup"><span data-stu-id="209af-116">Both methods allow sign-in without needing to enter Azure AD credentials on the POS sign-in screen.</span></span> <span data-ttu-id="209af-117">No entanto, o acesso à funcionalidade de substituição do gerenciador PDV ainda exigirá entrada usando credenciais do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="209af-117">However, accessing the POS manager override functionality will still require sign-in using Azure AD credentials.</span></span>

1. <span data-ttu-id="209af-118">Vá para **Varejo e Comércio > TI de Varejo e Comércio> Agenda de distribuição** e execute o trabalho **1070 (Configuração do canal)** para sincronizar as configurações de perfil de funcionalidade mais recente para clientes de PDV.</span><span class="sxs-lookup"><span data-stu-id="209af-118">Go to **Retail and Commerce > Retail and Commerce IT > Distribution schedule** and run the **1070 (Channel configuration)** job to synchronize the latest functionality profile settings to POS clients.</span></span>

> [!NOTE]
> - <span data-ttu-id="209af-119">A opção do método de autenticação **Azure AD sem logon único** substitui a opção **Azure Active Directory** na versão 10.0.18 e anterior do Commerce.</span><span class="sxs-lookup"><span data-stu-id="209af-119">The **Azure AD without single sign-on** authentication method option replaces the **Azure Active Directory** option in Commerce version 10.0.18 and earlier.</span></span>
> - <span data-ttu-id="209af-120">A autenticação do Azure AD requer uma conexão com a Internet ativa e não funcionará quando o PDV estiver off-line.</span><span class="sxs-lookup"><span data-stu-id="209af-120">Azure AD authentication requires an active internet connection, and won't function when the POS is offline.</span></span>

## <a name="associate-azure-ad-accounts-with-pos-users"></a><span data-ttu-id="209af-121">Associar contas do Azure AD a usuários do PDV</span><span class="sxs-lookup"><span data-stu-id="209af-121">Associate Azure AD accounts with POS users</span></span>

<span data-ttu-id="209af-122">Para usar o Azure AD como o método de autenticação de PDV, você deve associar contas do Azure AD a usuários de PDV no Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="209af-122">To use Azure AD as the POS authentication method, you must associate Azure AD accounts with POS users in Commerce headquarters.</span></span> 

<span data-ttu-id="209af-123">Para associar contas do Azure AD a usuários do PDV no Commerce Headquarters, siga estas etapas.</span><span class="sxs-lookup"><span data-stu-id="209af-123">To associate Azure AD accounts with POS users in Commerce headquarters, follow these steps.</span></span>
    
1. <span data-ttu-id="209af-124">Vá para **Varejo e Comércio > Funcionários > Trabalhadores** e abra um registro de trabalhador.</span><span class="sxs-lookup"><span data-stu-id="209af-124">Go to **Retail and Commerce > Employees > Workers** and open a worker record.</span></span>
1. <span data-ttu-id="209af-125">No Painel de Ações, selecione a guia **Commerce**, em **Identidade externa**, selecione **Associar identidade existente**.</span><span class="sxs-lookup"><span data-stu-id="209af-125">On the Action Pane, select the **Commerce** tab, then under **External identity** select **Associate existing identity**.</span></span> 
1. <span data-ttu-id="209af-126">Na caixa de diálogo **Usar identidade externa existente**, selecione **Pesquisar usando email**, insira um endereço de email do Azure AD e depois selecione **Pesquisar**.</span><span class="sxs-lookup"><span data-stu-id="209af-126">In the **Use existing external identity** dialog box, select **Search using email**, enter an Azure AD email address, and then select **Search**.</span></span>
1. <span data-ttu-id="209af-127">Selecione a conta do Azure AD retornada, em seguida, selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="209af-127">Select the Azure AD account that is returned, then select **OK**.</span></span>

<span data-ttu-id="209af-128">Após as etapas de configuração acima, os campos **Alias**, **UPN** e **Subidentificador externo** da guia **Commerce** da página de detalhes do trabalhador serão preenchidos.</span><span class="sxs-lookup"><span data-stu-id="209af-128">After the configuration steps above, the **Alias**, **UPN**, and **External sub identifier** fields on the **Commerce** tab of the worker's details page will be filled in.</span></span>

<span data-ttu-id="209af-129">Você deve executar o trabalho **1060 (Equipe)** no **Varejo e Comércio > TI de Varejo e Comércio > Agenda de distribuição** para sincronizar o usuário PDV mais recente e os dados da conta do Azure AD para o canal.</span><span class="sxs-lookup"><span data-stu-id="209af-129">You must run the **1060 (Staff)** job in **Retail and Commerce > Retail and Commerce IT > Distribution schedule** to synchronize the latest POS user and Azure AD account data to the channel.</span></span>

> [!NOTE]
> <span data-ttu-id="209af-130">Como prática recomendada, depois que as informações do trabalhador, como senha, permissão de PDV, conta associada do Azure AD ou catálogo de endereços do funcionário forem atualizadas no Commerce Headquarters, é altamente recomendável executar o trabalho **1060 (Equipe)** para sincronizar as informações mais recentes do trabalhador com o canal.</span><span class="sxs-lookup"><span data-stu-id="209af-130">As a best practice, after worker information such as password, POS permission, associated Azure AD account, or employee address book is updated in Commerce headquarters, it is highly recommended to run the **1060 (Staff)** job to synchronize the latest worker information to the channel.</span></span> <span data-ttu-id="209af-131">O cliente PDV pode buscar os dados corretos para a autenticação de usuário e verificações de autorização.</span><span class="sxs-lookup"><span data-stu-id="209af-131">The POS client can then fetch the correct data for user authentication and authorization checks.</span></span>

## <a name="pos-lock-register-and-sign-out-with-azure-ad-authentication"></a><span data-ttu-id="209af-132">Registro e inscrição de bloqueio de PDV com autenticação do Azure AD</span><span class="sxs-lookup"><span data-stu-id="209af-132">POS lock register and sign-out with Azure AD authentication</span></span>

<span data-ttu-id="209af-133">Ocorre o seguinte quando o PDV está configurado para usar o método de autenticação do Azure AD:</span><span class="sxs-lookup"><span data-stu-id="209af-133">The following occurs when POS is configured to use the Azure AD authentication method:</span></span>

- <span data-ttu-id="209af-134">A função **Bloquear registro** não estará disponível no aplicativo PDV.</span><span class="sxs-lookup"><span data-stu-id="209af-134">The **Lock register** function will not be available in the POS application.</span></span> 
- <span data-ttu-id="209af-135">A função **Bloqueio automático** se comportará da mesma forma que a função **Logoff automático**.</span><span class="sxs-lookup"><span data-stu-id="209af-135">The **Automatically lock** function will behave the same as the **Automatically logoff** function.</span></span>
- <span data-ttu-id="209af-136">Se o usuário do PDV selecionar **Fazer logoff**, será solicitado que ele entre com as credenciais do Azure AD na próxima vez que o PDV for iniciado, independentemente de o início de logon único estar habilitado.</span><span class="sxs-lookup"><span data-stu-id="209af-136">If the POS user selects **Log off**, the user will be asked to sign in with Azure AD credentials the next time the POS launches, regardless of whether single sign-in is enabled.</span></span>

## <a name="manager-override-functionality-with-azure-ad-authentication"></a><span data-ttu-id="209af-137">Funcionalidade de substituição do gerenciador com autenticação do Azure AD</span><span class="sxs-lookup"><span data-stu-id="209af-137">Manager override functionality with Azure AD authentication</span></span>

<span data-ttu-id="209af-138">Quando o PDV estiver configurado para usar a autenticação do Azure AD, a funcionalidade de substituição do gerente abrirá uma caixa de diálogo que solicitará as credenciais do usuário do gerente do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="209af-138">When the POS is configured to use Azure AD authentication, the manager override functionality will open a dialog box that prompts for the manager user's Azure AD credentials.</span></span> <span data-ttu-id="209af-139">Depois que a entrada do gerenciador for aprovada, as credenciais do gerente do Azure AD serão descartadas e as credenciais do usuário anterior do Azure AD serão usadas para operações subsequentes de PDV.</span><span class="sxs-lookup"><span data-stu-id="209af-139">After manager sign-in is approved, the manager's Azure AD credentials will be dropped and the previous user's Azure AD credentials will be used for subsequent POS operations.</span></span>

> [!NOTE]
> - <span data-ttu-id="209af-140">Nas versões 10.0.18 e anteriores do Commerce, a função de substituição do gerente não oferece suporte ao Azure AD.</span><span class="sxs-lookup"><span data-stu-id="209af-140">In Commerce versions 10.0.18 and earlier, the manager override function does not support Azure AD.</span></span> <span data-ttu-id="209af-141">Uma ID e senha de pessoal são necessárias mesmo que o PDV seja configurado para usar o método de autenticação do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="209af-141">A personnel ID and password are required even if the POS is configured to use the Azure AD authentication method.</span></span>
> - <span data-ttu-id="209af-142">Ao usar CPOS com o navegador Safari Web em um dispositivo Apple iOS, você deve primeiro desativar **Bloquear Pop-ups** nas configurações do Safari para a funcionalidade de substituição do gerenciador para trabalhar com a autenticação do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="209af-142">When using CPOS with the Safari web browser on an Apple iOS device, you must first turn off **Block Pop-ups** in Safari settings for the manager override functionality to work with Azure AD authentication.</span></span> 

## <a name="security-best-practices-for-azure-ad-based-pos-authentication-on-shared-devices"></a><span data-ttu-id="209af-143">Práticas recomendadas de segurança para autenticação de PDV com base no Azure AD em dispositivos compartilhados</span><span class="sxs-lookup"><span data-stu-id="209af-143">Security best practices for Azure AD-based POS authentication on shared devices</span></span>

<span data-ttu-id="209af-144">Muitos varejistas configuram seu ambiente de loja de varejo de forma que vários usuários precisem acessar o aplicativo PDV a partir de um dispositivo físico compartilhado.</span><span class="sxs-lookup"><span data-stu-id="209af-144">Many retailers set up their retail store environment in a way that multiple users need to access the POS application from a shared physical device.</span></span> <span data-ttu-id="209af-145">Nesse contexto, enquanto o logon único oferece uma experiência de autenticação conveniente e uniforme, ele também pode criar uma loophole de segurança em que o usuário atual do PDV pode não perceber que as credenciais de outro usuário estão sendo usadas para executar transações ou operações no PDV.</span><span class="sxs-lookup"><span data-stu-id="209af-145">In that context, while single sign-in provides a convenient and seamless authentication experience, it may also create a security loophole where the current POS user may not realize that another user's credentials are being used to perform transactions or operations in the POS.</span></span> <span data-ttu-id="209af-146">Antes de configurar o PDV para usar o método de autenticação do Azure AD, é altamente recomendável rever a política de segurança e as configurações de entrada do dispositivo compartilhado para decidir qual opção é a mais adequada.</span><span class="sxs-lookup"><span data-stu-id="209af-146">Before you configure the POS to use the Azure AD authentication method, it is highly recommended to review your security policy and the shared device's sign-in settings to decide which option is the best fit.</span></span>

- <span data-ttu-id="209af-147">Se o seu ambiente de varejo usar uma conta compartilhada (por exemplo, uma conta local) para a entrada de dispositivo físico, é recomendável usar a opção **Azure AD sem logon único**.</span><span class="sxs-lookup"><span data-stu-id="209af-147">If your retail environment uses a shared account (for example, a local account) for physical device sign-in, it's recommended to use the **Azure AD without single sign-on** option.</span></span> <span data-ttu-id="209af-148">Isso garante que cada usuário do PDV forneça credenciais do Azure AD explicitamente para entrar no PDV.</span><span class="sxs-lookup"><span data-stu-id="209af-148">This ensures that each POS user explicitly provides Azure AD credentials to sign in to the POS.</span></span>
- <span data-ttu-id="209af-149">Se o seu ambiente de varejo exigir que os funcionários usem suas próprias contas do Azure AD para entrar no PDV e o dispositivo físico for hospedado, é recomendável usar a opção **Azure AD com logon único**.</span><span class="sxs-lookup"><span data-stu-id="209af-149">If your retail environment requires employees to use their own Azure AD accounts to sign in to the POS and its hosting physical device, it's recommended to use the **Azure AD with single sign-on** option.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="209af-150">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="209af-150">Additional resources</span></span>

[<span data-ttu-id="209af-151">Configurar um trabalhador</span><span class="sxs-lookup"><span data-stu-id="209af-151">Configure a worker</span></span>](tasks/worker.md)

[<span data-ttu-id="209af-152">Criar um perfil de funcionalidade de varejo</span><span class="sxs-lookup"><span data-stu-id="209af-152">Create a retail functionality profile</span></span>](retail-functionality-profile.md)


[<span data-ttu-id="209af-153">Configurar a funcionalidade de logon estendido para MPOS e PDV em Nuvem</span><span class="sxs-lookup"><span data-stu-id="209af-153">Set up extended logon functionality for MPOS and Cloud POS</span></span>](extended-logon.md)

[<span data-ttu-id="209af-154">Práticas recomendadas de segurança para PDV em Nuvem em ambientes compartilhados</span><span class="sxs-lookup"><span data-stu-id="209af-154">Security best practices for Cloud POS in shared environments</span></span>](dev-itpro/secure-retail-cloud-pos.md)



[!INCLUDE[footer-include](../includes/footer-banner.md)]
