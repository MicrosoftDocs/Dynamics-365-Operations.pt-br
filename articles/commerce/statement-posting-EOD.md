---
title: Aprimoramentos na funcionalidade de postagem de demonstrativo
description: Este tópico descreve as melhorias feitas no recurso de postagem do demonstrativo.
author: josaw1
manager: AnnBe
ms.date: 05/14/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 68abef8f28c04a4f6f88e638c8abf944d06a32c4
ms.sourcegitcommit: 12b9d6f2dd24e52e46487748c848864909af6967
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/14/2020
ms.locfileid: "3057246"
---
# <a name="improvements-to-statement-posting-functionality"></a><span data-ttu-id="ebb4a-103">Aprimoramentos na funcionalidade de postagem de demonstrativo</span><span class="sxs-lookup"><span data-stu-id="ebb4a-103">Improvements to statement posting functionality</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="ebb4a-104">Este tópico descreve o primeiro conjunto das melhorias feitas no recurso de postagem do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="ebb4a-105">As melhorias estão disponíveis no Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="ebb4a-106">Ativação</span><span class="sxs-lookup"><span data-stu-id="ebb4a-106">Activation</span></span>

<span data-ttu-id="ebb4a-107">Por padrão, durante a implementação de Finance and Operations 7.3.2, o programa é configurado para usar o recurso herdado para postagens do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="ebb4a-108">Para habilitar o recurso aprimorado de postagem da instrução, você deve ativar a chave de configuração para ele.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="ebb4a-109">Vá para **Administração de sistemas** \> **Configuração** \> **Configuração de licença**, e depois, no nó **Retail e Commerce**, desmarque a caixa de seleção **Demonstrativos (herdados)**, e marque a caixa de seleção **Demonstrativos**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail and Commerce** node, clear the **Statements (legacy)** check box, and select the **Statements** check box.</span></span>

<span data-ttu-id="ebb4a-110">Quando a nova chave de configuração **Demonstrativos** é ligada, um novo item de menu nomeado **Demonstrativos** está disponível.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-110">When the new **Statements** configuration key is turned on, a new menu item that is named **Statements** is available.</span></span> <span data-ttu-id="ebb4a-111">Esse item de menu permite criar, calcular e lançar demonstrativos manualmente.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="ebb4a-112">Qualquer instrução que cause um erro quando o processo de postagem de lotes é usado também estará disponível por meio deste item de menu.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="ebb4a-113">(Quando a chave de configuração **Demonstrativos (herdado)** é ligada, o item de menu é nomeado **Demonstrativos abertos**.)</span><span class="sxs-lookup"><span data-stu-id="ebb4a-113">(When the **Statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="ebb4a-114">Commerce inclui as seguintes validações relacionadas às chaves de configuração:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-114">Commerce includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="ebb4a-115">As duas chaves de configuração não podem ser alternadas simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="ebb4a-116">As mesmas chaves de configuração devem ser usadas para todas as operações executadas em um demonstrativo específico durante o ciclo de vida, (Criar, Calcular, Limpar, Lançar e etc.)</span><span class="sxs-lookup"><span data-stu-id="ebb4a-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="ebb4a-117">Por exemplo, você não pode criar e calcular o demonstrativo quando a chave de configuração **Demonstrativos (herdados)** está ativada, e depois tentar lançá-la ao mesmo demonstrativo quando a chave de configuração **Demonstrativos** estiver ativada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-117">For example, you can't create and calculate a statement while the **Statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="ebb4a-118">Recomenda-se usar a chave de configuração **Demonstrativos** para o recurso aprimorado de postagem do demonstrativo, a menos que você tenha motivos plausíveis para usar a chave de configuração **Demonstrativos (herdados)** em vez disso.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-118">We recommend that you use the **Statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="ebb4a-119">A Microsoft continuará a investir em recursos novos e aprimoradas de postagem de demonstrativo, e é importante que você troque para ele assim que puder para receber seus benefícios.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="ebb4a-120">O recurso herdado de postagem do demonstrativo fica obsoleto a partir da versão 8.0.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-120">The legacy statement posting feature is deprecated starting in 8.0 release.</span></span>

## <a name="setup"></a><span data-ttu-id="ebb4a-121">Configurar</span><span class="sxs-lookup"><span data-stu-id="ebb4a-121">Setup</span></span>

<span data-ttu-id="ebb4a-122">Como parte das melhorias ao recurso de lançamento do demonstrativo, os três parâmetros foram apresentados na Guia Rápida **Demonstrativo**, na guia **Lançamento** da página **Parâmetros de Commerce**:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span>

- <span data-ttu-id="ebb4a-123">**Desabilitar instrução limpar** – Essa opção é aplicável apenas para o recurso herdado de postagem do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="ebb4a-124">Recomendamos que você defina esta opção como **Não** para impedir os usuários de limpar os demonstrativos que estão em estado pendente de lançamento.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="ebb4a-125">Se os demonstrativos que estão em estado pendente são limpos, os dados se tornam corrompidos.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="ebb4a-126">Você deve definir esta opção como **Sim** apenas em circunstâncias excepcionais.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="ebb4a-127">**Reservar estoque durante o cálculo** – Recomendamos que você use o trabalho em lotes de **Lançar estoque** para reserva de estoque, e que você defina essa opção como **Não**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="ebb4a-128">Quando esta opção é definida como **Não**, o recurso aprimorado de lançamento de demonstrativo não tenta criar entradas de reserva de estoque no momento do cálculo (se as entradas ainda não tiverem sido criadas por meio do trabalho em lotes de **Lançar estoque**).</span><span class="sxs-lookup"><span data-stu-id="ebb4a-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="ebb4a-129">Em vez disso, o recurso cria entradas reserva de estoque somente no momento de lançamento.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="ebb4a-130">Esta implementação foi uma escolha de design e foi baseada no fato de que a janela de tempo entre o processo de cálculo e o processo de lançamento é geralmente pequena.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="ebb4a-131">Entretanto, se você deseja reservar estoque no momento do cálculo, você pode definir esta opção como **Sim**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="ebb4a-132">O recurso de lançamento de demonstrativo herdado sempre reserva estoque durante o processo de cálculo do demonstrativo (se a reserva ainda não tiver sido feita por meio do trabalho em lotes de **Lançar estoque**), independentemente se essa opção foi configurada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="ebb4a-133">**Desabilitar contagem necessária** – Quando esta opção está definida como **Sim**, o processo de postagem de uma instrução continua, mesmo que a diferença entre o valor contado e o valor de transação no extrato esteja fora do limite definido na Guia Rápida do **Demonstrativo** para Lojas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for stores.</span></span>

<span data-ttu-id="ebb4a-134">Além disso, os parâmetros a seguir foram introduzidos na Guia Rápida **Processamento de lote** na guia **Postagem** da página **Parâmetros do Commerce**:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-134">Additionally, the following parameters have been introduced on the **Batch processing** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span> 

- <span data-ttu-id="ebb4a-135">**Número máximo de lançamentos paralelos de demonstrativos** – Esse campo define o número de tarefas de lote que serão usados para postar múltiplos demonstrativos.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-135">**Maximum number of parallel statement posting** – This field defines the number of batch tasks that will be used to post multiple statements.</span></span> 
- <span data-ttu-id="ebb4a-136">**Thread máximo para processamento de pedido por demonstrativo** – Esse campo representa o número máximo de threads usado por um trabalho de lote de postagem de demonstrativo para criar e faturar ordens de venda para um único demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-136">**Max thread for order processing per statement** – This field represents the maximum number of threads used by the statement posting batch job to create and invoice sales orders for a single statement.</span></span> <span data-ttu-id="ebb4a-137">O número total de threads que serão usados pelo processo de postagem de demonstrativo serão computador com base no valor nesse parâmetro multiplicado pelo valor no parâmetro **Número máximo de lançamentos paralelos de demonstrativos**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-137">The total number of threads that will be used by the statement posting process will be computed based on the value in this parameter multiplied by the value in the **Maximum number of parallel statement posting** parameter.</span></span> <span data-ttu-id="ebb4a-138">Definir o valor desse parâmetro muito alto pode afetar negativamente o desempenho do processo de postagem do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-138">Setting the value of this parameter too high can negatively impact the performance of the statement posting process.</span></span>
- <span data-ttu-id="ebb4a-139">**Linhas de transação máxima incluída na agregação** – Esse campo define o número de linhas de transação que serão incluídas em uma única transação agregada antes de uma nova ser criada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-139">**Max transaction lines included in aggregation** – This field defines the number of transaction lines that will be included in a single aggregated transaction before a new one is created.</span></span> <span data-ttu-id="ebb4a-140">As transações agregadas são criadas com base em critérios de agregação diferentes como cliente, data do negócio ou dimensões financeiras.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-140">Aggregated transactions are created based on different aggregation criteria such as customer, business date, or financial dimensions.</span></span> <span data-ttu-id="ebb4a-141">É importante observar que as linhas de uma única transação não serão divididas entre transações agregadas diferentes.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-141">It is important to note that the lines from a single transaction will not be split across different aggregated transactions.</span></span> <span data-ttu-id="ebb4a-142">Isso significa que há uma possibilidade de que o número de linhas em uma transação agregada é levemente maior ou menor com base nos fatores como o número de produtos distintos.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-142">This means that there is a possibility that the number of lines in a aggregated transaction is slightly higher or lower based on factors such as number of distinct products.</span></span>
- <span data-ttu-id="ebb4a-143">**Número máximo de threads para validar transações de loja** – Esse campo define o número de threads que serão usados para validar transações.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-143">**Maximum number of threads to validate store transactions** – This field defines the number of threads that will be used to validate transactions.</span></span> <span data-ttu-id="ebb4a-144">Validar transações é uma etapa obrigatória que precisa acontecer antes das transações serem recebidas nos demonstrativos.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-144">Validating transactions is a required step that needs to occur before the transactions can be pulled into the statements.</span></span> <span data-ttu-id="ebb4a-145">Você também precisa definir um **Produto para o cartão-presente** na Guia Rápida **Cartão-presente** na guia **Lançamento** da página **Parâmetros do Commerce**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-145">You also need to define a **Gift card product** on the **Gift card** FastTab on the **Posting** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="ebb4a-146">Isso precisa ser definido até se cartões-presente não forem usados pela organização.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-146">This needs to defined even if gift cards are not used by the organization.</span></span>

> [!NOTE]
> <span data-ttu-id="ebb4a-147">Todas as configurações e os parâmetros relacionados às postagens de demonstrativo, e definidos em lojas do Commerce na página **Parâmetros do Commerce**, são aplicáveis ao recurso aprimorado de postagem do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-147">All settings and parameters that are related to statement postings, and that are defined on stores and on the **Commerce parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="ebb4a-148">Processando</span><span class="sxs-lookup"><span data-stu-id="ebb4a-148">Processing</span></span>

<span data-ttu-id="ebb4a-149">As instruções podem ser calculadas e lançadas no lote com os itens de menu **Calcular instruções em lote** e **Lançar demonstrativos em lote**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-149">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="ebb4a-150">Alternativamente, as instruções podem ser calculadas manualmente e lançadas usando o item de menu **Demonstrativos** que o recurso aprimorado de postagem de demonstrativo fornece.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-150">Alternatively, statements can be manually calculated and posted by using the **Statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="ebb4a-151">O processo e as etapas para calcular e lançar demonstrativos em um lote são os mesmos no recurso herdado de postagem do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-151">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="ebb4a-152">Entretanto, as melhorias significativas foram feitas no back-end principal processando os demonstrativos.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-152">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="ebb4a-153">Essas melhorias tornam o processo mais resiliente e fornecem uma melhor visibilidade nos estados e informações de erro.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-153">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="ebb4a-154">Portanto, os usuários podem solucionar o motivo principal dos erros e continuar o processo de postagem sem causar corrupção dos dados e sem causar a necessidade de corrigir dados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-154">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="ebb4a-155">As seções a seguir descrevem algumas das principais melhorias para o recurso de lançamento de demonstrativo que aparecem na interface do usuário para demonstrativos e demonstrativos postados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-155">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="ebb4a-156">Detalhes do status</span><span class="sxs-lookup"><span data-stu-id="ebb4a-156">Status details</span></span>

<span data-ttu-id="ebb4a-157">Um novo modelo de estado foi introduzido em uma rotina de lançamento de demonstrativo entre o cálculo e os processos de lançamento.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-157">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="ebb4a-158">A tabela a seguir descreve vários estados e a ordem durante o processo de cálculo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-158">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="ebb4a-159">Ordem do estado</span><span class="sxs-lookup"><span data-stu-id="ebb4a-159">State order</span></span> | <span data-ttu-id="ebb4a-160">Estadual</span><span class="sxs-lookup"><span data-stu-id="ebb4a-160">State</span></span>      | <span data-ttu-id="ebb4a-161">descrição</span><span class="sxs-lookup"><span data-stu-id="ebb4a-161">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="ebb4a-162">1</span><span class="sxs-lookup"><span data-stu-id="ebb4a-162">1</span></span>           | <span data-ttu-id="ebb4a-163">Iniciado</span><span class="sxs-lookup"><span data-stu-id="ebb4a-163">Started</span></span>    | <span data-ttu-id="ebb4a-164">O demonstrativo foi criado e está pronto para ser calculado.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-164">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="ebb4a-165">2</span><span class="sxs-lookup"><span data-stu-id="ebb4a-165">2</span></span>           | <span data-ttu-id="ebb4a-166">Marcado</span><span class="sxs-lookup"><span data-stu-id="ebb4a-166">Marked</span></span>     | <span data-ttu-id="ebb4a-167">As transações que estão no escopo do demonstrativo são identificadas com base nos parâmetros de demonstrativo, e elas são marcadas com a ID do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-167">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="ebb4a-168">3</span><span class="sxs-lookup"><span data-stu-id="ebb4a-168">3</span></span>           | <span data-ttu-id="ebb4a-169">Calculado</span><span class="sxs-lookup"><span data-stu-id="ebb4a-169">Calculated</span></span> | <span data-ttu-id="ebb4a-170">As linhas do demonstrativo foram computadas e exibidas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-170">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="ebb4a-171">A tabela a seguir descreve vários estados e a ordem durante o processo de lançamento.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-171">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="ebb4a-172">Ordem do estado</span><span class="sxs-lookup"><span data-stu-id="ebb4a-172">State order</span></span> | <span data-ttu-id="ebb4a-173">Estadual</span><span class="sxs-lookup"><span data-stu-id="ebb4a-173">State</span></span>                   | <span data-ttu-id="ebb4a-174">descrição</span><span class="sxs-lookup"><span data-stu-id="ebb4a-174">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="ebb4a-175">1</span><span class="sxs-lookup"><span data-stu-id="ebb4a-175">1</span></span>           | <span data-ttu-id="ebb4a-176">Verificado</span><span class="sxs-lookup"><span data-stu-id="ebb4a-176">Checked</span></span>                 | <span data-ttu-id="ebb4a-177">Várias validações são feitas relacionadas a parâmetros (por exemplo, o encargo de disposição), e a instrução e linhas de demonstrativo (por exemplo, a diferença entre o valor contado e o valor da transação).</span><span class="sxs-lookup"><span data-stu-id="ebb4a-177">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="ebb4a-178">2</span><span class="sxs-lookup"><span data-stu-id="ebb4a-178">2</span></span>           | <span data-ttu-id="ebb4a-179">Agregado</span><span class="sxs-lookup"><span data-stu-id="ebb4a-179">Aggregated</span></span>              | <span data-ttu-id="ebb4a-180">As transações de venda para clientes nomeados e sem nome são agregadas com a configuração.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-180">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="ebb4a-181">Cada transação agregada é eventualmente convertida em uma ordem de venda.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-181">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="ebb4a-182">3</span><span class="sxs-lookup"><span data-stu-id="ebb4a-182">3</span></span>           | <span data-ttu-id="ebb4a-183">Ordem de cliente criada</span><span class="sxs-lookup"><span data-stu-id="ebb4a-183">Customer order created</span></span>  | <span data-ttu-id="ebb4a-184">Com base na transação agregada, ordens de venda são criadas no sistema.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-184">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="ebb4a-185">4</span><span class="sxs-lookup"><span data-stu-id="ebb4a-185">4</span></span>           | <span data-ttu-id="ebb4a-186">Ordem de cliente faturada</span><span class="sxs-lookup"><span data-stu-id="ebb4a-186">Customer order invoiced</span></span> | <span data-ttu-id="ebb4a-187">Ordens de venda foram faturadas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-187">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="ebb4a-188">5</span><span class="sxs-lookup"><span data-stu-id="ebb4a-188">5</span></span>           | <span data-ttu-id="ebb4a-189">Descontos lançados</span><span class="sxs-lookup"><span data-stu-id="ebb4a-189">Discounts posted</span></span>        | <span data-ttu-id="ebb4a-190">Diários periódicos de desconto são lançados com a configuração.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-190">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="ebb4a-191">6</span><span class="sxs-lookup"><span data-stu-id="ebb4a-191">6</span></span>           | <span data-ttu-id="ebb4a-192">Renda/despesa lançada</span><span class="sxs-lookup"><span data-stu-id="ebb4a-192">Income/expense posted</span></span>   | <span data-ttu-id="ebb4a-193">Transações de renda/despesa são lançadas como comprovantes.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-193">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="ebb4a-194">7</span><span class="sxs-lookup"><span data-stu-id="ebb4a-194">7</span></span>           | <span data-ttu-id="ebb4a-195">Comprovantes vinculados</span><span class="sxs-lookup"><span data-stu-id="ebb4a-195">Vouchers linked</span></span>         | <span data-ttu-id="ebb4a-196">Diários de pagamentos são criados e vinculados à nota fiscal correspondente.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-196">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="ebb4a-197">8</span><span class="sxs-lookup"><span data-stu-id="ebb4a-197">8</span></span>           | <span data-ttu-id="ebb4a-198">Pagamentos lançados</span><span class="sxs-lookup"><span data-stu-id="ebb4a-198">Payments posted</span></span>         | <span data-ttu-id="ebb4a-199">Diários de pagamentos são lançados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-199">Payment journals are posted.</span></span> |
| <span data-ttu-id="ebb4a-200">9</span><span class="sxs-lookup"><span data-stu-id="ebb4a-200">9</span></span>           | <span data-ttu-id="ebb4a-201">Cartões-presente lançados</span><span class="sxs-lookup"><span data-stu-id="ebb4a-201">Gift cards posted</span></span>       | <span data-ttu-id="ebb4a-202">As transações de cartão-presente são lançadas como comprovantes.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-202">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="ebb4a-203">10</span><span class="sxs-lookup"><span data-stu-id="ebb4a-203">10</span></span>          | <span data-ttu-id="ebb4a-204">Postado</span><span class="sxs-lookup"><span data-stu-id="ebb4a-204">Posted</span></span>                  | <span data-ttu-id="ebb4a-205">O demonstrativo é marcado como lançado.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-205">The statement is marked as posted.</span></span> |

<span data-ttu-id="ebb4a-206">Cada estado nas tabelas anteriores são independentes por natureza, e uma dependência hierárquica é construída entre os estados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-206">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="ebb4a-207">Essa dependência flui de cima para baixo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-207">This dependency flows from top to bottom.</span></span> <span data-ttu-id="ebb4a-208">Se o sistema encontrar quaisquer erros enquanto processa um estado, o status do demonstrativo é revertido para o estado prévio.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-208">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="ebb4a-209">Qualquer repetição de tentativa subsequente de processo continua a partir do estado que falhou e continua a mover para frente.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-209">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="ebb4a-210">Esta abordagem tem estes benefícios:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-210">This approach has the following benefits:</span></span>

- <span data-ttu-id="ebb4a-211">O usuário tem a visibilidade do estado em que o erro ocorreu.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-211">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="ebb4a-212">Corrupção de dados será impedida.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-212">Data corruption is avoided.</span></span> <span data-ttu-id="ebb4a-213">Por exemplo, no recurso herdado de lançamento do demonstrativo, houve instâncias em que as ordens de venda forem faturadas mas outras foram deixadas abertas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-213">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="ebb4a-214">Houve também instâncias em que alguns diários de pagamento não tiveram uma nota fiscal correspondente para liquidar, pois o lançamento fiscal tinha um erro.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-214">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="ebb4a-215">Os usuários podem consultar o estado atual do demonstrativo usando o botão **Detalhes de status** no grupo **Detalhes de execução** do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-215">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="ebb4a-216">A página de detalhes do status tem três seções:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-216">The status details page has three sections:</span></span>

    - <span data-ttu-id="ebb4a-217">A primeira seção mostra o status atual do demonstrativo, juntamente com o código de erro e uma mensagem de erro detalhada, se um erro ocorreu.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-217">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="ebb4a-218">A segunda seção mostra vários estados do processo de cálculo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-218">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="ebb4a-219">As indicações visuais mostram os estados que foram executados com sucesso, estados que não puderam ser executados por conta de erros e estados que ainda não foram executados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-219">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="ebb4a-220">A terceira seção mostra vários estados do processo de postagem.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-220">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="ebb4a-221">As indicações visuais mostram os estados que foram executados com sucesso, estados que não puderam ser executados por conta de erros e estados que ainda não foram executados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-221">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="ebb4a-222">Além disso, o cabeçalho da segunda e terceira seções mostram o estado geral do processo relevante.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-222">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="ebb4a-223">Logs de eventos</span><span class="sxs-lookup"><span data-stu-id="ebb4a-223">Event logs</span></span>

<span data-ttu-id="ebb4a-224">Um demonstrativo passa por várias operações (por exemplo, Criar, Calcular, Limpar e Lançar), e múltiplas instâncias da mesma operação podem ser chamadas durante o ciclo de vida do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-224">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="ebb4a-225">Por exemplo, após um demonstrativo ser criado e calculado, um usuário pode limpar o demonstrativo e calculá-lo novamente.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-225">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="ebb4a-226">O botão **Logs de eventos** no grupo **Detalhes de execução** do demonstrativo fornece uma trilha de auditoria completa de várias operações que são chamadas em um demonstrativo, com informações sobre quando as operações foram chamadas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-226">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="ebb4a-227">Transações agregadas</span><span class="sxs-lookup"><span data-stu-id="ebb4a-227">Aggregated transactions</span></span>

<span data-ttu-id="ebb4a-228">Durante o processo de lançamento, as transações de venda são agregadas na configuração.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-228">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="ebb4a-229">Essas transações agregadas são armazenadas no sistema e usadas para criar ordens de vendas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-229">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="ebb4a-230">Cada transação agregada cria uma ordem de venda correspondente no sistema.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-230">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="ebb4a-231">Você pode exibir as transações agregadas usando o botão **Transações agregadas** no grupo **Detalhes de execução** do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-231">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="ebb4a-232">A guia **Detalhes da ordem de venda** de uma transação agregada mostra as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-232">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="ebb4a-233">**ID de registro** O ID da transação agregada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-233">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="ebb4a-234">**Número de demonstrativo** – O demonstrativo a qual a transação agregada pertence.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-234">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="ebb4a-235">**Data** – A data na qual a transação agregada foi criada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-235">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="ebb4a-236">**ID de vendas** – Quando uma ordem de venda é criada a partir da transação agregada, o ID de ordem de venda.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-236">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="ebb4a-237">Se este campo estiver em branco, a ordem de venda correspondente não foi criada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-237">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="ebb4a-238">**Número de linhas agregadas** – O número total de linhas da transação agregada e ordem de vendas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-238">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="ebb4a-239">**Status** – O status mais recente da transação agregada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-239">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="ebb4a-240">**ID de fatura** – Quando a ordem de vendas da transação agregada é faturada, o ID de fatura das vendas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-240">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="ebb4a-241">Se este campo estiver em branco, a fatura da ordem de venda não foi postada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-241">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="ebb4a-242">A guia **Detalhes de transação** de uma transação agregada exibe todas as transações que foram colocadas na transação agregada.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-242">The **Transaction details** tab of an aggregated transaction shows all the transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="ebb4a-243">As linhas agregadas na transação agregada mostram todos os registros agregados das transações.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-243">The aggregated lines on the aggregated transaction show all the aggregated records from the transactions.</span></span> <span data-ttu-id="ebb4a-244">As linhas agregadas também mostram detalhes como item, variante, quantidade, preço, valor líquido, unidade e depósito.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-244">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="ebb4a-245">Basicamente, cada linha agregada corresponde a uma linha de ordem de venda.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-245">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="ebb4a-246">Na página **Transações agregadas**, você pode baixar o XML para uma transação agregada específica usando o botão **XML da ordem de venda de exportação**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-246">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="ebb4a-247">Você pode usar o XML para depurar problemas que envolvam a criação e postagem da ordem de venda.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-247">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="ebb4a-248">Apenas baixe o XML, carregue-o a um ambiente de teste e depure o problema no ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-248">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="ebb4a-249">A funcionalidade para baixar o XML de transações agregadas não está disponível para instruções lançadas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-249">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="ebb4a-250">A exibição agregada de transação a seguir fornece os benefícios:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-250">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="ebb4a-251">O usuário tem visibilidade nas transações agregadas que falharam durante a criação das ordens de venda e ordens de venda que falharam durante o faturamento.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-251">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="ebb4a-252">O usuário tem a visibilidade de como as transações são agregadas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-252">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="ebb4a-253">O usuário tem uma trilha de auditoria concluída, das transações, ordens de venda, a notas fiscais de vendas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-253">The user has a complete audit trail, from transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="ebb4a-254">Essa trilha de auditoria não está disponível no recurso herdado de lançamento do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-254">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="ebb4a-255">O arquivo XML agregado facilita a identificação de problemas durante a criação e faturamento de ordem de venda.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-255">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="ebb4a-256">Comprovantes de diário</span><span class="sxs-lookup"><span data-stu-id="ebb4a-256">Journal vouchers</span></span>

<span data-ttu-id="ebb4a-257">O botão **Comprovantes de diário** no grupo **Detalhes de execução** do demonstrativo mostra todas as várias transações de comprovantes que são criadas para um demonstrativo, e que são relacionadas a descontos, contas de renda/despesa, cartões-presente, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-257">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="ebb4a-258">Atualmente, o programa exibirá somente esses dados para demonstrativos lançados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-258">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="ebb4a-259">Diários de pagamentos</span><span class="sxs-lookup"><span data-stu-id="ebb4a-259">Payment journals</span></span>

<span data-ttu-id="ebb4a-260">O botão **Diários de pagamento** no grupo **Detalhes de execução** do demonstrativo mostra todos vários diários de pagamento criados para um demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-260">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="ebb4a-261">Atualmente, o programa exibirá somente esses dados para demonstrativos lançados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-261">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="ebb4a-262">Outras melhorias</span><span class="sxs-lookup"><span data-stu-id="ebb4a-262">Other improvements</span></span>

<span data-ttu-id="ebb4a-263">Além disso, melhorias finais que os usuários podem ver foram feitas no recurso de postagem do demonstrativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-263">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="ebb4a-264">Eis alguns exemplos:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-264">Here are some examples:</span></span>

- <span data-ttu-id="ebb4a-265">A agregação não considera a equipe, o terminal e as entidades de turno.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-265">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="ebb4a-266">Como existem menos parâmetros de agregação, menos linhas de ordem de venda devem ser processadas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-266">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="ebb4a-267">A ocorrência de deadlock em tabelas de transação é reduzida introduzindo tabelas de extensão adicionais e inserindo operações em vez de operações de atualização nas tabelas da transação.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-267">The occurrence of deadlock on transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the transaction tables.</span></span>
- <span data-ttu-id="ebb4a-268">O número de tarefas do lote da execução foi parametrizado e limitado.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-268">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="ebb4a-269">Portanto, esse número pode ser ajustado especificamente ao ambiente de um cliente.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-269">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="ebb4a-270">No recurso herdado de postagem do demonstrativo, um número ilimitado de tarefas de lote foi criado ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-270">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="ebb4a-271">Os resultados foram cargas, custos indiretos e inimagináveis no servidor do lote.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-271">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="ebb4a-272">Os demonstrativos são enfileirados de forma eficiente para processando priorizando demonstrativos com o número máximo de transações.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-272">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="ebb4a-273">Processos em lote como **Calcular demonstrativos em lote** e **Lançar demonstrativos em lote** são executados apenas no modo em lote.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-273">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="ebb4a-274">No recurso de lançamento de demonstrativo herdado, os usuários podem escolher executar esses processos em lote em um modo interativo como operação de único thread, diferentemente dos processos em lote que tem vários threads.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-274">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="ebb4a-275">No recurso herdado de postagem do demonstrativo, qualquer falha de uma tarefa de lote coloca os trabalhos em lotes inteiros um estado de erro.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-275">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="ebb4a-276">No recurso melhorado, falhas de tarefa de lote não colocam o trabalho em lotes em um estado de erro se outras tarefas em lotes foram concluídas com sucesso.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-276">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="ebb4a-277">Você deve avaliar o status de postagem de uma execução de lote usando a página **Demonstrativos**, na qual você pode ver todos os demonstrativos que não sejam postados devido a erros.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-277">You should assess the posting status for a batch execution run by using the **Statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="ebb4a-278">No recurso herdado de postagem do demonstrativo, a primeira ocorrência de uma falha de demonstrativo causa a falha inteira do lote.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-278">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="ebb4a-279">Os demonstrativos restantes não são processados.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-279">The remaining statements aren't processed.</span></span> <span data-ttu-id="ebb4a-280">No recurso aprimorado, o processo de lotes continua a processar todas as instruções, se uma das instruções falha.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-280">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="ebb4a-281">Um benefício é que os usuários ganham a visibilidade em número exato de demonstrativos que têm erros.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-281">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="ebb4a-282">Portanto, os usuários não precisam ficar presos em um loop contínuo de correção de erros e execução do processo de lançamento de demonstrativo até que todas as instruções sejam lançadas.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-282">Therefore, users don't have to be stuck in a continuous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="ebb4a-283">Orientações gerais sobre o processo de lançamento de demonstrativo</span><span class="sxs-lookup"><span data-stu-id="ebb4a-283">General guidance about the statement posting process</span></span>

- <span data-ttu-id="ebb4a-284">Recomendamos que você execute o processo de postagem do demonstrativo em um lote, porque as definições de lote se aproveitam da estrutura de lotes em termos de multithreading.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-284">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="ebb4a-285">Multithreading é necessário para tratar os enormes volumes de transações que normalmente são vistos nos lançamentos de demonstrativos.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-285">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="ebb4a-286">Recomendamos que você ative o estoque físico negativo no grupo de modelo de item, para que você tenha uma experiência de lançamento perfeita.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-286">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="ebb4a-287">Em algumas situações, demonstrativos negativos não conseguirão ser lançados a menos que houvesse um estoque físico negativo.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-287">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="ebb4a-288">Por exemplo, em tese, se houver apenas uma unidade de um item em estoque e ela for uma transação de venda e uma transação de devolução do item, a transação deverá ser capaz ser lançada se o estoque negativo estiver ativado.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-288">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="ebb4a-289">Porém, como o processo de postagem de demonstrativo recebe a transação de vendas e a transação de devolução em uma única ordem de cliente, não há garantia de que a linha de vendas será lançada primeiro, acompanhada por linha de devolução.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-289">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="ebb4a-290">Portanto, erros podem ocorrer.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-290">Therefore, errors can occur.</span></span> <span data-ttu-id="ebb4a-291">Se o estoque negativo for ativado neste cenário, a postagem da transação não é afetada negativamente e o sistema refletirá corretamente o estoque.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-291">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="ebb4a-292">Recomenda-se usar a agregação enquanto você calcula e lança demonstrativos.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-292">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="ebb4a-293">Portanto, as seguintes configurações são recomendadas para alguns dos parâmetros de agregação:</span><span class="sxs-lookup"><span data-stu-id="ebb4a-293">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="ebb4a-294">Vá para **Varejo e Comércio** \> **Configuração da sede** \> **Parâmetros** \> **Parâmetros de comércio**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-294">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="ebb4a-295">Depois, na guia **Lançamento**, na Guia Rápida **Atualização de estoque**, no campo **Nível de detalhes**, selecione **Resumo**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-295">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="ebb4a-296">Vá para **Varejo e Comércio** \> **Configuração da sede** \> **Parâmetros** \> **Parâmetros de comércio**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-296">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="ebb4a-297">Em seguida, na guia **Lançamento**, na guia Rápida **Agregação**, defina a opção **Transações de comprovante** como **Sim**.</span><span class="sxs-lookup"><span data-stu-id="ebb4a-297">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>
