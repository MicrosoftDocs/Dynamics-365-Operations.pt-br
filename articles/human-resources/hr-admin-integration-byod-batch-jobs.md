---
title: Otimizar trabalhos em lote agendados de BYOD
description: Este tópico explica como otimizar o desempenho quando estiver usando o recurso Trazer seu próprio banco de dados (BYOD) com o Microsoft Dynamics 365 Human Resources.
author: andreabichsel
ms.date: 08/17/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.search.scope: Human Resources
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anbichse
ms.search.validFrom: 2020-08-10
ms.dyn365.ops.version: Platform update 36
ms.openlocfilehash: ed3ebbf09403090a1173c3cda1a4b11b74419b90
ms.sourcegitcommit: 879ee8a10e6158885795dce4b3db5077540eec41
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/18/2021
ms.locfileid: "6052664"
---
# <a name="optimize-byod-scheduled-batch-jobs"></a><span data-ttu-id="334cb-103">Otimizar trabalhos em lote agendados de BYOD</span><span class="sxs-lookup"><span data-stu-id="334cb-103">Optimize BYOD scheduled batch jobs</span></span>

[!include [Applies to Human Resources](../includes/applies-to-hr.md)]

<span data-ttu-id="334cb-104">Este tópico explica como otimizar o desempenho quando estiver usando o recurso Trazer seu próprio banco de dados (BYOD).</span><span class="sxs-lookup"><span data-stu-id="334cb-104">This topic explains how to optimize performance when you're using the bring your own database (BYOD) feature.</span></span> <span data-ttu-id="334cb-105">Para obter mais informações sobre o BYOD, consulte [Trazer seu próprio banco de dados (BYOD)](../fin-ops-core/dev-itpro/analytics/export-entities-to-your-own-database.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="334cb-105">For more information about BYOD, see [Bring your own database (BYOD)](../fin-ops-core/dev-itpro/analytics/export-entities-to-your-own-database.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json).</span></span>

## <a name="performance-considerations-for-data-export"></a><span data-ttu-id="334cb-106">Considerações de desempenho para exportação de dados</span><span class="sxs-lookup"><span data-stu-id="334cb-106">Performance considerations for data export</span></span>

<span data-ttu-id="334cb-107">Depois que as entidades são publicadas no banco de dados de destino, você pode usar a função de Exportação no espaço de trabalho **Gerenciamento de dados** para mover os dados.</span><span class="sxs-lookup"><span data-stu-id="334cb-107">After entities are published to the destination database, you can use the Export function in the **Data management** workspace to move data.</span></span> <span data-ttu-id="334cb-108">A função Exportar permite definir um trabalho de Movimentação de dados que contém uma ou mais entidades.</span><span class="sxs-lookup"><span data-stu-id="334cb-108">The Export function lets you define a Data movement job that contains one or more entities.</span></span> <span data-ttu-id="334cb-109">Para obter mais informações sobre exportação de dados, consulte [Visão geral de trabalhos de importação e exportação de dados](../fin-ops-core/dev-itpro/data-entities/data-import-export-job.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="334cb-109">For more information about data export, see [Data import and export jobs overview](../fin-ops-core/dev-itpro/data-entities/data-import-export-job.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json).</span></span>

<span data-ttu-id="334cb-110">Você pode usar a página **Exportar** para exportar dados para diferentes formatos de dados de destino, como um arquivo CSV (valores separados por vírgulas).</span><span class="sxs-lookup"><span data-stu-id="334cb-110">You can use the **Export** page to export data into different target data formats, such as a comma-separated values (CSV) file.</span></span> <span data-ttu-id="334cb-111">Essa página também oferece suporte a bancos de dados SQL como outro destino.</span><span class="sxs-lookup"><span data-stu-id="334cb-111">This page also supports SQL databases as another destination.</span></span>

<span data-ttu-id="334cb-112">Você pode criar um projeto de dados que tenha várias entidades e use um trabalho em lotes para programar o projeto de dados a ser executado.</span><span class="sxs-lookup"><span data-stu-id="334cb-112">You can create a data project that has multiple entities and use a batch job to schedule that data project to run.</span></span> <span data-ttu-id="334cb-113">Se você selecionar a opção **Exportar no lote**, poderá agendar o trabalho de exportação de dados para ser executado periodicamente.</span><span class="sxs-lookup"><span data-stu-id="334cb-113">If you select the **Export in batch** option, you can schedule the data export job to run periodically.</span></span>

<span data-ttu-id="334cb-114">Para ajudar a preservar a confiabilidade geral da exportação do BYOD, você deve ter cuidado ao adicionar várias entidades a um projeto de exportação.</span><span class="sxs-lookup"><span data-stu-id="334cb-114">To help preserve the overall reliability of the BYOD export, you must be careful when you add multiple entities to an export project.</span></span> <span data-ttu-id="334cb-115">Ao determinar o número de entidades a serem adicionadas ao mesmo projeto, considere os seguintes parâmetros:</span><span class="sxs-lookup"><span data-stu-id="334cb-115">When you're determining the number of entities to add to the same project, consider the following parameters:</span></span>

- <span data-ttu-id="334cb-116">A complexidade das entidades</span><span class="sxs-lookup"><span data-stu-id="334cb-116">The complexity of the entities</span></span>
- <span data-ttu-id="334cb-117">O volume de dados esperado por entidade</span><span class="sxs-lookup"><span data-stu-id="334cb-117">The expected data volume per entity</span></span>
- <span data-ttu-id="334cb-118">O tempo geral que será necessário para concluir a exportação no nível do trabalho</span><span class="sxs-lookup"><span data-stu-id="334cb-118">The overall time that will be required to complete the export at the job level</span></span>

<span data-ttu-id="334cb-119">Para obter o melhor desempenho, evite adicionar centenas de entidades a um único projeto.</span><span class="sxs-lookup"><span data-stu-id="334cb-119">For the best performance, avoid adding hundreds of entities to a single project.</span></span> <span data-ttu-id="334cb-120">É recomendável criar vários trabalhos, cada um com menos entidades.</span><span class="sxs-lookup"><span data-stu-id="334cb-120">We recommend that you create multiple jobs, each of which contains fewer entities.</span></span>

## <a name="scheduling-byod-batch-jobs"></a><span data-ttu-id="334cb-121">Agendando trabalhos em lote de BYOD</span><span class="sxs-lookup"><span data-stu-id="334cb-121">Scheduling BYOD batch jobs</span></span>

<span data-ttu-id="334cb-122">Para ajudar a reduzir o impacto sobre os usuários do Microsoft Dynamics 365 Human Resources, execute os trabalhos em lotes de BYOD à noite ou após horas.</span><span class="sxs-lookup"><span data-stu-id="334cb-122">To help reduce the impact on users of Microsoft Dynamics 365 Human Resources, run BYOD batch jobs at night or after hours.</span></span> <span data-ttu-id="334cb-123">Verifique o fuso horário desses trabalhos em lotes recorrentes.</span><span class="sxs-lookup"><span data-stu-id="334cb-123">Be sure to check the time zone for recurring batch jobs.</span></span> <span data-ttu-id="334cb-124">Alguns trabalhos em lotes podem usar o Horário Padrão do Pacífico (PST).</span><span class="sxs-lookup"><span data-stu-id="334cb-124">Some batch jobs might use Pacific Standard Time (PST).</span></span>

<span data-ttu-id="334cb-125">Para ajudar a evitar problemas de desempenho, considere os seguintes fatores ao configurar a frequência de agendamento para trabalhos em lotes de BYOD:</span><span class="sxs-lookup"><span data-stu-id="334cb-125">To help avoid performance issues, consider the following factors when you configure the scheduling frequency for BYOD batch jobs:</span></span>

- <span data-ttu-id="334cb-126">O tempo necessário para concluir cada trabalho em lotes</span><span class="sxs-lookup"><span data-stu-id="334cb-126">The time that is required to complete each batch job</span></span>
- <span data-ttu-id="334cb-127">A necessidade comercial dos dados no BYOD</span><span class="sxs-lookup"><span data-stu-id="334cb-127">The business need for the data in BYOD</span></span>

<span data-ttu-id="334cb-128">Defina a frequência de cada trabalho em lotes para um valor que garanta que o trabalho pode ser concluído bem antes do próximo horário de execução agendado.</span><span class="sxs-lookup"><span data-stu-id="334cb-128">Set the frequency for each batch job to a value that ensures that the job can be completed well before its next scheduled run time.</span></span> <span data-ttu-id="334cb-129">Evite executar vários trabalhos em paralelo, pois essa abordagem pode afetar negativamente o desempenho de Recursos Humanos.</span><span class="sxs-lookup"><span data-stu-id="334cb-129">Avoid running multiple jobs in parallel, because this approach can negatively affect the performance of Human Resources.</span></span>

<span data-ttu-id="334cb-130">Para obter o melhor desempenho, use sempre a opção **Exportar no lote** na página **Exportar** para agendar trabalhos em lotes de BYOD.</span><span class="sxs-lookup"><span data-stu-id="334cb-130">For the best performance, always use the **Export in batch** option on the **Export** page to schedule BYOD batch jobs.</span></span> <span data-ttu-id="334cb-131">Evite agendar exportações recorrentes em **Gerenciar \> Gerenciar trabalhos de dados recorrentes**.</span><span class="sxs-lookup"><span data-stu-id="334cb-131">Avoid scheduling recurring exports at **Manage \> Manage recurring data jobs**.</span></span>

## <a name="incremental-export"></a><span data-ttu-id="334cb-132">Exportação incremental</span><span class="sxs-lookup"><span data-stu-id="334cb-132">Incremental export</span></span>

<span data-ttu-id="334cb-133">Ao adicionar uma entidade para exportação de dados, você pode fazer um push incremental (exportação) ou um push completo.</span><span class="sxs-lookup"><span data-stu-id="334cb-133">When you add an entity for data export, you can do either an incremental push (export) or a full push.</span></span> <span data-ttu-id="334cb-134">Um push completo exclui todos os registros existentes de uma entidade do banco de dados do BYOD.</span><span class="sxs-lookup"><span data-stu-id="334cb-134">A full push deletes all existing records from an entity in the BYOD database.</span></span> <span data-ttu-id="334cb-135">Em seguida, o insere o conjunto atual de registros da entidade de Recursos Humanos.</span><span class="sxs-lookup"><span data-stu-id="334cb-135">It then inserts the current set of records from the Human Resources entity.</span></span>

<span data-ttu-id="334cb-136">Para fazer um envio incremental, você deve habilitar o controle de alterações para cada entidade na página **Entidades**.</span><span class="sxs-lookup"><span data-stu-id="334cb-136">To do an incremental push, you must turn on change tracking for each entity on the **Entities** page.</span></span> <span data-ttu-id="334cb-137">Para obter mais informações, consulte [Habilitar controle de alterações para entidades](../fin-ops-core/dev-itpro/data-entities/entity-change-track.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="334cb-137">For more information, see [Enable change tracking for entities](../fin-ops-core/dev-itpro/data-entities/entity-change-track.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json).</span></span>

<span data-ttu-id="334cb-138">Se você selecionar um push incremental, o primeiro push será sempre um push completo.</span><span class="sxs-lookup"><span data-stu-id="334cb-138">If you select an incremental push, the first push is always a full push.</span></span> <span data-ttu-id="334cb-139">O SQL controla as alterações desse primeiro push completo.</span><span class="sxs-lookup"><span data-stu-id="334cb-139">SQL tracks changes from this first full push.</span></span> <span data-ttu-id="334cb-140">Quando um novo registro é inserido ou quando um registro é atualizado ou excluído, a alteração é refletida na entidade de destino.</span><span class="sxs-lookup"><span data-stu-id="334cb-140">When a new record is inserted, or when a record is updated or deleted, the change is reflected in the destination entity.</span></span>

## <a name="time-outs"></a><span data-ttu-id="334cb-141">Tempo limite</span><span class="sxs-lookup"><span data-stu-id="334cb-141">Time-outs</span></span>

<span data-ttu-id="334cb-142">Estes são os tempos limite padrão para exportações de BYOD:</span><span class="sxs-lookup"><span data-stu-id="334cb-142">Here are the default time-outs for BYOD exports:</span></span>

- <span data-ttu-id="334cb-143">Dez minutos para operações de truncamento</span><span class="sxs-lookup"><span data-stu-id="334cb-143">Ten minutes for truncation operations</span></span>
- <span data-ttu-id="334cb-144">Uma hora para operações de inserção em massa</span><span class="sxs-lookup"><span data-stu-id="334cb-144">One hour for bulk insert operations</span></span>

<span data-ttu-id="334cb-145">Quando os volumes são altos, essas configurações de tempo limite podem não ser suficientes.</span><span class="sxs-lookup"><span data-stu-id="334cb-145">When volumes are high, these time-out settings might not be sufficient.</span></span> <span data-ttu-id="334cb-146">Para atualizá-los, vá para **Gerenciamento de dados \> Parâmetros de estrutura \> Trazer seu próprio banco de dados**.</span><span class="sxs-lookup"><span data-stu-id="334cb-146">To update them, go to **Data management \> Framework parameters \> Bring your own database**.</span></span> <span data-ttu-id="334cb-147">Esses tempos limites são específicos da empresa e devem ser definidos separadamente para cada empresa.</span><span class="sxs-lookup"><span data-stu-id="334cb-147">These time-outs are company-specific and must be set separately for each company.</span></span>

## <a name="known-limitations"></a><span data-ttu-id="334cb-148">Limitações conhecidas</span><span class="sxs-lookup"><span data-stu-id="334cb-148">Known limitations</span></span>

<span data-ttu-id="334cb-149">O recurso de BYOD tem as seguintes limitações:</span><span class="sxs-lookup"><span data-stu-id="334cb-149">The BYOD feature has the following limitations:</span></span>

- <span data-ttu-id="334cb-150">Não deve haver bloqueios ativos no seu banco de dados durante a sincronização.</span><span class="sxs-lookup"><span data-stu-id="334cb-150">There should be no active locks on your database during synchronization.</span></span> <span data-ttu-id="334cb-151">Bloqueios ativos podem causar gravações lentas ou até mesmo falhas na exportação de dados para o banco de dado SQL do Azure.</span><span class="sxs-lookup"><span data-stu-id="334cb-151">Active locks can cause slow writes or even failure to export data to your Azure SQL database.</span></span>
- <span data-ttu-id="334cb-152">Não é possível exportar entidades compostas para o seu próprio banco de dados.</span><span class="sxs-lookup"><span data-stu-id="334cb-152">You can't export composite entities into your own database.</span></span> <span data-ttu-id="334cb-153">No momento, não há suporte para entidades compostas.</span><span class="sxs-lookup"><span data-stu-id="334cb-153">Currently, composite entities aren't supported.</span></span> <span data-ttu-id="334cb-154">Você deve exportar entidades individuais que compõem a entidade composta.</span><span class="sxs-lookup"><span data-stu-id="334cb-154">You must export individual entities that make up the composite entity.</span></span> <span data-ttu-id="334cb-155">No entanto, você pode exportar ambas as entidades no mesmo projeto de dados.</span><span class="sxs-lookup"><span data-stu-id="334cb-155">However, you can export both entities in the same data project.</span></span>
- <span data-ttu-id="334cb-156">Entidades que não têm chaves exclusivas não podem ser exportadas usando o push incremental.</span><span class="sxs-lookup"><span data-stu-id="334cb-156">Entities that don't have unique keys can't be exported by using incremental push.</span></span> <span data-ttu-id="334cb-157">Você pode enfrentar essa limitação, especialmente ao tentar exportar incrementalmente registros de algumas entidades prontas.</span><span class="sxs-lookup"><span data-stu-id="334cb-157">You might face this limitation especially when you try to incrementally export records from a few ready-made entities.</span></span> <span data-ttu-id="334cb-158">Como essas entidades foram criadas para habilitar a importação de dados, elas não têm uma chave exclusiva.</span><span class="sxs-lookup"><span data-stu-id="334cb-158">Because these entities were designed to enable the import of data, they don't have a unique key.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="334cb-159">Solução de problemas</span><span class="sxs-lookup"><span data-stu-id="334cb-159">Troubleshooting</span></span>

### <a name="incremental-push-doesnt-work-correctly"></a><span data-ttu-id="334cb-160">A expansão incremental não funciona corretamente</span><span class="sxs-lookup"><span data-stu-id="334cb-160">Incremental push doesn't work correctly</span></span>

<span data-ttu-id="334cb-161">**Problema:** Quando um push completo ocorre para uma entidade, você vê um grande conjunto de registros no BYOD quando usa uma instrução **Select**.</span><span class="sxs-lookup"><span data-stu-id="334cb-161">**Issue:** When a full push occurs for an entity, you see a large set of records in BYOD when you use a **select** statement.</span></span> <span data-ttu-id="334cb-162">No entanto, ao fazer um push incremental, você verá apenas alguns registros no BYOD.</span><span class="sxs-lookup"><span data-stu-id="334cb-162">However, when you do an incremental push, you see only a few records in BYOD.</span></span> <span data-ttu-id="334cb-163">Parece que o push incremental excluiu todos os registros e adicionou somente os registros alterados em BYOD.</span><span class="sxs-lookup"><span data-stu-id="334cb-163">It seems as though the incremental push deleted all the records and added only the changed records in BYOD.</span></span>

<span data-ttu-id="334cb-164">**Solução:** As tabelas de controle de alterações do SQL podem não estar no estado esperado.</span><span class="sxs-lookup"><span data-stu-id="334cb-164">**Solution:** The SQL change tracking tables might not be in the expected state.</span></span> <span data-ttu-id="334cb-165">Em casos desse tipo, recomendamos que você desative o controle de alterações para a entidade e ative-o novamente.</span><span class="sxs-lookup"><span data-stu-id="334cb-165">In cases of this type, we recommend that you turn off change tracking for the entity and then turn it back on.</span></span> <span data-ttu-id="334cb-166">Para obter mais informações, consulte [Habilitar controle de alterações para entidades](../fin-ops-core/dev-itpro/data-entities/entity-change-track.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="334cb-166">For more information, see [Enable change tracking for entities](../fin-ops-core/dev-itpro/data-entities/entity-change-track.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json).</span></span>

### <a name="staging-tables-arent-clearing"></a><span data-ttu-id="334cb-167">Tabelas de preparo não são limpas</span><span class="sxs-lookup"><span data-stu-id="334cb-167">Staging tables aren't clearing</span></span>

<span data-ttu-id="334cb-168">**Problema:** ao usar o preparo para o projeto, as tabelas de preparo não são limpas corretamente.</span><span class="sxs-lookup"><span data-stu-id="334cb-168">**Issue:** When using staging for the project, the staging tables don't clear out correctly.</span></span> <span data-ttu-id="334cb-169">Os dados nas tabelas continuam a crescer, causando problemas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="334cb-169">The data in the tables then continues to grow, causing performance issues.</span></span>

<span data-ttu-id="334cb-170">**Solução:** sete dias de histórico são mantidos nas tabelas de preparo.</span><span class="sxs-lookup"><span data-stu-id="334cb-170">**Solution:** Seven days of history is maintained in the staging tables.</span></span> <span data-ttu-id="334cb-171">Os dados históricos com mais de sete dias são automaticamente limpos das tabelas de preparo pelo trabalho em lotes **Limpeza de preparo de importação/exportação**.</span><span class="sxs-lookup"><span data-stu-id="334cb-171">Historical data older than seven days is automatically cleared from the staging tables by the **Import export staging cleanup** batch job.</span></span> <span data-ttu-id="334cb-172">Se esse trabalho ficar preso, as tabelas não serão limpas corretamente.</span><span class="sxs-lookup"><span data-stu-id="334cb-172">If this job gets stuck, the tables won't clear out correctly.</span></span> <span data-ttu-id="334cb-173">A reinicialização desse trabalho em lotes continuará o processo para limpar automaticamente as tabelas de preparo.</span><span class="sxs-lookup"><span data-stu-id="334cb-173">Restarting this batch job will continue the process to automatically clear out the staging tables.</span></span>

## <a name="see-also"></a><span data-ttu-id="334cb-174">Consulte também</span><span class="sxs-lookup"><span data-stu-id="334cb-174">See also</span></span>

[<span data-ttu-id="334cb-175">Visão geral do gerenciamento de dados</span><span class="sxs-lookup"><span data-stu-id="334cb-175">Data management overview</span></span>](../fin-ops-core/dev-itpro/data-entities/data-entities-data-packages.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json)<br>
[<span data-ttu-id="334cb-176">Trazer seu próprio banco de dados (BYOD)</span><span class="sxs-lookup"><span data-stu-id="334cb-176">Bring your own database (BYOD)</span></span>](../fin-ops-core/dev-itpro/analytics/export-entities-to-your-own-database.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json)<br>
[<span data-ttu-id="334cb-177">Visão geral de trabalhos de importação e exportação de dados</span><span class="sxs-lookup"><span data-stu-id="334cb-177">Data import and export jobs overview</span></span>](../fin-ops-core/dev-itpro/data-entities/data-import-export-job.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json)<br>
[<span data-ttu-id="334cb-178">Habilitar o controle de alterações para entidades</span><span class="sxs-lookup"><span data-stu-id="334cb-178">Enable change tracking for entities</span></span>](../fin-ops-core/dev-itpro/data-entities/entity-change-track.md?toc=%2fdynamics365%2fhuman-resources%2ftoc.json)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
