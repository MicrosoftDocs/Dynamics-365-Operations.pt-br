---
title: Resultados de modelos de aprendizado de máquina (versão prévia)
description: Este tópico discute as matrizes de confusão, os problemas de classificação e a acurácia nos modelos ML (aprendizado de máquina). O objetivo é aprimorar sua compreensão da acurácia em resultados de previsão de ML.
author: ShivamPandey-msft
manager: AnnBe
ms.date: 06/05/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-07-14
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 5223bdfbc0f5828b5dccac30362783075ce8157f
ms.sourcegitcommit: f59df61799915f6a79aec7e3e8664c02df6597da
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/22/2021
ms.locfileid: "5044363"
---
# <a name="results-of-machine-learning-models-preview"></a><span data-ttu-id="c653a-104">Resultados de modelos de aprendizado de máquina (versão prévia)</span><span class="sxs-lookup"><span data-stu-id="c653a-104">Results of machine learning models (preview)</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="c653a-105">Este tópico discute as matrizes de confusão, os problemas de classificação e a acurácia nos modelos ML (aprendizado de máquina).</span><span class="sxs-lookup"><span data-stu-id="c653a-105">This topic discusses confusion matrices, classification problems, and accuracy in machine learning (ML) models.</span></span> <span data-ttu-id="c653a-106">O objetivo é aprimorar sua compreensão da acurácia em resultados de previsão de ML.</span><span class="sxs-lookup"><span data-stu-id="c653a-106">The purpose is to enhance your understanding of accuracy in ML prediction results.</span></span> <span data-ttu-id="c653a-107">O público-alvo inclui engenheiros, analistas e gerentes que desejam criar conhecimentos e habilidades em ciência de dados.</span><span class="sxs-lookup"><span data-stu-id="c653a-107">The target audience includes engineers, analysts, and managers who want to build their knowledge and skills in data science.</span></span>

## <a name="confusion-matrix"></a><span data-ttu-id="c653a-108">Matriz de confusão</span><span class="sxs-lookup"><span data-stu-id="c653a-108">Confusion matrix</span></span>
<span data-ttu-id="c653a-109">Depois que um problema de ML é treinado em um conjunto de dados históricos, ele é testado usando dados que são retidos a partir do processo de treinamento.</span><span class="sxs-lookup"><span data-stu-id="c653a-109">After a supervised ML problem is trained on a set of historical data, it's tested by using data that is withheld from the training process.</span></span> <span data-ttu-id="c653a-110">Dessa forma, você pode comparar as previsões do modelo treinado com os valores reais.</span><span class="sxs-lookup"><span data-stu-id="c653a-110">In this way, you can compare the predictions from the trained model with the actual values.</span></span> <span data-ttu-id="c653a-111">A matriz de confusão fornece um meio de avaliar o êxito de um problema de classificação e onde ele comete erros (ou seja, onde ele se torna "confuso").</span><span class="sxs-lookup"><span data-stu-id="c653a-111">The confusion matrix provides a means of evaluating how successful a classification problem is and where it makes mistakes (that is, where it becomes "confused").</span></span>

<span data-ttu-id="c653a-112">Por exemplo, seu objetivo é prever se um animal de estimação é um cachorro ou um gato, com base em alguns atributos físicos e comportamentais.</span><span class="sxs-lookup"><span data-stu-id="c653a-112">For example, your objective is to predict whether a pet is a dog or a cat, based on some physical and behavioral attributes.</span></span> <span data-ttu-id="c653a-113">Se você tiver um conjunto de dados de teste que contém 30 cachorros e 20 gatos, a matriz de confusão pode ser semelhante à ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="c653a-113">If you have a test dataset that contains 30 dogs and 20 cats, the confusion matrix might resemble the following illustration.</span></span>

![Exemplo de previsão de espécies](media/species-prediction-matrix.png)

<span data-ttu-id="c653a-115">Os números nas células verdes representam previsões corretas.</span><span class="sxs-lookup"><span data-stu-id="c653a-115">The numbers in the green cells represent correct predictions.</span></span> <span data-ttu-id="c653a-116">Como você pode ver, o modelo previu corretamente uma porcentagem maior dos gatos reais.</span><span class="sxs-lookup"><span data-stu-id="c653a-116">As you can see, the model predicted a higher percentage of the actual cats correctly.</span></span> <span data-ttu-id="c653a-117">A acurácia geral do modelo é fácil de calcular.</span><span class="sxs-lookup"><span data-stu-id="c653a-117">The overall accuracy of the model is easy to calculate.</span></span> <span data-ttu-id="c653a-118">Nesse caso, é 42 ÷ 50 ou 0,84.</span><span class="sxs-lookup"><span data-stu-id="c653a-118">In this case, it's 42 ÷ 50, or 0.84.</span></span>

### <a name="multi-class-classifiers-in-a-confusion-matrix"></a><span data-ttu-id="c653a-119">Classificadores de várias classes em uma matriz de confusão</span><span class="sxs-lookup"><span data-stu-id="c653a-119">Multi-class classifiers in a confusion matrix</span></span>

<span data-ttu-id="c653a-120">A maioria das discussões sobre a matriz de confusão concentra-se em classificadores binários, como no exemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="c653a-120">Most discussions about the confusion matrix are focused on binary classifiers, as in the preceding example.</span></span> <span data-ttu-id="c653a-121">Esse é um caso especial em que outras métricas podem ser consideradas, como sensibilidade e revocação.</span><span class="sxs-lookup"><span data-stu-id="c653a-121">This case is a special case where other metrics can be considered, such as sensitivity and recall.</span></span>

<span data-ttu-id="c653a-122">Em seguida, consideraremos um problema de classificação para um cenário de finanças que tem três estados.</span><span class="sxs-lookup"><span data-stu-id="c653a-122">Next, we will consider a classification problem for a finance scenario that has three states.</span></span> <span data-ttu-id="c653a-123">O modelo prevê se uma nota fiscal de cliente será paga dentro do prazo, atrasada ou muito atrasada.</span><span class="sxs-lookup"><span data-stu-id="c653a-123">The model predicts whether a customer invoice will be paid on time, late, or very late.</span></span> <span data-ttu-id="c653a-124">Por exemplo, de 100 faturas teste, 50 são pagas dentro do prazo, 35 são pagas atrasadas e 15 são pagas muito atrasadas.</span><span class="sxs-lookup"><span data-stu-id="c653a-124">For example, out of 100 test invoices, 50 are paid on time, 35 are paid late, and 15 are paid very late.</span></span> <span data-ttu-id="c653a-125">Nesse caso, um modelo pode produzir uma matriz de confusão que se assemelha à ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="c653a-125">In this case, a model might produce a confusion matrix that resembles the following illustration.</span></span>

![Modelo 1](media/payment-prediction-matrix.png)<span data-ttu-id="c653a-127">]</span><span class="sxs-lookup"><span data-stu-id="c653a-127">]</span></span>

<span data-ttu-id="c653a-128">Uma matriz de confusão fornece mais informações do que uma métrica de acurácia simples.</span><span class="sxs-lookup"><span data-stu-id="c653a-128">A confusion matrix provides significantly more information than a simple accuracy metric.</span></span> <span data-ttu-id="c653a-129">No entanto, ela ainda é relativamente fácil entender.</span><span class="sxs-lookup"><span data-stu-id="c653a-129">However, it's still relatively easy to understand.</span></span> <span data-ttu-id="c653a-130">Uma matriz de confusão informa se você tem um conjunto de dados equilibrado no qual as classes de saída têm contagens semelhantes.</span><span class="sxs-lookup"><span data-stu-id="c653a-130">A confusion matrix tells you whether you have a balanced dataset where the output classes have similar counts.</span></span> <span data-ttu-id="c653a-131">Para o cenário de várias classes, ela informa o quanto uma previsão pode estar errada quando as classes de saída são ordinais, como no exemplo anterior sobre pagamentos de cliente.</span><span class="sxs-lookup"><span data-stu-id="c653a-131">For the multi-class scenario, it tells you how far off a prediction might be when the output classes are ordinal, as in the preceding example about customer payments.</span></span>

## <a name="model-accuracy"></a><span data-ttu-id="c653a-132">Acurácia do modelo</span><span class="sxs-lookup"><span data-stu-id="c653a-132">Model accuracy</span></span> 
<span data-ttu-id="c653a-133">Diferentes métricas de acurácia têm a vantagem de quantificar a qualidade do modelo.</span><span class="sxs-lookup"><span data-stu-id="c653a-133">Different accuracy metrics have the advantage of quantifying the model quality.</span></span> 

<span data-ttu-id="c653a-134">Como a acurácia é uma métrica fácil de compreender, é um bom ponto de partida para explicar um modelo a outras pessoas, especialmente para os usuários do modelo que não são cientistas de dados.</span><span class="sxs-lookup"><span data-stu-id="c653a-134">Because accuracy is an easy metric to understand, it's a good starting point for explaining a model to other people, especially to users of the model who aren't data scientists.</span></span> <span data-ttu-id="c653a-135">Não é necessário compreender estatísticas para compreender a acurácia do modelo.</span><span class="sxs-lookup"><span data-stu-id="c653a-135">No understanding of statistics is required to understand the model's accuracy.</span></span> <span data-ttu-id="c653a-136">Quando houver uma matriz de confusão disponível, ela fornecerá mais informações sobre o desempenho do modelo.</span><span class="sxs-lookup"><span data-stu-id="c653a-136">When a confusion matrix is available, it provides further insight into the model's performance.</span></span>

<span data-ttu-id="c653a-137">No entanto, para ter uma compreensão mais abrangente, vários desafios associados a acurácia devem ser observados.</span><span class="sxs-lookup"><span data-stu-id="c653a-137">However, for a more thorough understanding, several challenges that are associated with accuracy should be noted.</span></span> <span data-ttu-id="c653a-138">A utilidade da métrica depende do contexto do problema.</span><span class="sxs-lookup"><span data-stu-id="c653a-138">The usefulness of the metric depends on the context of the problem.</span></span> <span data-ttu-id="c653a-139">Uma pergunta que geralmente surge em relação ao desempenho do modelo é "Qual é a eficácia do modelo?"</span><span class="sxs-lookup"><span data-stu-id="c653a-139">A question that often arises in relation to model performance is, "How good is the model?"</span></span> <span data-ttu-id="c653a-140">No entanto, a resposta para essa pergunta não é exatamente simples.</span><span class="sxs-lookup"><span data-stu-id="c653a-140">However, the answer to this question isn't necessarily straightforward.</span></span> <span data-ttu-id="c653a-141">Considere a seguinte matriz de confusão (modelo 2).</span><span class="sxs-lookup"><span data-stu-id="c653a-141">Consider the following confusion matrix (model 2).</span></span>

![Exemplo de previsão de pagamento com uma amostra maior](media/payment-prediction-matrix-2.png)

<span data-ttu-id="c653a-143">Um cálculo rápido mostra que a acurácia deste modelo é (70 + 10 + 3) ÷ 100 ou 0,83.</span><span class="sxs-lookup"><span data-stu-id="c653a-143">A quick calculation shows that this model's accuracy is (70 + 10 + 3) ÷ 100, or 0.83.</span></span> <span data-ttu-id="c653a-144">Na superfície, esse resultado parece ser melhor do que o resultado do modelo de várias classes anterior (modelo 1), que tem uma acurácia de 0,73.</span><span class="sxs-lookup"><span data-stu-id="c653a-144">On the surface, this result seems better than result for the previous multi-class model (model 1), which has an accuracy of 0.73.</span></span> <span data-ttu-id="c653a-145">Mas é realmente melhor?</span><span class="sxs-lookup"><span data-stu-id="c653a-145">But is it better?</span></span>

<span data-ttu-id="c653a-146">Para começar a discutir essa pergunta, considere a acurácia de uma suposição ingênua.</span><span class="sxs-lookup"><span data-stu-id="c653a-146">To begin to address this question, consider the accuracy of a naïve guess.</span></span> <span data-ttu-id="c653a-147">Para um problema de classificação, uma estimativa simples sempre prevê a classe mais comum.</span><span class="sxs-lookup"><span data-stu-id="c653a-147">For a classification problem, a simple guess will always predict the most common class.</span></span> <span data-ttu-id="c653a-148">Para o modelo 1, essa estimativa será "dentro do prazo" e produzirá uma acurácia de 0,50.</span><span class="sxs-lookup"><span data-stu-id="c653a-148">For model 1, that guess will be "on time," and it will produce an accuracy of 0.50.</span></span> <span data-ttu-id="c653a-149">A estimativa do modelo 2 também será "dentro do prazo" e produzirá uma acurácia de 0,80.</span><span class="sxs-lookup"><span data-stu-id="c653a-149">The guess for model 2 will also be "on time," and it will produce an accuracy of 0.80.</span></span> <span data-ttu-id="c653a-150">Como o modelo 1 melhora a suposição ingênua de 0,73 - 0,50 = 0,23, enquanto que o modelo 2 melhora a suposição ingênua de 0,83 – 0,80 = 0,03, o modelo 1 é melhor, mesmo que tenha uma acurácia menor.</span><span class="sxs-lookup"><span data-stu-id="c653a-150">Because model 1 improves on the naïve guess by 0.73 – 0.50 = 0.23, whereas model 2 improves on the naïve guess by 0.83 – 0.80 = 0.03, model 1 is a better model, even though it has lower accuracy.</span></span> <span data-ttu-id="c653a-151">O cálculo revela que a avaliação real da qualidade de um modelo requer mais contexto do que o valor de acurácia.</span><span class="sxs-lookup"><span data-stu-id="c653a-151">The calculation reveals that effective assessment of a model's quality requires more context than the accuracy value.</span></span>

<span data-ttu-id="c653a-152">É importante observar outro aspecto.</span><span class="sxs-lookup"><span data-stu-id="c653a-152">Another aspect is worth noting.</span></span> <span data-ttu-id="c653a-153">Considere um cenário no qual um teste médico é usado para detectar uma doença em uma paciente.</span><span class="sxs-lookup"><span data-stu-id="c653a-153">Consider a scenario where a medical test is used to detect a disease in a patient.</span></span> <span data-ttu-id="c653a-154">Esse é um problema de classificação binária em que um resultado positivo indica que a paciente tem a doença.</span><span class="sxs-lookup"><span data-stu-id="c653a-154">This problem is a binary classification problem where a positive result indicates that the patient has the disease.</span></span> <span data-ttu-id="c653a-155">Neste cenário, você deve pensar no impacto dos seguintes erros:</span><span class="sxs-lookup"><span data-stu-id="c653a-155">In this scenario, you must think about the impact of the following errors:</span></span>

- <span data-ttu-id="c653a-156">Falsos positivos, em que o teste diz que uma paciente tem a doença, mas ela não tem realmente</span><span class="sxs-lookup"><span data-stu-id="c653a-156">False positives, where the test says that a patient has the disease, but she doesn't really have it</span></span>
- <span data-ttu-id="c653a-157">Falsos negativos, em que o teste diz que uma paciente não tem a doença, mas ela tem</span><span class="sxs-lookup"><span data-stu-id="c653a-157">False negatives, where the test says that a patient doesn't have the disease, but he really does have it</span></span>

<span data-ttu-id="c653a-158">Obviamente, os dois tipos de erro são indesejados, mas qual é pior?</span><span class="sxs-lookup"><span data-stu-id="c653a-158">Obviously, both types of error are undesirable, but which is worse?</span></span> <span data-ttu-id="c653a-159">Mais uma vez, depende.</span><span class="sxs-lookup"><span data-stu-id="c653a-159">Again, it depends.</span></span> <span data-ttu-id="c653a-160">No caso de uma doença que ameaça a vida e exige tratamento rápido, a minimização de falsos negativos (seguidos de testes adicionais, espera-se) é algo prioritário.</span><span class="sxs-lookup"><span data-stu-id="c653a-160">In the case of a life-threatening disease that requires fast treatment, minimization of false negatives (hopefully followed by additional tests) takes priority.</span></span> <span data-ttu-id="c653a-161">Em outras situações menos críticas, os criadores de modelo podem minimizar falsos positivos.</span><span class="sxs-lookup"><span data-stu-id="c653a-161">In other, less critical situations, the model creators might minimize false positives instead.</span></span> <span data-ttu-id="c653a-162">De qualquer forma, uma conclusão razoável é que para determinar efetivamente a qualidade de um modelo, você deve ter mais informações do que as fornecidas por uma métrica de acurácia.</span><span class="sxs-lookup"><span data-stu-id="c653a-162">At any rate, a reasonable conclusion is that to effectively determine a model's quality, you must have more information than an accuracy metric provides.</span></span>

### <a name="recommendations"></a><span data-ttu-id="c653a-163">Recomendações</span><span class="sxs-lookup"><span data-stu-id="c653a-163">Recommendations</span></span>

<span data-ttu-id="c653a-164">A acurácia é uma ferramenta importante para a comunicação com especialistas em domínio que não estão familiarizados com as estatísticas.</span><span class="sxs-lookup"><span data-stu-id="c653a-164">Accuracy is an important tool for communicating with domain experts who aren't familiar with statistics.</span></span> <span data-ttu-id="c653a-165">No entanto, para que as informações sejam úteis, é fundamental que o contexto adicional seja fornecido juntamente com o valor de acurácia.</span><span class="sxs-lookup"><span data-stu-id="c653a-165">However, to make the information useful, it's critical that additional context be provided together with the accuracy value.</span></span>

<span data-ttu-id="c653a-166">Para o cenário de previsão de pagamento, você pode definir uma meta para o modelo ML que inclui fatores em diferentes comportamentos de pagamento.</span><span class="sxs-lookup"><span data-stu-id="c653a-166">For the payment prediction scenario, you can set a target for the ML model that includes factors in different payment behaviors.</span></span> <span data-ttu-id="c653a-167">A meta é que o modelo deve melhorar em uma suposição ingênua reduzindo o número de respostas incorretas em pelo menos 50%.</span><span class="sxs-lookup"><span data-stu-id="c653a-167">The target is that the model should improve upon a naïve guess by reducing the number of incorrect answers by at least 50 percent.</span></span> <span data-ttu-id="c653a-168">Em outras palavras, você quer uma acurácia alvo que divide o diferente entre a acurácia de uma suposição ingênua e 100%.</span><span class="sxs-lookup"><span data-stu-id="c653a-168">In other words, you want a target accuracy that splits the different between the accuracy of a naïve guess and 100 percent.</span></span>

<span data-ttu-id="c653a-169">A tabela a seguir resume esse princípio para as matrizes de confusão neste tópico.</span><span class="sxs-lookup"><span data-stu-id="c653a-169">The following table summarizes this principle for the confusion matrices in this topic.</span></span>

| <span data-ttu-id="c653a-170">Modelo</span><span class="sxs-lookup"><span data-stu-id="c653a-170">Model</span></span>   | <span data-ttu-id="c653a-171">Suposição ingênua</span><span class="sxs-lookup"><span data-stu-id="c653a-171">Naïve guess</span></span> | <span data-ttu-id="c653a-172">Alvo</span><span class="sxs-lookup"><span data-stu-id="c653a-172">Target</span></span> | <span data-ttu-id="c653a-173">Acurácia do modelo</span><span class="sxs-lookup"><span data-stu-id="c653a-173">Model accuracy</span></span> | <span data-ttu-id="c653a-174">A meta foi cumprida?</span><span class="sxs-lookup"><span data-stu-id="c653a-174">Is the goal met?</span></span>                                          |
|---------|-------------|--------|----------------|-----------------------------------------------------------|
| <span data-ttu-id="c653a-175">Modelo 1</span><span class="sxs-lookup"><span data-stu-id="c653a-175">Model 1</span></span> | <span data-ttu-id="c653a-176">0,50</span><span class="sxs-lookup"><span data-stu-id="c653a-176">0.50</span></span>        | <span data-ttu-id="c653a-177">0,75</span><span class="sxs-lookup"><span data-stu-id="c653a-177">0.75</span></span>   | <span data-ttu-id="c653a-178">0,73</span><span class="sxs-lookup"><span data-stu-id="c653a-178">0.73</span></span>           | <span data-ttu-id="c653a-179">Quase.</span><span class="sxs-lookup"><span data-stu-id="c653a-179">Almost.</span></span> <span data-ttu-id="c653a-180">Esse modelo melhora consideravelmente a estimativa.</span><span class="sxs-lookup"><span data-stu-id="c653a-180">This model significantly improves upon the guess.</span></span> |
| <span data-ttu-id="c653a-181">Modelo 2</span><span class="sxs-lookup"><span data-stu-id="c653a-181">Model 2</span></span> | <span data-ttu-id="c653a-182">0,80</span><span class="sxs-lookup"><span data-stu-id="c653a-182">0.80</span></span>        | <span data-ttu-id="c653a-183">0,90</span><span class="sxs-lookup"><span data-stu-id="c653a-183">0.90</span></span>   | <span data-ttu-id="c653a-184">0,83</span><span class="sxs-lookup"><span data-stu-id="c653a-184">0.83</span></span>           | <span data-ttu-id="c653a-185">Nº</span><span class="sxs-lookup"><span data-stu-id="c653a-185">No.</span></span> <span data-ttu-id="c653a-186">É necessário melhorar.</span><span class="sxs-lookup"><span data-stu-id="c653a-186">Improvement is required.</span></span>                              |

## <a name="classification-f1-accuracy"></a><span data-ttu-id="c653a-187">Acurácia f da classificação</span><span class="sxs-lookup"><span data-stu-id="c653a-187">Classification F1 accuracy</span></span>

<span data-ttu-id="c653a-188">A consideração final neste tópico é uma medida mais avançada da classificação de desempenho de ML, conhecida como acurácia f.</span><span class="sxs-lookup"><span data-stu-id="c653a-188">The final consideration in this topic is a more advanced measure of classification ML performance that is known as F1 accuracy.</span></span>

<span data-ttu-id="c653a-189">Para que a acurácia f possa ser definida, duas métricas adicionais devem ser introduzidas: precisão e revocação.</span><span class="sxs-lookup"><span data-stu-id="c653a-189">Before F1 accuracy can be defined, two additional metrics must be introduced: precision and recall.</span></span> <span data-ttu-id="c653a-190">A precisão indica o número total de previsões especificadas como positivas que são atribuídas corretamente.</span><span class="sxs-lookup"><span data-stu-id="c653a-190">Precision indicates how many of the total number of predictions that are specified as positive are correctly assigned.</span></span> <span data-ttu-id="c653a-191">Essa métrica também é conhecida como valor de previsão positivo.</span><span class="sxs-lookup"><span data-stu-id="c653a-191">This metric is also known as the positive predictive value.</span></span> <span data-ttu-id="c653a-192">Revocação é o número total de casos positivos reais que foram previstos corretamente.</span><span class="sxs-lookup"><span data-stu-id="c653a-192">Recall is the total number of the actual positive cases that were predicted correctly.</span></span> <span data-ttu-id="c653a-193">Essa métrica também é conhecida como sensibilidade.</span><span class="sxs-lookup"><span data-stu-id="c653a-193">This metric is also known as sensitivity.</span></span>

<span data-ttu-id="c653a-194">[![Resultados verdadeiros vs. falsos.](./media/tn-fn.png)](./media/tn-fn.png)</span><span class="sxs-lookup"><span data-stu-id="c653a-194">[![True results vs. false results](./media/tn-fn.png)](./media/tn-fn.png)</span></span>

<span data-ttu-id="c653a-195">Na matriz de confusão da ilustração anterior, essas métricas são calculadas da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="c653a-195">In the confusion matrix in the preceding illustration, these metrics are calculated in the following way:</span></span>

- <span data-ttu-id="c653a-196">Precisão = VP ÷ (VP + FP)</span><span class="sxs-lookup"><span data-stu-id="c653a-196">Precision = TP ÷ (TP + FP)</span></span>
- <span data-ttu-id="c653a-197">Revocação = VP ÷ (VP + FN)</span><span class="sxs-lookup"><span data-stu-id="c653a-197">Recall = TP ÷ (TP + FN)</span></span>

<span data-ttu-id="c653a-198">A medida f combina precisão e revocação.</span><span class="sxs-lookup"><span data-stu-id="c653a-198">The F1 measure combines precision and recall.</span></span> <span data-ttu-id="c653a-199">O resultado é a média harmônica dos dois valores.</span><span class="sxs-lookup"><span data-stu-id="c653a-199">The result is the harmonic mean of the two values.</span></span> <span data-ttu-id="c653a-200">Ele é calculado da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="c653a-200">It's calculated in the following way:</span></span>

- <span data-ttu-id="c653a-201">F = 2 × (precisão × revocação) ÷ (precisão + revocação)</span><span class="sxs-lookup"><span data-stu-id="c653a-201">F1 = 2 × (Precision × Recall) ÷ (Precision + Recall)</span></span>

<span data-ttu-id="c653a-202">Vejamos um exemplo concreto.</span><span class="sxs-lookup"><span data-stu-id="c653a-202">Let's look at a concrete example.</span></span> <span data-ttu-id="c653a-203">Anteriormente neste tópico, havia um exemplo de um modelo que previa se um animal era um cachorro ou um gato.</span><span class="sxs-lookup"><span data-stu-id="c653a-203">Earlier in this topic, there was an example of a model that predicted whether an animal was a dog or a cat.</span></span> <span data-ttu-id="c653a-204">A ilustração é repetida aqui.</span><span class="sxs-lookup"><span data-stu-id="c653a-204">The illustration is repeated here.</span></span>

<span data-ttu-id="c653a-205">[![Exemplo de previsão de espécies (repetido)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="c653a-205">[![Species prediction example (repeated)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span></span>

<span data-ttu-id="c653a-206">Estes serão os resultados se "cachorro" for usado como a resposta positiva.</span><span class="sxs-lookup"><span data-stu-id="c653a-206">Here are the results if "Dog" is used as the positive answer.</span></span>

- <span data-ttu-id="c653a-207">Precisão = 24 ÷ (24 + 2) = 0,9231</span><span class="sxs-lookup"><span data-stu-id="c653a-207">Precision = 24 ÷ (24 + 2) = 0.9231</span></span>
- <span data-ttu-id="c653a-208">Revocação = 24 ÷ (24 + 6) = 0,8</span><span class="sxs-lookup"><span data-stu-id="c653a-208">Recall = 24 ÷ (24 + 6) = 0.8</span></span>
- <span data-ttu-id="c653a-209">F = 2 × (0,9231 × 0,8) ÷ (0,9231 + 0,8) = 0,8572</span><span class="sxs-lookup"><span data-stu-id="c653a-209">F1 = 2 × (0.9231 × 0.8) ÷ (0.9231 + 0.8) = 0.8572</span></span>

<span data-ttu-id="c653a-210">Como você pode ver, o valor F encontra-se entre os valores de precisão e revocação.</span><span class="sxs-lookup"><span data-stu-id="c653a-210">As you can see, the F1 value is between the values for precision and recall.</span></span>

<span data-ttu-id="c653a-211">Embora a acurácia f não seja tão fácil de entender, ela adiciona nuances ao número de acurácia básica.</span><span class="sxs-lookup"><span data-stu-id="c653a-211">Although F1 accuracy isn't as easy to understand, it adds nuance to the basic accuracy number.</span></span> <span data-ttu-id="c653a-212">Ele também pode ajudar com conjuntos de dados não equilibrados, conforme mostra a seguinte discussão.</span><span class="sxs-lookup"><span data-stu-id="c653a-212">It can also help with unbalanced datasets, as the following discussion will show.</span></span>

<span data-ttu-id="c653a-213">A seção [Acurácia do modelo](#model-accuracy) deste tópico comparou as duas matrizes de confusão a seguir.</span><span class="sxs-lookup"><span data-stu-id="c653a-213">The [Model accuracy](#model-accuracy) section of this topic compared the following two confusion matrices.</span></span> <span data-ttu-id="c653a-214">Embora o primeiro modelo tenha a acurácia menor, ele foi considerado um modelo mais útil, pois mostrou mais melhorias do que a estimativa padrão de um pagamento dentro do prazo.</span><span class="sxs-lookup"><span data-stu-id="c653a-214">Even though the first model had lower accuracy, it was deemed a more useful model because it showed more improvement than the default guess of an on-time payment.</span></span>

![Exemplo de previsão de pagamento versus dados reais](media/payment-prediction-matrix.png)

![Exemplo de previsão de pagamento com uma amostra maior (repetido)](media/payment-prediction-matrix-2.png)

<span data-ttu-id="c653a-217">Vamos ver como esses dois modelos se comparam quando a medida f é usada.</span><span class="sxs-lookup"><span data-stu-id="c653a-217">Let's see how these two models compare when the F1 score is used.</span></span> <span data-ttu-id="c653a-218">A medida f considera a precisão e revocação de cada estado, e então o cálculo de macro f calcula a média da medida f em todos os estados para determinar uma medida f geral.</span><span class="sxs-lookup"><span data-stu-id="c653a-218">The F1 score factors in precision and recall for each state, and the F1 macro calculation then averages the F1 score across the states to determine an overall F1 score.</span></span> <span data-ttu-id="c653a-219">Há outras variantes f, mas o mais interessante é considerar a versão do macro, dada a mesma consideração que é dada a todos os três estados.</span><span class="sxs-lookup"><span data-stu-id="c653a-219">There are other F1 variants, but it's of greater interest to consider the macro version, given the equal consideration that is given to all three states.</span></span>

<span data-ttu-id="c653a-220">Para simplificar os cálculos, os conjuntos de amostras foram criados para coincidir com os valores reais e previstos.</span><span class="sxs-lookup"><span data-stu-id="c653a-220">To simplify the calculations, sample arrays were built to match the actual and predicted values.</span></span> <span data-ttu-id="c653a-221">Essas matrizes usaram a biblioteca de métricas do sklearn no Python para calcular os valores.</span><span class="sxs-lookup"><span data-stu-id="c653a-221">These arrays used sklearn's metrics library in Python to calculate the values.</span></span> <span data-ttu-id="c653a-222">Este é o resultado.</span><span class="sxs-lookup"><span data-stu-id="c653a-222">Here is the result.</span></span>

| <span data-ttu-id="c653a-223">Modelo</span><span class="sxs-lookup"><span data-stu-id="c653a-223">Model</span></span>   | <span data-ttu-id="c653a-224">Estimativa ingênua</span><span class="sxs-lookup"><span data-stu-id="c653a-224">Naive guess</span></span> | <span data-ttu-id="c653a-225">Acurácia</span><span class="sxs-lookup"><span data-stu-id="c653a-225">Accuracy</span></span> | <span data-ttu-id="c653a-226">Macro f</span><span class="sxs-lookup"><span data-stu-id="c653a-226">F1 macro</span></span> |
|---------|-------------|----------|----------|
| <span data-ttu-id="c653a-227">Modelo 1</span><span class="sxs-lookup"><span data-stu-id="c653a-227">Model 1</span></span> | <span data-ttu-id="c653a-228">0,5</span><span class="sxs-lookup"><span data-stu-id="c653a-228">0.5</span></span>         | <span data-ttu-id="c653a-229">0,73</span><span class="sxs-lookup"><span data-stu-id="c653a-229">0.73</span></span>     | <span data-ttu-id="c653a-230">0,67</span><span class="sxs-lookup"><span data-stu-id="c653a-230">0.67</span></span>     |
| <span data-ttu-id="c653a-231">Modelo 2</span><span class="sxs-lookup"><span data-stu-id="c653a-231">Model 2</span></span> | <span data-ttu-id="c653a-232">0,80</span><span class="sxs-lookup"><span data-stu-id="c653a-232">0.80</span></span>        | <span data-ttu-id="c653a-233">0,83</span><span class="sxs-lookup"><span data-stu-id="c653a-233">0.83</span></span>     | <span data-ttu-id="c653a-234">0,66</span><span class="sxs-lookup"><span data-stu-id="c653a-234">0.66</span></span>     |

<span data-ttu-id="c653a-235">Para obter mais detalhes sobre como esse cálculo funciona, aqui está o relatório de classificação sklearn. para o modelo 1.</span><span class="sxs-lookup"><span data-stu-id="c653a-235">For more detail about how this calculation works, here is the sklearn.metrics classification report for model 1.</span></span> <span data-ttu-id="c653a-236">Os três estados, "Dentro do prazo", "Atrasado" e "Muito atrasado", são representados pelas linhas rotuladas 1, 2 e 3, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="c653a-236">The three states, "On time," "Late," and "Very late," are represented by the rows that are labeled 1, 2, and 3, respectively.</span></span> <span data-ttu-id="c653a-237">A média da macro é apenas a média da coluna "medida f".</span><span class="sxs-lookup"><span data-stu-id="c653a-237">The macro average is just the average of the "f1-score" column.</span></span>

|           | <span data-ttu-id="c653a-238">precisão</span><span class="sxs-lookup"><span data-stu-id="c653a-238">precision</span></span> | <span data-ttu-id="c653a-239">revocação</span><span class="sxs-lookup"><span data-stu-id="c653a-239">recall</span></span>   | <span data-ttu-id="c653a-240">medida f</span><span class="sxs-lookup"><span data-stu-id="c653a-240">f1-score</span></span> |
|-----------|-----------|----------|----------|
| <span data-ttu-id="c653a-241">**1**</span><span class="sxs-lookup"><span data-stu-id="c653a-241">**1**</span></span>     | <span data-ttu-id="c653a-242">0,83</span><span class="sxs-lookup"><span data-stu-id="c653a-242">0.83</span></span>      | <span data-ttu-id="c653a-243">0,80</span><span class="sxs-lookup"><span data-stu-id="c653a-243">0.80</span></span>     | <span data-ttu-id="c653a-244">0,82</span><span class="sxs-lookup"><span data-stu-id="c653a-244">0.82</span></span>     |
| <span data-ttu-id="c653a-245">**2**</span><span class="sxs-lookup"><span data-stu-id="c653a-245">**2**</span></span>     | <span data-ttu-id="c653a-246">0,68</span><span class="sxs-lookup"><span data-stu-id="c653a-246">0.68</span></span>      | <span data-ttu-id="c653a-247">0,71</span><span class="sxs-lookup"><span data-stu-id="c653a-247">0.71</span></span>     | <span data-ttu-id="c653a-248">0,69</span><span class="sxs-lookup"><span data-stu-id="c653a-248">0.69</span></span>     |
| <span data-ttu-id="c653a-249">**3**</span><span class="sxs-lookup"><span data-stu-id="c653a-249">**3**</span></span>     | <span data-ttu-id="c653a-250">0,50</span><span class="sxs-lookup"><span data-stu-id="c653a-250">0.50</span></span>      | <span data-ttu-id="c653a-251">0,50</span><span class="sxs-lookup"><span data-stu-id="c653a-251">0.50</span></span>     | <span data-ttu-id="c653a-252">0,50</span><span class="sxs-lookup"><span data-stu-id="c653a-252">0.50</span></span>     |

<span data-ttu-id="c653a-253">Conforme mostram os resultados, os dois modelos têm uma pontuação de acurácia de macro f quase idêntica.</span><span class="sxs-lookup"><span data-stu-id="c653a-253">As these results show, the two models have nearly identical F1 macro accuracy scores.</span></span> <span data-ttu-id="c653a-254">Neste e em muitos outros casos, a acurácia f fornece um indicador melhor do recurso de um modelo.</span><span class="sxs-lookup"><span data-stu-id="c653a-254">In this and many other cases, F1 accuracy provides a better indicator of a model's capability.</span></span> <span data-ttu-id="c653a-255">Quanto à acurácia, a interpretação dos resultados requer que você compreenda o que é mais importante considerar no modelo.</span><span class="sxs-lookup"><span data-stu-id="c653a-255">As for accuracy, interpretation of the results requires that you understand what is most important to consider in the model.</span></span>

#### <a name="privacy-notice"></a><span data-ttu-id="c653a-256">Aviso de privacidade</span><span class="sxs-lookup"><span data-stu-id="c653a-256">Privacy notice</span></span>
<span data-ttu-id="c653a-257">As versões prévias (1) podem utilizar menos medidas de privacidade e segurança que o serviço do Dynamics 365 Finance and Operations, (2) não estão incluídas no contrato de nível de serviço (SLA) desse serviço, (3) não devem ser usadas para processar dados pessoais ou outros dados sujeitos a requisitos de conformidade legais ou regulatórios e (4) têm suporte limitado.</span><span class="sxs-lookup"><span data-stu-id="c653a-257">Previews (1) might use less privacy and fewer security measures than the Dynamics 365 Finance and Operations service, (2) aren't included in the service level agreement (SLA) for this service, (3) should not be used to process personal data or other data that is subject to legal or regulatory compliance requirements, and (4) have limited support.</span></span>
