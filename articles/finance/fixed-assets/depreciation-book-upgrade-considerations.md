---
title: Visão geral da atualização do registro de depreciações
description: 'Em versões anteriores, havia dois conceitos de avaliação para ativos fixos: modelos de valor e registros de depreciação.'
author: ShylaThompson
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User, Developer
ms.reviewer: roschlom
ms.custom: 221624
ms.assetid: cf434099-36f9-4b0f-a7c8-bed091e34f39
ms.search.region: global
ms.author: saraschi
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.openlocfilehash: 016787fa0636b0a3c0d17d2e4fd890cf56d8f519
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/15/2021
ms.locfileid: "5241225"
---
# <a name="depreciation-book-upgrade-overview"></a><span data-ttu-id="5c0c6-103">​Visão geral do upgrade do registro de depreciações​</span><span class="sxs-lookup"><span data-stu-id="5c0c6-103">Depreciation book upgrade overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="5c0c6-104">Em versões anteriores, havia dois conceitos de avaliação para ativos fixos: modelos de valor e registros de depreciações.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-104">In previous releases, there were two valuation concepts for fixed assets -  value models and depreciation books.</span></span> <span data-ttu-id="5c0c6-105">No Microsoft Dynamics 365 for Operations (1611), as funcionalidades de modelo de valor e registro de depreciação foram mescladas em um único conceito que é conhecido como registro.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-105">In Microsoft Dynamics 365 for Operations (1611), the value model functionality and depreciation book functionality have been merged into a single concept that is known as a book.</span></span> <span data-ttu-id="5c0c6-106">Este tópico fornece alguns aspectos a serem considerados durante a atualização.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-106">This topic provides some things to consider for the upgrade.</span></span> 

<span data-ttu-id="5c0c6-107">O processo de atualização moverá suas configurações existentes e todas as transações existentes para a nova estrutura de registro.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-107">The upgrade process will move your existing setup and all existing transactions to the new book structure.</span></span> <span data-ttu-id="5c0c6-108">Os métodos de depreciação são permanecerá como momento, como um registro que lançar na contabilidade.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-108">Value models will remain as they currently are, as a book that posts to the general ledger.</span></span> <span data-ttu-id="5c0c6-109">Os registros de depreciação serão movidos para um registro que tenha a opção **Lançar na contabilidade** definida como **Não**.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-109">Depreciation books will be moved to a book that has the **Post to general ledger** option set to **No**.</span></span> <span data-ttu-id="5c0c6-110">Os nomes de diário de registro de depreciações serão movidos a um nome de diário da contabilidade com o nível de lançamento definido como **Nenhum**.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-110">Depreciation book journal names will be moved to a general ledger journal name with the posting layer set to **None**.</span></span> <span data-ttu-id="5c0c6-111">As transações do livro de depreciações serão movidas para as transações de ativo fixo.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-111">Depreciation book transactions will be moved to Fixed asset transactions.</span></span> 

<span data-ttu-id="5c0c6-112">Antes de executar a atualização de dados, você deve entender as duas opções disponíveis para atualizar linhas do diário do registro de depreciação para comprovantes de transação, e a sequência numérica que será usada para a série de comprovante.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-112">Before running the data upgrade, you should understand the two options available for upgrading depreciation book journal lines to transaction vouchers, and the number sequence that will be used for the voucher series.</span></span> 

<span data-ttu-id="5c0c6-113">Opção 1:  **Sequência numérica definida pelo sistema** – essa é a opção padrão para otimizar o desempenho da atualização.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-113">Option 1:  **System-defined number sequence** - This is the default option to optimize upgrade performance.</span></span> <span data-ttu-id="5c0c6-114">A atualização não usará a estrutura de sequência numérica, e em vez disso atribuirá comprovantes com uma abordagem baseada em conjuntos.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-114">The upgrade will not use the number sequences framework, but instead will allocate vouchers with a set-based approach.</span></span> <span data-ttu-id="5c0c6-115">Depois da atualização, a nova sequência numérica será criada com o **Conjunto do número seguinte** baseado apropriadamente nas transações de atualização.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-115">After the upgrade, the new number sequence will be created with the **Next number set** appropriately based on the upgraded transactions.</span></span> <span data-ttu-id="5c0c6-116">Por padrão, a sequência numérica será usada no formato de FADBUpgr\#\#\#\#\#\#\#\#\#.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-116">By default, the number sequence used will be in the FADBUpgr\#\#\#\#\#\#\#\#\# format.</span></span> <span data-ttu-id="5c0c6-117">Há alguns parâmetros disponíveis para você ajustar o formato ao usar esta abordagem:</span><span class="sxs-lookup"><span data-stu-id="5c0c6-117">There are a few parameters available to you to adjust the format when using this approach:</span></span>

-   <span data-ttu-id="5c0c6-118">**Código da sequência numérica** – o código para identificar a sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-118">**Number sequence code** – The code to identify the number sequence.</span></span> <span data-ttu-id="5c0c6-119">Esse código de sequência numérica não poderá existir, pois será criado pela atualização.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-119">This number sequence code cannot exist since it will be created by the upgrade.</span></span>
    -   <span data-ttu-id="5c0c6-120">Nome da constante: **NumberSequenceDefaultCode**</span><span class="sxs-lookup"><span data-stu-id="5c0c6-120">Constant name: **NumberSequenceDefaultCode**</span></span>
    -   <span data-ttu-id="5c0c6-121">Valor padrão: "FADBUpgr"</span><span class="sxs-lookup"><span data-stu-id="5c0c6-121">Default value: "FADBUpgr"</span></span>
-   <span data-ttu-id="5c0c6-122">**Prefixo** – o valor da sequência de caracteres da constante que será usado como um prefixo para os números de comprovante.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-122">**Prefix** – The constant string value that will be used as a prefix for the voucher numbers.</span></span>
    -   <span data-ttu-id="5c0c6-123">Nome da constante: **NumberSequenceDefaultParameterPrefix**</span><span class="sxs-lookup"><span data-stu-id="5c0c6-123">Constant name: **NumberSequenceDefaultParameterPrefix**</span></span>
    -   <span data-ttu-id="5c0c6-124">Valor padrão: "FADBUpgr"</span><span class="sxs-lookup"><span data-stu-id="5c0c6-124">Default value: "FADBUpgr"</span></span>
-   <span data-ttu-id="5c0c6-125">**Comprimento alfanumérico** – o comprimento do segmento alfanumérico da sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-125">**Alphanumeric length** – The length of the alphanumeric segment of the number sequence.</span></span>
    -   <span data-ttu-id="5c0c6-126">Nome da constante: \*\*NumberSequenceDefaultParameterAlpanumericLength \*\*</span><span class="sxs-lookup"><span data-stu-id="5c0c6-126">Constant name: \*\*NumberSequenceDefaultParameterAlpanumericLength \*\*</span></span>
    -   <span data-ttu-id="5c0c6-127">Valor padrão: 9</span><span class="sxs-lookup"><span data-stu-id="5c0c6-127">Default value: 9</span></span>
-   <span data-ttu-id="5c0c6-128">**Número inicial** – o primeiro número a ser usado na sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-128">**Start number** - The first number to be used in the number sequence.</span></span>
    -   <span data-ttu-id="5c0c6-129">Nome da constante: \*\*NumberSequenceDefaultParameterStartNumber \*\*</span><span class="sxs-lookup"><span data-stu-id="5c0c6-129">Constant name: \*\*NumberSequenceDefaultParameterStartNumber  \*\*</span></span>
    -   <span data-ttu-id="5c0c6-130">Valor padrão: 1</span><span class="sxs-lookup"><span data-stu-id="5c0c6-130">Default value: 1</span></span>

<span data-ttu-id="5c0c6-131">Opção 2: **A sequência numérica definida por um usuário existente** - esta opção permitirá que você defina a sequência numérica a ser usada para a atualização.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-131">Option 2: **Existing user-defined number sequence** - This option will allow you to define the number sequence to be used for the upgrade.</span></span> <span data-ttu-id="5c0c6-132">Use esta opção se precisar de configuração de sequência numérica avançada.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-132">Consider using this option if you need advanced number sequence configuration.</span></span> <span data-ttu-id="5c0c6-133">Para usar uma sequência numérica, modifique a classe de atualização ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans com as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="5c0c6-133">To use a number sequence, you must modify the upgrade class ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans with the following information:</span></span>

-   <span data-ttu-id="5c0c6-134">**Código da sequência numérica** – o código da sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-134">**Number sequence code** – The code of the number sequence.</span></span>
    -   <span data-ttu-id="5c0c6-135">Nome da constante: \*\*NumberSequenceExistingCode \*\*</span><span class="sxs-lookup"><span data-stu-id="5c0c6-135">Constant name: \*\*NumberSequenceExistingCode \*\*</span></span>
    -   <span data-ttu-id="5c0c6-136">Valor padrão: não há padrão, deve ser atualizado para o código da sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-136">Default value: No default, this must be updated to the number sequence code.</span></span>
-   <span data-ttu-id="5c0c6-137">**Sequência numérica compartilhada** – um valor booliano para identificar o escopo da sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-137">**Shared number sequence** – A boolean value to identify the scope of the number sequence.</span></span> <span data-ttu-id="5c0c6-138">Use "true" para sequências numéricas compartilhadas em todas as empresas e "false" para um escopo específico de uma empresa.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-138">Use "true" for shared number sequences across all companies, and "false" for a company-specific scope.</span></span> <span data-ttu-id="5c0c6-139">Ao usar "falso", a sequência numérica com o nome especificado deverá existir em cada empresa que contenha as transações de registro de depreciações.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-139">When using "false", the number sequence with the specified name must exist in every company that contains depreciation book transactions.</span></span> <span data-ttu-id="5c0c6-140">Há sequências numéricas compartilhadas cada partição que contém transações de registro de depreciações.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-140">Shared number sequences exist in every partition that contains depreciation book transactions.</span></span>
    -   <span data-ttu-id="5c0c6-141">Nome da constante: \*\*NumberSequenceExistingIsShared \*\*</span><span class="sxs-lookup"><span data-stu-id="5c0c6-141">Constant name: \*\*NumberSequenceExistingIsShared \*\*</span></span>
    -   <span data-ttu-id="5c0c6-142">Valor padrão: true</span><span class="sxs-lookup"><span data-stu-id="5c0c6-142">Default value: true</span></span>

<span data-ttu-id="5c0c6-143">Os parâmetros estão localizados no início da classe ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-143">The parameters are located at the beginning of the ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans class.</span></span> 

<span data-ttu-id="5c0c6-144">*// Especifique uma abordagem de alocação de comprovantes* 
 *//true, se desejar usar um código de sequência numérica existente* 
 *// false, se quiser usar a sequência numérica definida pelo sistema (padrão)* const boolean NumberSequenceUseExistingCode = false;</span><span class="sxs-lookup"><span data-stu-id="5c0c6-144">*// Specify a preferable approach of vouchers allocation* 
 *// true, if you want to use an existing number sequence code* 
 *// false, if you intend to use the system-defined number sequence (default)* const boolean NumberSequenceUseExistingCode = false;</span></span>  

<span data-ttu-id="5c0c6-145">*// Se estiver usando a abordagem de sequência numérica definida pelo sistema, especifique os parâmetros para a sequência numérica.*
 *// Uma nova sequência numérica será criada com esses parâmetros.*</span><span class="sxs-lookup"><span data-stu-id="5c0c6-145">*// If using the system-defined number sequence approach, specify the parameters for the number sequence.*
 *// A new number sequence will be created with these parameters.*</span></span> <span data-ttu-id="5c0c6-146">const str NumberSequenceDefaultCode = 'FADBUpgr'; const str NumberSequenceDefaultParameterPrefix = 'FADBUpgr'; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;</span><span class="sxs-lookup"><span data-stu-id="5c0c6-146">const str NumberSequenceDefaultCode = 'FADBUpgr'; const str NumberSequenceDefaultParameterPrefix = 'FADBUpgr'; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;</span></span>   

<span data-ttu-id="5c0c6-147">*// Se estiver usando a abordagem de sequência numérica existente, especifique o código de sequência numérica existente.* 
 *// A alocação do comprovante irá linha por linha para as sequências numéricas existentes.*</span><span class="sxs-lookup"><span data-stu-id="5c0c6-147">*// If using the existing number sequence approach, specify the existing number sequence code.* 
 *// Voucher allocation will go row-by-row for existing number sequences.*</span></span> <span data-ttu-id="5c0c6-148">const str NumberSequenceExistingCode = ''; *// Especifica o escopo do código de sequência numérica existente* 
 *// true, se a sequência numérica especificada for compartilhada* 
 *// false, se a sequência numérica especificada for por empresa* 
 *// A sequência numérica definida pelo sistema padrão será usada se um código de sequência numérica com o escopo especificado não for encontrado.*</span><span class="sxs-lookup"><span data-stu-id="5c0c6-148">const str NumberSequenceExistingCode = ''; *// Specify the scope of the existing number sequence code* 
 *// true, if the specified number sequence is shared* 
 *// false, if the specified number sequence is per-company* 
 *// The default system-defined number sequence will be used if a number sequence code with the specified scope is not found.*</span></span> <span data-ttu-id="5c0c6-149">const boolean NumberSequenceExistingIsShared = true;</span><span class="sxs-lookup"><span data-stu-id="5c0c6-149">const boolean NumberSequenceExistingIsShared = true;</span></span> 

<span data-ttu-id="5c0c6-150">Recrie o projeto que contém a classe depois que as constantes forem modificadas.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-150">Rebuild the project that contains the class after the constants have been modified.</span></span> 

<span data-ttu-id="5c0c6-151">Ao usar a abordagem de sequência numérica gerada pelo sistema (opção 1), a atualização usará o processamento baseado no conjunto para alocar os números de comprovante, conforme especificado nos parâmetros de script de atualização.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-151">When using the system-generated number sequence approach (option 1), the upgrade will use set-based processing to allocate the voucher numbers as specified in the upgrade script parameters.</span></span> <span data-ttu-id="5c0c6-152">Também criará uma nova sequência numérica com parâmetros especificados após a alocação.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-152">It will also create a new number sequence with specified parameters after the allocation.</span></span> 

<span data-ttu-id="5c0c6-153">Ao usar a abordagem de sequência numérica existente definida pelo usuário (opção 2), a atualização de dados verifica se a sequência numérica com o escopo especificado existe no banco de dados para cada partição e empresa com transações do registro de depreciações.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-153">When using the user-defined existing number sequence approach (option 2), the data upgrade checks whether the number sequence with the specified scope exists in the database for each partition and company with depreciation book transactions.</span></span> <span data-ttu-id="5c0c6-154">Caso exista, a atualização usará o processamento linha por linha para alocar os números do comprovante, conforme especificado pela sequência numérica usando a estrutura da sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-154">If it does exist, the upgrade will use row-by-row processing to allocate the voucher numbers as specified by the number sequence using the number sequence framework.</span></span> <span data-ttu-id="5c0c6-155">Se a sequência numérica não existir com o escopo especificado, a atualização usará a abordagem de sequência numérica definida pelo sistema padrão para alocar os números de comprovante, e criará uma nova sequência numérica com os parâmetros padrão especificados após alocação.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-155">If the number sequence does not exist with the specified scope, the upgrade will use the default system-defined number sequence approach to allocate the voucher numbers, and will create a new number sequence with specified default parameters after the allocation.</span></span>

<span data-ttu-id="5c0c6-156">Em ambas abordagens, o script da atualização de dados também usará a sequência numérica para o campo **Série de comprovante** nos novos nomes de diário de contabilidade criados para os antigos nomes de diário de registro de depreciações.</span><span class="sxs-lookup"><span data-stu-id="5c0c6-156">With either approach, the data upgrade script will also use the number sequence for the **Voucher series** field on the new general ledger journal names created for the former depreciation book journal names.</span></span>





[!INCLUDE[footer-include](../../includes/footer-banner.md)]